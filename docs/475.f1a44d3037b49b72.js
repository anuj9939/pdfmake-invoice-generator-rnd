"use strict";(self.webpackChunklms_web_app=self.webpackChunklms_web_app||[]).push([[475],{3156:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>ComponentBasedReportComponent});var C_CodeWork_iCare_Workshop_lms_web_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5861),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5879),_angular_forms__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6223),_angular_material_table__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9538),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5619),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7328),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9773),sweetalert2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3519),sweetalert2__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_0__),src_shared_toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8394),src_shared_services_loader_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9250),src_shared_services_auth_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8586),src_shared_common_common_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8738),src_shared_services_general_master_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3493),_angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(6814),_shared_layout_editor_editor_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1903),_angular_material_input__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(2032),_angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5683);function ComponentBasedReportComponent_ng_container_36_th_1_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"th",17),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_.header," ")}}function ComponentBasedReportComponent_ng_container_36_td_2_div_1_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div",21),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit,u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",u.cell(_)," ")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_4_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"mat-error",28),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_.error,"")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_5_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"mat-error",28),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_.warning," ")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_9_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"mat-error",28),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_.error,"")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_10_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"mat-error",28),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_.warning," ")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_Template(c,p){if(1&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div")(1,"div",24)(2,"mat-form-field",25)(3,"input",26),_angular_core__WEBPACK_IMPORTED_MODULE_3__.NdJ("ngModelChange",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_3__.CHM(_);const g=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(2).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_3__.KtG(g.result=h)})("keyup",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_3__.CHM(_);const g=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(2).$implicit,w=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_3__.KtG(w.moveToNextInput(h,g.inputID))}),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(4,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_4_Template,2,1,"mat-error",27),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(5,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_5_Template,2,1,"mat-error",27),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(6,"div",24)(7,"mat-label"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(8),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(9,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_9_Template,2,1,"mat-error",27),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(10,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_mat_error_10_Template,2,1,"mat-error",27),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()}if(2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("hidden","label"===_.labelType),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("id",_.formFieldID),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("id",_.inputID)("ngModel",_.result),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",!_.isGeneral&&_.error.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",!_.isGeneral&&_.warning.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("hidden","input"===_.labelType),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_.result),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",_.error.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",_.warning.length>0)}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_div_0_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(2,"div",30)(3,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()()),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit,u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",u.cell(_)," "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij("Sample: ",_.sample,""),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij("Technology: ",_.method,"")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_ng_template_1_Template(c,p){if(1&c&&_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(0),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit,u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",u.cell(_)," ")}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(0,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_div_0_Template,7,3,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(1,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_ng_template_1_Template,1,1,"ng-template",null,29,_angular_core__WEBPACK_IMPORTED_MODULE_3__.W1O)),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.MAs(2),u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(3).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf","testName"===u.columnDef)("ngIfElse",_)}}function ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(0,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_div_0_Template,11,10,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(1,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_ng_template_1_Template,3,2,"ng-template",null,23,_angular_core__WEBPACK_IMPORTED_MODULE_3__.W1O)),2&c){const _=_angular_core__WEBPACK_IMPORTED_MODULE_3__.MAs(2),u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf","result"===u.columnDef)("ngIfElse",_)}}function ComponentBasedReportComponent_ng_container_36_td_2_Template(c,p){if(1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"td",18),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(1,ComponentBasedReportComponent_ng_container_36_td_2_div_1_Template,2,1,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(2,ComponentBasedReportComponent_ng_container_36_td_2_ng_template_2_Template,3,2,"ng-template",null,20,_angular_core__WEBPACK_IMPORTED_MODULE_3__.W1O),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&c){const _=p.$implicit,u=_angular_core__WEBPACK_IMPORTED_MODULE_3__.MAs(3),h=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.Udp("width",h.width),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",_.isReadOnly)("ngIfElse",u)}}function ComponentBasedReportComponent_ng_container_36_Template(c,p){1&c&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.ynx(0,14),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(1,ComponentBasedReportComponent_ng_container_36_th_1_Template,2,1,"th",15),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(2,ComponentBasedReportComponent_ng_container_36_td_2_Template,4,4,"td",16),_angular_core__WEBPACK_IMPORTED_MODULE_3__.BQk()),2&c&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("matColumnDef",p.$implicit.columnDef)}function ComponentBasedReportComponent_tr_37_Template(c,p){1&c&&_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(0,"tr",31)}function ComponentBasedReportComponent_tr_38_Template(c,p){1&c&&_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(0,"tr",32)}let ComponentBasedReportComponent=(()=>{var _class;class ComponentBasedReportComponent{constructor(c,p,_,u,h,g){this.toastrService=c,this.loader=p,this.authService=_,this.commonService=u,this.masterService=h,this._fb=g,this.isComponentLoaded=!1,this.selectedReport={},this.reportModificationEvent$=new rxjs__WEBPACK_IMPORTED_MODULE_4__.X({eventType:null}),this.formSubmitEvent$=new _angular_core__WEBPACK_IMPORTED_MODULE_3__.vpe,this.destroySubscription$=new rxjs__WEBPACK_IMPORTED_MODULE_5__.t(1),this.editorHeight=String(screen.availHeight/2-96),this.dataSource=new _angular_material_table__WEBPACK_IMPORTED_MODULE_6__.by,this.displayedColumns=[],this.columns=[],this.testComponentMappingList=[],this.reportStatus=[{entityBusinessID:1,entityBusinessName:"Verified"},{entityBusinessID:2,entityBusinessName:"Non-Verified"}],this.selectedReportStatus=2}ngOnInit(){this.getTestComponentMappingList().then(c=>{this.setTestComponentMappingList(c),this.getReportDetail().then(p=>{this.setReportDetail(p)}).catch(p=>{this.toastrService.show({type:"error",text:p})})}).catch(c=>{this.toastrService.show({type:"error",text:c})}),this.componentBasedReportFormGroup=this._fb.group({remarks:new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NI(null)}),this.selectedReportStatus=this.selectedReport.reportStatus,this.reportModificationEvent$.subscribe(c=>{switch(c.eventType){case"create":this.createOrModifyReport("C");break;case"update":this.createOrModifyReport("U");break;case"reset":this.resetReportForm()}})}get remarks(){return this.componentBasedReportFormGroup.get("remarks")}ngAfterViewInit(){this.isComponentLoaded=!0,this.setTestComponentMappingTable([])}ngOnDestroy(){this.isComponentLoaded=!1,this.destroySubscription$.next(null),this.destroySubscription$.complete(),this.reportModificationEvent$.unsubscribe()}getTestComponentMappingList(){var c=this;return new Promise((p,_)=>{this.loader.showSpinner("Retrieving test component mapping...");const u={genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",entityID:this.selectedReport.testId,detailFlag:!1,entityBusinessName:this.selectedReport.gender,searchValue:this.commonService.findDaysBetweenTwoDate(this.selectedReport.dob,this.selectedReport.appointmentDate)}};this.masterService.requestApiForGeneralMaster(u,"testcomponentmappingservice/getAllEntity").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.R)(this.destroySubscription$)).subscribe(function(){var h=(0,C_CodeWork_iCare_Workshop_lms_web_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)(function*(g){"200"===g.statusCode||"300"===g.statusCode?(g.responseList=null===g.responseList?[]:g.responseList[0].testComponentEntityList,p(g.responseList)):(c.loader.hideSpinner(),_(g.errorMessage))});return function(g){return h.apply(this,arguments)}}(),h=>{this.loader.hideSpinner(),_("Either Internet is not working or some internal server issue")})})}getReportDetail(){var c=this;return new Promise((p,_)=>{this.loader.showSpinner("Retrieving report detail..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",appointmentID:this.selectedReport.appointmentID,serviceID:this.selectedReport.testId,isSampleCollected:1,detailFlag:!1}},"appointmentreportservice/getAllEntity").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.R)(this.destroySubscription$)).subscribe(function(){var h=(0,C_CodeWork_iCare_Workshop_lms_web_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)(function*(g){c.loader.hideSpinner(),"200"===g.statusCode||"300"===g.statusCode?(g.responseList=null===g.responseList?[]:g.responseList[0],p(g.responseList)):_(g.errorMessage)});return function(g){return h.apply(this,arguments)}}(),h=>{this.loader.hideSpinner(),_("Either Internet is not working or some internal server issue")})})}setTestComponentMappingList(c){c=c.sort((p,_)=>p.order-_.order),this.testComponentMappingList=c.map((p,_)=>({testComponentID:p.testComponentID,testName:p.testComponentName,isReadOnly:1===p.isReadOnly,isGeneral:1===p.isGeneral,result:"",referenceInterval:1===p.isGeneral?p.generalDescription:1===p.isReadOnly?"":p.rangeLower+"-"+p.rangeUpper,unit:1===p.isReadOnly?"":p.unitName,order:1===p.isReadOnly?"":p.order,labelType:null===p.expression?"input":"label",inputID:null===p.expression&&0===p.isReadOnly?`report-input-id-${_+1}`:null,formFieldID:null===p.expression&&0===p.isReadOnly?`report-form-field-id-${_+1}`:null,mapCode:p.mapCode,expression:p.expression,sample:1===p.isReadOnly?"":null==p.sample?"N/A":p.sample,method:1===p.isReadOnly?"":null==p.technology?"N/A":p.technology,error:"",warning:"",rangeLower:null==p.rangeLower||""==p.rangeLower?0:p.rangeLower,rangeUpper:null==p.rangeUpper||""==p.rangeUpper?0:p.rangeUpper})),this.setTestComponentMappingTable(this.testComponentMappingList)}setReportDetail(c){c.length>0&&(this.remarks.setValue(c[0].remarks),this.testComponentMappingList=this.testComponentMappingList.map(p=>({...p,entityID:c.find(_=>_.testComponentID===p.testComponentID).entityID,result:c.find(_=>_.testComponentID===p.testComponentID).resultDescription})),this.setTestComponentMappingTable(this.testComponentMappingList))}setTestComponentMappingTable(c){this.columns=[{columnDef:"testName",header:"Test Name",width:"25%",cell:p=>`${p.testName}`},{columnDef:"result",header:"Result",width:"20%",cell:p=>`${p.result}`},{columnDef:"referenceInterval",header:"Biological Interval",width:"35%",cell:p=>`${p.referenceInterval}`},{columnDef:"unit",header:"Unit",width:"20%",cell:p=>`${p.unit}`}],this.dataSource.data=c,this.displayedColumns=this.columns.map(p=>p.columnDef)}moveToNextInput(c,p){if(13===c.keyCode){c.preventDefault();const u=this.testComponentMappingList.filter(g=>null!==g.inputID).map(g=>g.inputID),h=u.findIndex(g=>g===p);h<u.length-1&&document.getElementById(u[h+1]).focus()}else{let u=this.testComponentMappingList.find(h=>h.inputID==p);if(!u.isGeneral){const h=document.getElementById(u.formFieldID);u.result<parseInt(u.rangeLower)||u.result>parseInt(u.rangeUpper)?(u.warning="Input value is not in range.",h.classList.add("mat-form-field-invalid")):(u.warning="",h.classList.replace("mat-form-field-invalid","mat-form-field-valid")),null===u.result&&(u.warning="",h.classList.replace("mat-form-field-invalid","mat-form-field-valid"))}}this.calculateValuesFromExpression()}calculateValuesFromExpression(){var tempTestComponentMappingList=this.testComponentMappingList,currentExpression;for(let i=0;i<tempTestComponentMappingList.length;i++)if(null!=tempTestComponentMappingList[i].expression){currentExpression=tempTestComponentMappingList[i].expression;for(let c=0;c<tempTestComponentMappingList.length;c++){if(i==c){c=tempTestComponentMappingList.length;continue}let p=tempTestComponentMappingList[c].result;0==tempTestComponentMappingList[c].isReadOnly&&((null==p||""==p)&&(p=0),null!=tempTestComponentMappingList[c].mapCode&&(currentExpression=currentExpression.replace(tempTestComponentMappingList[c].mapCode,Number(p))))}let result=null;if(result=eval(currentExpression),"Val Rule"==tempTestComponentMappingList[i].testName)tempTestComponentMappingList[i].error=result>100||result<100?"Total count must equal to 100!":"",tempTestComponentMappingList[i].result=null;else if(null!=result&&"string"==typeof result){let c;c=result.split("."),2==c.length&&0==c[1]&&(result=c[0])}("NaN"==result||Number.isNaN(result)||"Infinity"==result||result==1/0)&&(result=""),tempTestComponentMappingList[i].result=result}}createOrModifyReport(c){const p=this.testComponentMappingList.every(u=>""==u.result);this.testComponentMappingList.some(u=>""!==u.error)?this.toastrService.show({type:"error",text:"Please enter correct value!"}):p?this.toastrService.show({type:"error",text:"Please enter at least one result input!"}):"1"==localStorage.getItem("verifyReport")?sweetalert2__WEBPACK_IMPORTED_MODULE_0___default().fire({title:"Choose report status",input:"radio",inputValue:this.selectedReportStatus,showCancelButton:!0,cancelButtonText:"Close",inputOptions:{1:"Verified",2:"Not-verified"},inputValidator:h=>h?"":"You need to choose something!"}).then(h=>{h.isConfirmed&&(this.selectedReportStatus=Number(h.value),this.submitReportForm(c,this.selectedReportStatus))}):(this.selectedReportStatus=2,this.submitReportForm(c,this.selectedReportStatus))}submitReportForm(c,p){var _=this;this.loader.showSpinner("C"==c?"Creating report...":"Updating report...");const u="C"==c?"appointmentreportservice/createEntity":"appointmentreportservice/updateEntity";let h=this.testComponentMappingList.map(b=>({companyID:this.authService.companyID,createdBy:this.authService.employeeID,subDepartmentID:this.selectedReport.subdepartmentId,departmentID:this.selectedReport.departmentId,testID:this.selectedReport.testId,testComponentID:b.testComponentID,patitentID:this.selectedReport.id,auditAction:c,reportStatus:p,entityBusinessID:this.selectedReport.appointmentID,entityParentBusinessID:this.selectedReport.entityID,serviceID:this.selectedReport.testId,resultDescription:String(b.result),entityID:b.entityID,active:1}));h[0].remarks=this.remarks.value;const g={appointmentReportEntity:{appointmentReportEntityList:h,companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",entityBusinessID:this.selectedReport.appointmentID,serviceID:this.selectedReport.testId,reportStatus:Number(p)}},w=0===this.selectedReport.reportStatus?"Report created successfully!":"Report updated successfully!";this.masterService.requestApiForGeneralMaster(g,u).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.R)(this.destroySubscription$)).subscribe(function(){var b=(0,C_CodeWork_iCare_Workshop_lms_web_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)(function*(L){if(_.loader.hideSpinner(),"200"===L.statusCode){const P=L.responseList[0];_.selectedReport.reportStatus=P.reportStatus,_.formSubmitEvent$.emit({data:P}),_.toastrService.show({type:"success",text:w})}else _.toastrService.show({type:"error",text:"Something went wrong, please try again!"})});return function(L){return b.apply(this,arguments)}}(),b=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}resetReportForm(){this.testComponentMappingList=this.testComponentMappingList.map(c=>({...c,result:""})),this.dataSource.data=this.testComponentMappingList,this.componentBasedReportFormGroup.reset()}}return _class=ComponentBasedReportComponent,_class.\u0275fac=function c(p){return new(p||_class)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_shared_toastr__WEBPACK_IMPORTED_MODULE_1__.k),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_shared_services_loader_service__WEBPACK_IMPORTED_MODULE_10__.D),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_shared_services_auth_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_shared_common_common_service__WEBPACK_IMPORTED_MODULE_11__.v),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_shared_services_general_master_service__WEBPACK_IMPORTED_MODULE_12__.c),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_angular_forms__WEBPACK_IMPORTED_MODULE_7__.qu))},_class.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xpm({type:_class,selectors:[["app-component-based-report"]],inputs:{selectedReport:"selectedReport",reportModificationEvent$:"reportModificationEvent$"},outputs:{formSubmitEvent$:"formSubmitEvent$"},decls:45,vars:22,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-4","col-md-4","col-12"],[1,"report-info-block"],[1,"report-info-label-title"],[1,"row","report-table-container",3,"hidden"],["mat-table","",1,"mat-elevation-z8","demo-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","","class","report-header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","style","background-color: #ffffff;",4,"matRowDef","matRowDefColumns"],[1,"no-record-component-mapping",3,"hidden"],[1,"no-record-label"],[1,"col-12","editor-container"],["editorHeight","280px",3,"editorControl","requiredFlag","editorHeight"],[3,"matColumnDef"],["mat-header-cell","","class","report-header-label",4,"matHeaderCellDef"],["mat-cell","","class","report-cell-label",3,"width",4,"matCellDef"],["mat-header-cell","",1,"report-header-label"],["mat-cell","",1,"report-cell-label"],["class","report-title-label",4,"ngIf","ngIfElse"],["cell_content",""],[1,"report-title-label"],[4,"ngIf","ngIfElse"],["label_content",""],[3,"hidden"],["appearance","outline",1,"report-input-result",3,"id"],["type","number","matInput","","placeholder","Result Value",3,"id","ngModel","ngModelChange","keyup"],["style","font-size: 12px;font-style: italic;",4,"ngIf"],[2,"font-size","12px","font-style","italic"],["other_colomn_cell",""],[1,"report-test-sample-and-method"],["mat-header-row","",1,"report-header-row"],["mat-row","",2,"background-color","#ffffff"]],template:function c(p,_){1&p&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(5,"Billing Date: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(6,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(8,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(9,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(10,"Sample Collected On: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(11,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(13,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(14,"div",2)(15,"div",3)(16,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(17,"Report Status: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(18,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(19),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(20,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(21,"Emergency: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(22,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(23),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(24,"div",2)(25,"div",3)(26,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(27,"Test Name: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(28,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(29),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(30,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(31,"Referral Doctor: "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(32,"b"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(33),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(34,"div",5)(35,"table",6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(36,ComponentBasedReportComponent_ng_container_36_Template,3,1,"ng-container",7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(37,ComponentBasedReportComponent_tr_37_Template,1,0,"tr",8),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(38,ComponentBasedReportComponent_tr_38_Template,1,0,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(39,"div",10)(40,"p",11),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(41,"Mapping is not available"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(42,"div",1)(43,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(44,"app-editor",13),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()()),2&p&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xi3(8,16,_.selectedReport.appointmentDate,"E, MMM d y, h:mm a")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xi3(13,19,_.selectedReport.sampleCollectedDate,"E, MMM d y, h:mm a")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(1==_.selectedReport.reportStatus?"Final":2==_.selectedReport.reportStatus?"Read":0==_.selectedReport.reportStatus?"New":null),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_.selectedReport.emergency),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_.selectedReport.testName),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Oqu(_.selectedReport.referralDoctor),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("hidden",0===_.dataSource.data.length),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("dataSource",_.dataSource),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngForOf",_.columns),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("matHeaderRowDef",_.displayedColumns)("matHeaderRowDefSticky",!0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("matRowDefColumns",_.displayedColumns),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("hidden",_.dataSource.data.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("editorControl",_.remarks)("requiredFlag",!0)("editorHeight",_.editorHeight))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_13__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_7__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_7__.wV,_angular_forms__WEBPACK_IMPORTED_MODULE_7__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_7__.On,_shared_layout_editor_editor_component__WEBPACK_IMPORTED_MODULE_14__.P,_angular_material_input__WEBPACK_IMPORTED_MODULE_15__.Nt,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.KE,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.hX,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.TO,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.BZ,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.fO,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.as,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.w1,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.Dz,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.nj,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.ge,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.ev,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.XQ,_angular_material_table__WEBPACK_IMPORTED_MODULE_6__.Gk,_angular_common__WEBPACK_IMPORTED_MODULE_13__.uU],styles:[".report-info-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}@media (max-width: 766px){.report-info-block[_ngcontent-%COMP%]{align-items:baseline}}.report-info-label-title[_ngcontent-%COMP%]{font-size:16px;line-height:30px}.demo-table[_ngcontent-%COMP%]{width:100%;margin:12px}.report-table-container[_ngcontent-%COMP%]{overflow:auto;margin-top:12px}.report-header-row[_ngcontent-%COMP%]{background-color:#df36f4}.report-header-label[_ngcontent-%COMP%]{color:#fff;font-size:16px;text-align:center}.report-title-label[_ngcontent-%COMP%]{position:absolute;left:46vw;right:0;margin-top:-8px;font-size:20px}@media (max-width: 766px){.report-title-label[_ngcontent-%COMP%]{left:24vw;font-size:16px}}.report-cell-label[_ngcontent-%COMP%]{text-align:center}.report-input-result[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:-12px;text-align:center}.editor-container[_ngcontent-%COMP%]{margin-bottom:40px}.no-record-component-mapping[_ngcontent-%COMP%]{width:100%;height:100px;border:1px solid #b6b6b6;margin-bottom:10px;margin-top:10px}.no-record-label[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px}.report-test-sample-and-method[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:10px;line-height:0px;margin-top:8px;color:#a8a6a6}"]}),ComponentBasedReportComponent})()},5475:(c,p,_)=>{_.r(p),_.d(p,{ServicesModule:()=>et});var u=_(6814),h=_(1896),g=_(5861),w=_(8),b=_(5619),L=_(8645),P=_(7328),E=_(9773),R=_(6825),e=_(5879),J=_(7270),x=_(8586),O=_(8394),S=_(9250),A=_(3493),Z=_(8738),B=_(2242),C=_(6223),T=_(2296),I=_(5195),y=_(8034),U=_(2032),M=_(5683),k=_(3424),$=_(2333);function G(s,m){if(1&s&&(e.TgZ(0,"div")(1,"div",19),e._uU(2),e.qZA()()),2&s){const r=m.$implicit;e.xp6(1),e.Udp("background",r.backgroundColor)("color",r.fontColor),e.xp6(1),e.hij(" ",r.name,"")}}function Q(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div",24)(1,"div"),e._uU(2,"Print Report : "),e.qZA(),e.TgZ(3,"div",27)(4,"button",16),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw();return e.KtG(o.printReport(o.billDetail,t,"withSign"))}),e._uU(5,"With Sign"),e.qZA(),e.TgZ(6,"button",17),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw();return e.KtG(o.printReport(o.billDetail,t,"withoutSign"))}),e._uU(7,"Without Sign"),e.qZA()()()}}function Y(s,m){if(1&s&&(e.TgZ(0,"div",20)(1,"mat-card",21)(2,"mat-card-header",22)(3,"div",23),e._uU(4),e.ALo(5,"firstLetter"),e.qZA(),e.TgZ(6,"mat-card-title"),e._uU(7),e.qZA()(),e.TgZ(8,"mat-card-content")(9,"div",9)(10,"div",24)(11,"div"),e._uU(12,"Department Name : "),e.qZA(),e.TgZ(13,"div",25),e._uU(14),e.qZA()(),e.TgZ(15,"div",24)(16,"div"),e._uU(17,"Subdepartment Name : "),e.qZA(),e.TgZ(18,"div",25),e._uU(19),e.qZA()(),e.TgZ(20,"div",24)(21,"div"),e._uU(22,"Referral Doctor : "),e.qZA(),e.TgZ(23,"div",25),e._uU(24),e.qZA()(),e.TgZ(25,"div",24)(26,"div"),e._uU(27,"Status : "),e.qZA(),e.TgZ(28,"div",25),e._uU(29),e.qZA()(),e.YNc(30,Q,8,0,"div",26),e.qZA()()()()),2&s){const r=m.$implicit;e.xp6(1),e.Udp("background-color",1===r.isPrinted?"#815ba4":null)("color",1===r.isPrinted?"#FFFFFF":null),e.xp6(2),e.Udp("background-color",1===r.isPrinted?"#000000":"#bcbcbc"),e.xp6(1),e.hij(" ",e.lcZ(5,13,(null==r?null:r.testName)||"")," "),e.xp6(3),e.hij(" ",(null==r?null:r.testName)||"",""),e.xp6(7),e.hij(" ",r.entityParentBusinessName||""," "),e.xp6(5),e.hij(" ",r.entityBusinessName||""," "),e.xp6(5),e.hij(" ",r.referralName||""," "),e.xp6(5),e.hij(" ",0===r.reportStatus?"New":1===r.reportStatus?"Final":"Read"," "),e.xp6(1),e.Q6J("ngIf",1===r.reportStatus)}}let j=(()=>{var s;class m{constructor(n,t,o,l){this.loader=n,this.toastrService=t,this.authService=o,this.masterService=l,this.filterStatus=[{id:1,name:"Printed",backgroundColor:"#815ba4",fontColor:"#FFFFFF"}],this.billDetail={},this.testServiceDetail=[],this.closePanelEvent=new e.vpe,this.destroySubscription$=new P.t(1),this.testListForSelectedBillID={},this.totalBillRefundAmount=0}ngOnInit(){}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}closeClearDuesBlock(){this.testServiceDetail=[],this.closePanelEvent.emit(!1)}printReport(n,t,o){if(this.testServiceDetail.some(a=>1===a.reportStatus)){let a={};null===t?a={reportSearchDTO:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,departmentID:1,appointmentID:n.entityBusinessID,checkFlag:"withSign"===o?1:0,mode:"W"}}:(1===t.isProfile?(t.departmentID=null,t.subDepartmentID=null):t.serviceID=null,a={reportSearchDTO:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,checkFlag:"withSign"===o?1:0,serviceID:t.serviceID,appointmentID:n.entityBusinessID,departmentID:t.departmentID,subDepartmentID:t.subDepartmentID,mode:"W"}}),this.loader.showSpinner("Printing report "+("withSign"==o?"with digital sign!":"without digital sign!")),this.masterService.requestApiForGeneralMaster(a,"appointmentreportservice/printReport").pipe((0,E.R)(this.destroySubscription$)).subscribe(d=>{if(this.loader.hideSpinner(),"200"===d.statusCode){const f=d.responseList[0][0].impression;null===t?this.testServiceDetail=this.testServiceDetail.map(v=>1===v.reportStatus?{...v,isPrinted:1}:{...v,isPrinted:0}):t.isPrinted=1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64,"+encodeURI(f)+"'></iframe> ")}else this.toastrService.show({type:"error",text:d.errorMessage})},d=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}else this.toastrService.show({type:"error",text:"To print test report in group at least one test should be final!"})}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(S.D),e.Y36(O.k),e.Y36(x.$),e.Y36(A.c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-test-services"]],inputs:{billDetail:"billDetail",testServiceDetail:"testServiceDetail"},outputs:{closePanelEvent:"closePanelEvent"},decls:52,vars:8,consts:[[1,"container-fluid"],[1,"row",2,"align-items","center"],[1,"col-6"],[2,"font-size","1rem","padding-top","8px"],[1,"col-4","rp-type-legend"],[4,"ngFor","ngForOf"],[1,"col-2"],["mat-icon-button","",2,"float","right","padding-top","8px",3,"disableRipple","click"],["aria-label","clear-icon",1,"lms-clear-icon"],[1,"row"],[1,"col-12"],[1,"row","detail-block"],[1,"col-lg-4","col-md-4","col-6"],[1,"col-lg-8","col-md-8","col-6"],[1,"col-lg-4","col-md-6","col-sm-4"],[1,"col-lg-8","col-md-6","col-sm-8"],["mat-raised-button","","type","button","color","primary",2,"margin-right","6px",3,"click"],["mat-raised-button","","type","button","color","primary",3,"click"],["class","col-12","style","margin-bottom: 15px;",4,"ngFor","ngForOf"],[1,"rp-type-label"],[1,"col-12",2,"margin-bottom","15px"],[1,"test-services-card"],[2,"display","flex","align-items","flex-end"],["mat-card-avatar","",1,"test-services-card-avatar"],[1,"col-lg-12","test-services-label"],[1,"test-services-label-value"],["class","col-lg-12 test-services-label",4,"ngIf"],[1,"test-services-actions"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,G,3,5,"div",5),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return t.closeClearDuesBlock()}),e._UZ(9,"div",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"b"),e._uU(15,"Appointment ID: "),e.qZA()(),e.TgZ(16,"div",13),e._uU(17),e.qZA()()(),e.TgZ(18,"div",10)(19,"div",11)(20,"div",12)(21,"b"),e._uU(22,"Patient Name: "),e.qZA()(),e.TgZ(23,"div",13),e._uU(24),e.qZA()()(),e.TgZ(25,"div",10)(26,"div",11)(27,"div",12)(28,"b"),e._uU(29,"Patient Age: "),e.qZA()(),e.TgZ(30,"div",13),e._uU(31),e.qZA()()(),e.TgZ(32,"div",10)(33,"div",11)(34,"div",12)(35,"b"),e._uU(36,"Gender: "),e.qZA()(),e.TgZ(37,"div",13),e._uU(38),e.qZA()()(),e.TgZ(39,"div",10)(40,"div",11)(41,"div",14)(42,"b"),e._uU(43,"Print Report Group: "),e.qZA()(),e.TgZ(44,"div",15)(45,"button",16),e.NdJ("click",function(){return t.printReport(t.billDetail,null,"withSign")}),e._uU(46,"With Sign"),e.qZA(),e.TgZ(47,"button",17),e.NdJ("click",function(){return t.printReport(t.billDetail,null,"withoutSign")}),e._uU(48,"Without Sign"),e.qZA()()()(),e.TgZ(49,"div",10)(50,"div",9),e.YNc(51,Y,31,15,"div",18),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("","Print Test Report"," "),e.xp6(2),e.Q6J("ngForOf",t.filterStatus),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(9),e.Oqu(null==t.billDetail?null:t.billDetail.entityBusinessID),e.xp6(7),e.Oqu(null==t.billDetail?null:t.billDetail.entityPatientName),e.xp6(7),e.Oqu(null==t.billDetail?null:t.billDetail.entityPatientAge),e.xp6(7),e.Oqu(null==t.billDetail?null:t.billDetail.entityPatientGender),e.xp6(13),e.Q6J("ngForOf",t.testServiceDetail))},dependencies:[u.sg,u.O5,T.lW,T.RK,I.a8,I.kc,I.dn,I.dk,I.n5,$.q],styles:[".detail-block[_ngcontent-%COMP%]{padding:10px 0}.clear-dues-mat-form-field[_ngcontent-%COMP%]{width:100%}.input-block[_ngcontent-%COMP%]{padding-top:20px}.test-services-container[_ngcontent-%COMP%]{margin-top:10px}.test-services-card-avatar[_ngcontent-%COMP%]{background-size:cover;text-align:center;line-height:40px}.test-services-card[_ngcontent-%COMP%]{max-width:500px;height:auto;cursor:pointer}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:15px!important;word-break:break-word}.test-services-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}@media (max-width: 766px){.test-services-label[_ngcontent-%COMP%]{align-items:baseline}}.mat-card[_ngcontent-%COMP%]   .last-child[_ngcontent-%COMP%]{margin-bottom:0}.test-services-label-value[_ngcontent-%COMP%]{font-size:13px}.test-services-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.disable-test-card[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.rp-type-legend[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.rp-type-label[_ngcontent-%COMP%]{height:22px;width:auto;max-width:200px;padding:0 16px;border:1px #9d9d9d solid;text-align:center;border-radius:10px;margin:18px 12px;font-size:12px}"]}),m})(),V=(()=>{var s;class m{constructor(n,t,o,l,a,d){this.exportService=n,this.authService=t,this.toastrService=o,this.loader=l,this.masterService=a,this.commonService=d,this.clearedDuesList$=new b.X([]),this.testServicesList$=new b.X([]),this.inlineEditFlag=!1,this.showLogCheckedFlag=!1,this.gridOptions=new w.s8,this.changeDetection=new L.x,this.destroySubscription$=new P.t(1),this.currentDate=new Date,this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.selectedBillDetails={},this.screenWidth=screen.width,this.menuState="out"}ngOnInit(){this.setAppointmentDetailsList(),this.gridOptions={searchPlaceholder:"Search Patient",pageSize:this.authService.pageSize,dateFormat:"yyyy-MM-dd",keyCodeForNextCell:13,showInlineEdit:this.inlineEditFlag,titleForMobileView:"entityPatientName",pageSizeArray:[5,10,20],showDeleteButton:!1,showAddButton:!1,showEditButton:!1,showActivateDeactivateButton:!1,showSearchInput:!0,activateDeactivateCondition:{conditionalProperty:"activeFlag",valueForActivation:"1",valueForDeactivation:"0"},columns:[{name:"entityPatientID",label:"Patient ID",enable:!0,searchable:!1,sortable:!0,type:"text",editable:!1,isRequired:!1},{name:"entityPatientName",label:"Patient Name",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!1,isRequired:!1},{name:"entityPatientAge",label:"Patient Age",enable:!0,searchable:!1,sortable:!0,type:"text",editable:!1,isRequired:!1},{name:"entityPatientGender",label:"Gender",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityEmergency",label:"Emergency",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityPaymentStatus",label:"Payment Status",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"effectiveDateFrom",label:"Date",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1}]}}exportData(n){this.exportService.generateFile(this.clearedDuesList$.getValue(),"Appointment List."+n,[{property:"entityPatientID",label:"Patient ID"},{property:"entityPatientName",label:"Patient Name"},{property:"entityPatientAge",label:"Patient Age"},{property:"entityPatientGender",label:"Gender"},{property:"entityEmergency",label:"Emergency"},{property:"entityPaymentStatus",label:"Payment Status"},{property:"effectiveDateFrom",label:"Date"}])}getAppointmentDetailsList(n){var t=this;return new Promise((o,l)=>{this.loader.showSpinner("Appointment Details list on the way!");const a={genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:n,dropDown:!1,fromDate:this.commonService.parseDate(this.selectedStartDate,"yyyy-MM-dd"),toDate:this.commonService.parseDate(this.selectedEndDate,"yyyy-MM-dd")}};this.masterService.requestApiForGeneralMaster(a,"appointmentservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var d=(0,g.Z)(function*(f){t.loader.hideSpinner(),"200"===f.statusCode||"300"===f.statusCode?(f.responseList=null==f.responseList?[]:yield t.extractPatientDetails(f.responseList[0]),o(f.responseList)):l(f.errorMessage)});return function(f){return d.apply(this,arguments)}}(),d=>{this.loader.hideSpinner(),l("Either Internet is not working or some internal server issue")})})}setAppointmentDetailsList(){this.getAppointmentDetailsList(!1).then(n=>{this.clearedDuesList$.next(n)}).catch(n=>{this.clearedDuesList$.next([]),this.toastrService.show({type:"error",text:n})})}extractPatientDetails(n){var t=this;return(0,g.Z)(function*(){const o=(new Date).toISOString().slice(0,10);return n=yield n.map(l=>{let a=null===l.entityPatientName?["",o,""]:l.entityPatientName.split(","),d=a[0],f=t.commonService.findValuesOfYearMonthAndDays(a[1],l.effectiveDateFrom),D=a[2];return{...l,entityPatientName:d,entityPatientAge:0==f.years?f.months+" M , "+f.days+" D":f.years+" Y",entityPatientGender:D,entityEmergency:1==l.isEmergency?"Yes":"No",entityPaymentStatus:1==l.billEntity.paymentStatus?"Cleared":"Dues Pending",backgroundColor:1==l.isEmergency?"#f8c6cb":void 0}}).sort((l,a)=>Date.parse(l.effectiveDateFrom)>Date.parse(a.effectiveDateFrom)?-1:0)})()}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}searchAppointmentDetailsForSelectedDate(){this.setAppointmentDetailsList()}resetDateFilter(){this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.setAppointmentDetailsList()}closeSidenav(){null!==document.getElementById("mySidenav")&&(document.getElementById("mySidenav").style.width="0"),this.menuState="out"===this.menuState?"in":"out"}closeDuesClearForm(n){if(Object.keys(n).length>0){let t=this.clearedDuesList$.getValue(),o=t.findIndex(l=>l.entityBusinessID===n.entityBusinessID);t[o]=n,this.clearedDuesList$.next(t)}this.closeSidenav()}openTestList(n){n.isDuesCleared=!0,this.selectedBillDetails=n;const t=this.screenWidth>900?this.screenWidth/4:this.screenWidth;document.getElementById("mySidenav").style.width=t+"px",this.menuState="out"===this.menuState?"in":"out",this.viewAssoiciatedTestServiceList(n.entityBusinessID)}generateBarCode(n,t){this.loader.showSpinner("Generating Barcode..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",appointmentID:t,detailFlag:n}},"appointmentdetailservice/getBarCode").pipe((0,E.R)(this.destroySubscription$)).subscribe(l=>{if(this.loader.hideSpinner(),"200"===l.statusCode){const a=l.responseList[0].entityBusinessName;let d=window.open("");setTimeout(()=>{d.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64,"+encodeURI(a)+"'></iframe> ")},200)}else this.toastrService.show({type:"error",text:l.errorMessage})},l=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}viewAssoiciatedTestServiceList(n){this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",appointmentID:n}},"appointmentdetailservice/getAppointmentDetailReferenceEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode?(o.responseList=null===o.responseList?[]:o.responseList[0],this.testServicesList$.next(o.responseList)):this.toastrService.show({type:"error",text:o.errorMessage})},o=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}closeTestServicesForm(n){this.closeSidenav()}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(J.u),e.Y36(x.$),e.Y36(O.k),e.Y36(S.D),e.Y36(A.c),e.Y36(Z.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-appointment"]],decls:39,vars:14,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12"],["childLink","Services","subchildLink","Appointment"],[1,"col-lg-2","col-md-2","col-sm-12","bill-search-parameter"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Start Date","id","start-date-block","readonly","",3,"matDatepicker","ngModel","max","ngModelChange","click"],["matSuffix","",3,"for"],["aria-label","calendar-icon","matDatepickerToggleIcon","",1,"lms-calendar-icon"],["startDatePicker",""],["matInput","","placeholder","End Date","id","end-date-block","readonly","",3,"matDatepicker","ngModel","max","min","ngModelChange","click"],["endDatePicker",""],[1,"col-lg-3","col-md-3","col-sm-12","bill-search-parameter"],["mat-raised-button","","color","warn",1,"warn-action-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-action-btn",3,"click"],["id","mySidenav",1,"sidenav"],[1,"update-pending-dues-panel"],[3,"billDetail","testServiceDetail","closePanelEvent"],[1,"mat-elevation-z12","lms-master-card"],[1,"lms-matcardtitlegroup"],["mat-icon-button","",3,"disableRipple","click"],["aria-label","excel",1,"lms-excel-icon"],["aria-label","csv",1,"lms-csv-icon"],[1,"remaining-space"]],template:function(n,t){if(1&n){const o=e.EpF();e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"app-breadcrumb",3),e.qZA(),e.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"Start Date"),e.qZA(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(a){return t.selectedStartDate=a})("click",function(){e.CHM(o);const a=e.MAs(13);return e.KtG(a.open())}),e.qZA(),e.TgZ(10,"mat-datepicker-toggle",7),e._UZ(11,"div",8),e.qZA(),e._UZ(12,"mat-datepicker",null,9),e.qZA()(),e.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"End Date"),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(a){return t.selectedEndDate=a})("click",function(){e.CHM(o);const a=e.MAs(22);return e.KtG(a.open())}),e.qZA(),e.TgZ(19,"mat-datepicker-toggle",7),e._UZ(20,"div",8),e.qZA(),e._UZ(21,"mat-datepicker",null,11),e.qZA()(),e.TgZ(23,"div",12)(24,"button",13),e.NdJ("click",function(){return t.resetDateFilter()}),e._uU(25," Reset "),e.qZA(),e.TgZ(26,"button",14),e.NdJ("click",function(){return t.searchAppointmentDetailsForSelectedDate()}),e._uU(27," Search "),e.qZA()()(),e.TgZ(28,"div",1)(29,"div",15)(30,"div",16)(31,"app-test-services",17),e.NdJ("closePanelEvent",function(a){return t.closeTestServicesForm(a)}),e.qZA()()(),e.TgZ(32,"mat-card",18)(33,"mat-card-title-group",19)(34,"button",20),e.NdJ("click",function(){return t.exportData("xlsx")}),e._UZ(35,"div",21),e.qZA(),e.TgZ(36,"button",20),e.NdJ("click",function(){return t.exportData("csv")}),e._UZ(37,"div",22),e.qZA(),e._UZ(38,"span",23),e.qZA()()()()}if(2&n){const o=e.MAs(13),l=e.MAs(22);e.xp6(9),e.Q6J("matDatepicker",o)("ngModel",t.selectedStartDate)("max",t.currentDate),e.xp6(1),e.Q6J("for",o),e.xp6(8),e.Q6J("matDatepicker",l)("ngModel",t.selectedEndDate)("max",t.currentDate)("min",t.selectedStartDate),e.xp6(1),e.Q6J("for",l),e.xp6(10),e.Q6J("@slideInOut",t.menuState),e.xp6(2),e.Q6J("billDetail",t.selectedBillDetails)("testServiceDetail",t.testServicesList$.getValue()),e.xp6(3),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("disableRipple",!0)}},dependencies:[B.G,C.Fj,C.JJ,C.On,T.lW,T.RK,I.a8,I.C1,y.Mq,y.hl,y.nW,y.Q0,U.Nt,M.KE,M.hX,M.R9,k.L,j],styles:[".search-patient-container[_ngcontent-%COMP%]{display:flow-root;margin-top:-10px;margin-left:10px;margin-right:30px}.bill-search-parameter[_ngcontent-%COMP%]{margin-top:11px}.warn-action-btn[_ngcontent-%COMP%]{float:right;margin-top:5px}.primary-action-btn[_ngcontent-%COMP%]{float:right;margin-right:10px;margin-top:5px}.sidenav[_ngcontent-%COMP%]{position:fixed;top:64px;right:0;height:100%;width:0;z-index:1;box-shadow:1px 0 12px #212529;background-color:#fff;overflow-x:hidden;transition:.55s}.update-pending-dues-panel[_ngcontent-%COMP%]{padding-bottom:100px}"],data:{animation:[(0,R.X$)("slideInOut",[(0,R.SB)("in",(0,R.oB)({transform:"translate3d(0,0,0)"})),(0,R.SB)("out",(0,R.oB)({transform:"translate3d(100%, 0, 0)"})),(0,R.eR)("in => out",(0,R.jt)("400ms ease-in-out")),(0,R.eR)("out => in",(0,R.jt)("400ms ease-in-out"))])]}}),m})();var K=_(8005),H=_(3156),z=_(6593),X=_(1775),ee=_(1903),te=_(5986),W=_(7466);function ne(s,m){if(1&s&&(e.TgZ(0,"mat-radio-button",17),e._uU(1),e.qZA()),2&s){const r=m.$implicit;e.Q6J("value",r.entityBusinessID),e.xp6(1),e.hij(" ",r.entityBusinessName," ")}}function ie(s,m){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," Template Name is required! "),e.qZA())}function oe(s,m){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," Template Name is already taken. "),e.qZA())}function re(s,m){if(1&s){const r=e.EpF();e.ynx(0),e.TgZ(1,"label",18),e._UZ(2,"div",19),e._uU(3," Upload First Image "),e.qZA(),e.TgZ(4,"input",20),e.NdJ("change",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.uploadFirstImage(t))}),e.qZA(),e.BQk()}}function ae(s,m){if(1&s){const r=e.EpF();e.ynx(0),e._UZ(1,"img",21),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return t.attachmentImageFirst.setValue(""),e.KtG(t.safeFirstImageURL="")}),e._UZ(3,"div",23),e.qZA(),e.BQk()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("src",r.safeFirstImageURL,e.LSH),e.xp6(1),e.Q6J("disableRipple",!0)}}function se(s,m){if(1&s){const r=e.EpF();e.ynx(0),e.TgZ(1,"label",24),e._UZ(2,"div",19),e._uU(3," Upload Second Image "),e.qZA(),e.TgZ(4,"input",25),e.NdJ("change",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.uploadSecondImage(t))}),e.qZA(),e.BQk()}}function le(s,m){if(1&s){const r=e.EpF();e.ynx(0),e._UZ(1,"img",26),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return t.attachmentImageSecond.setValue(""),e.KtG(t.safeSecondImageURL="")}),e._UZ(3,"div",23),e.qZA(),e.BQk()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("src",r.safeSecondImageURL,e.LSH),e.xp6(1),e.Q6J("disableRipple",!0)}}function _e(s,m){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," *Result description is required! "),e.qZA())}let pe=(()=>{var s;class m{constructor(n,t,o,l,a,d,f){this._fb=n,this.authService=t,this.toastrService=o,this.loader=l,this.masterService=a,this._changeDetectorRef=d,this._sanitizer=f,this.isComponentLoaded=!1,this.selectedReport={},this.reportModificationEvent$=new b.X({eventType:null}),this.formSubmitEvent$=new e.vpe,this.reportStatusList=[{entityBusinessID:2,entityBusinessName:"Read"},{entityBusinessID:1,entityBusinessName:"Final"}],this.selectedReportStatus=2,this.destroySubscription$=new P.t(1),this.testTemplateList$=new b.X([]),this.editorHeight=String(screen.availHeight/2-96),this.selectedReportDetail={}}ngOnInit(){this.getTestTemplateList().then(n=>{this.testTemplateList$.next(n),this.getReportDetail().then(t=>{t.length>0&&(this.selectedReportDetail=t[0],this.selectedReportStatus=t[0].isReported,this._changeDetectorRef.markForCheck(),this.safeFirstImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+t[0].attachmentImageFirst),this.safeSecondImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+t[0].attachmentImageSecond),this.templateBasedReportFormGroup.patchValue({resultDescription:t[0].resultDescription,attachmentImageFirst:t[0].attachmentImageFirst,attachmentImageSecond:t[0].attachmentImageSecond,testTemplateID:t[0].testTemplateID}),this.templateBasedReportFormGroup.updateValueAndValidity())}).catch(t=>{this.toastrService.show({type:"error",text:t})})}).catch(n=>{this.toastrService.show({type:"error",text:n})}),this.templateBasedReportFormGroup=this._fb.group({resultDescription:new C.NI(null,[C.kI.required]),testTemplateID:new C.NI,isNewTemplate:new C.NI(!1),templateName:new C.NI,attachmentImageFirst:new C.NI(""),attachmentImageSecond:new C.NI("")}),this.reportModificationEvent$.subscribe(n=>{switch(n.eventType){case"create":this.createOrModifyReport("C");break;case"update":this.createOrModifyReport("U");break;case"reset":this.resetReportForm()}})}ngAfterViewInit(){this.isComponentLoaded=!0}get resultDescription(){return this.templateBasedReportFormGroup.get("resultDescription")}get testTemplateID(){return this.templateBasedReportFormGroup.get("testTemplateID")}get isNewTemplate(){return this.templateBasedReportFormGroup.get("isNewTemplate")}get templateName(){return this.templateBasedReportFormGroup.get("templateName")}get attachmentImageFirst(){return this.templateBasedReportFormGroup.get("attachmentImageFirst")}get attachmentImageSecond(){return this.templateBasedReportFormGroup.get("attachmentImageSecond")}ngOnDestroy(){this.isComponentLoaded=!1,this.templateBasedReportFormGroup.reset(),this.destroySubscription$.next(null),this.destroySubscription$.complete(),this.reportModificationEvent$.unsubscribe()}getReportDetail(){var n=this;return new Promise((t,o)=>{this.loader.showSpinner("Retrieving report detail..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",appointmentID:this.selectedReport.appointmentID,serviceID:this.selectedReport.testId}},"appointmentreportservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var a=(0,g.Z)(function*(d){n.loader.hideSpinner(),"200"===d.statusCode||"300"===d.statusCode?(d.responseList=null===d.responseList?[]:d.responseList[0],t(d.responseList)):o(d.errorMessage)});return function(d){return a.apply(this,arguments)}}(),a=>{this.loader.hideSpinner(),o("Either Internet is not working or some internal server issue")})})}getTestTemplateList(){var n=this;return new Promise((t,o)=>{this.loader.showSpinner("Retrieving test template list..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",entityBusinessID:this.selectedReport.subdepartmentId,entityID:this.selectedReport.testId,dropDown:!0}},"testtemplateservice/getAllTestTemplateReferenceEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var a=(0,g.Z)(function*(d){"200"===d.statusCode||"300"===d.statusCode?(d.responseList=null===d.responseList?[]:d.responseList,t(d.responseList)):(n.loader.hideSpinner(),o(d.errorMessage))});return function(d){return a.apply(this,arguments)}}(),a=>{this.loader.hideSpinner(),o("Either Internet is not working or some internal server issue")})})}calculateFileSize(n,t){if(0==n)return"0 Bytes";var l=t||2,d=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/Math.pow(1024,d)).toFixed(l))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}uploadFirstImage(n){let t=n.target.files||n.srcElement.files;var o=t[0];if(parseFloat(this.calculateFileSize(o.size,2))>200)this.toastrService.show({type:"error",text:"File size should not greater than 200 kb"}),this.attachmentImageFirst.setValue("");else if(t&&o){var l=new FileReader;l.onload=this.loadFirstImage.bind(this),l.readAsBinaryString(o)}}loadFirstImage(n){this._changeDetectorRef.markForCheck(),this.attachmentImageFirst.setValue(btoa(n.target.result)),this.safeFirstImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.attachmentImageFirst.value)}uploadSecondImage(n){let t=n.target.files||n.srcElement.files;var o=t[0];if(parseFloat(this.calculateFileSize(o.size,2))>200)this.toastrService.show({type:"error",text:"File size should not greater than 200 kb"}),this.attachmentImageFirst.setValue("");else if(t&&o){var l=new FileReader;l.onload=this.loadSecondImage.bind(this),l.readAsBinaryString(o)}}loadSecondImage(n){this._changeDetectorRef.markForCheck(),this.attachmentImageSecond.setValue(btoa(n.target.result)),this.safeSecondImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.attachmentImageSecond.value)}onChangeOfTestTemplates(n){var t=this;this.loader.showSpinner("Fetching template description..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",entityBusinessID:n.value}},"testtemplateservice/getAllTestTemplate").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var l=(0,g.Z)(function*(a){t.loader.hideSpinner(),"200"===a.statusCode?t.resultDescription.setValue(a.responseList[0].entityTemplateContent||""):t.toastrService.show({type:"error",text:"Unable to fetch test template, please try again!"})});return function(a){return l.apply(this,arguments)}}(),l=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}createNewTemplate(n){n?(this.resultDescription.setValue(null),this.testTemplateID.setValue(void 0),this.templateName.setErrors({required:!0})):(this.templateName.setValue(void 0),this.templateName.setErrors(null)),console.log(n)}inputTemplateName(n){0==n.trim().length?this.templateName.setErrors({required:!0}):n.trim().length>0?null!=this.testTemplateList$.getValue().find(o=>null!==o.entityBusinessName&&o.entityBusinessName.toString().trim().toLowerCase()===n.trim().toLowerCase())&&this.templateName.setErrors({mustBeUnique:!0}):this.templateName.setErrors(null)}createOrModifyReport(n){var t=this;if(this.templateBasedReportFormGroup.valid){this.loader.showSpinner(0===this.selectedReport.reportStatus?"Creating Report...":"Updating Report...");let o={},l="";0===this.selectedReport.reportStatus?(l="appointmentreportservice/createEntity",o={appointmentReportEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",attachmentImageFirst:this.attachmentImageFirst.value,attachmentImageSecond:this.attachmentImageSecond.value,auditAction:n,departmentID:this.selectedReport.departmentId,entityBusinessID:this.selectedReport.appointmentID,entityParentBusinessID:this.selectedReport.entityID,isNewTemplate:this.isNewTemplate.value?1:0,patitentID:this.selectedReport.id,reportStatus:this.selectedReportStatus,resultDescription:this.resultDescription.value,serviceID:this.selectedReport.testId,subDepartmentID:this.selectedReport.subdepartmentId,templateName:this.templateName.value,testComponentID:null,testTemplateID:this.testTemplateID.value}}):(l="appointmentreportservice/updateEntity",o={appointmentReportEntity:{entityID:this.selectedReportDetail.entityID,active:1,entityParentBusinessID:this.selectedReportDetail.entityParentBusinessID,companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",attachmentImageFirst:this.attachmentImageFirst.value,attachmentImageSecond:this.attachmentImageSecond.value,auditAction:n,departmentID:this.selectedReport.departmentId,entityBusinessID:this.selectedReport.appointmentID,isNewTemplate:this.isNewTemplate.value?1:0,patitentID:this.selectedReport.id,reportStatus:this.selectedReportStatus,isReported:this.selectedReportStatus,resultDescription:this.resultDescription.value,serviceID:this.selectedReport.testId,testID:this.selectedReport.testId,subDepartmentID:this.selectedReport.subdepartmentId,templateName:this.templateName.value,testComponentID:null,testTemplateID:this.testTemplateID.value}});const a=0===this.selectedReport.reportStatus?"Report created successfully!":"Report updated successfully!";this.masterService.requestApiForGeneralMaster(o,l).pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var d=(0,g.Z)(function*(f){if(t.loader.hideSpinner(),"200"===f.statusCode){const D=f.responseList[0];if(1===D.isNewTemplate){let v=t.testTemplateList$.getValue();v.push({entityBusinessID:D.testTemplateID,entityBusinessName:D.templateName}),t.testTemplateList$.next(v),t.isNewTemplate.setValue(0),t.templateName.setValue(void 0)}t.selectedReport.reportStatus=D.reportStatus,t.testTemplateID.setValue(D.testTemplateID),t.templateBasedReportFormGroup.updateValueAndValidity(),t.formSubmitEvent$.emit({data:D}),t.toastrService.show({type:"success",text:a})}else t.toastrService.show({type:"error",text:"Something went wrong, please try again!"})});return function(f){return d.apply(this,arguments)}}(),d=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}else this.templateBasedReportFormGroup.markAllAsTouched(),this.toastrService.show({type:"error",text:"Please fill required fields!"})}resetReportForm(){this.templateBasedReportFormGroup.reset()}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(C.qu),e.Y36(x.$),e.Y36(O.k),e.Y36(S.D),e.Y36(A.c),e.Y36(e.sBO),e.Y36(z.H7))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-template-based-report"]],inputs:{selectedReport:"selectedReport",reportModificationEvent$:"reportModificationEvent$"},outputs:{formSubmitEvent$:"formSubmitEvent$"},decls:59,vars:34,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-4","col-md-6","col-12"],[1,"basic-info-block"],[1,"basic-info-label-title"],["aria-label","Select an option",3,"ngModel","change","ngModelChange"],["color","primary","class","report-status-radio",3,"value",4,"ngFor","ngForOf"],[3,"hidden"],["appearance","outline",1,"report-template-input"],["matInput","","placeholder","New Template Name","minLength","1","maxLength","100",3,"formControl","input"],[4,"ngIf"],[3,"dropdownFor","isRequired","records","formControlsName","customClass","dropdownChangeEvent"],["color","primary",1,"report-checkbox",3,"labelPosition","formControl","change"],[1,"col-lg-8","col-md-12","col-12"],[1,"col-lg-6","col-12"],[1,"col-12","editor-container"],["editorHeight","280px",3,"editorControl","requiredFlag","editorHeight"],["color","primary",1,"report-status-radio",3,"value"],["for","report-left-image",1,"template-file-upload"],["aria-label","upload",1,"lms-upload-icon"],["id","report-left-image","type","file","accept","image/*",3,"change"],["alt","First image",1,"image-upload-image",3,"src"],["mat-icon-button","",1,"clear-attached-icon",3,"disableRipple","click"],["aria-label","clear-image",1,"lms-clear-image-icon"],["for","report-right-image",1,"template-file-upload"],["id","report-right-image","type","file","accept","image/*",3,"change"],["alt","Second image",1,"image-upload-image",3,"src"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5,"Billing Date: "),e.TgZ(6,"b"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"span",4),e._uU(10,"Sample Collected On: "),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"date"),e.qZA()(),e.TgZ(14,"span",4),e._uU(15,"Test Name: "),e.TgZ(16,"b"),e._uU(17),e.qZA()()(),e.TgZ(18,"div",3)(19,"span",4),e._uU(20,"Report Status: "),e.TgZ(21,"b"),e._uU(22),e.qZA()(),e.TgZ(23,"span",4),e._uU(24,"Emergency: "),e.TgZ(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"span",4),e._uU(28,"Referral Doctor: "),e.TgZ(29,"b"),e._uU(30),e.qZA()()(),e.TgZ(31,"div",3)(32,"span",4),e._uU(33," Status: "),e.TgZ(34,"mat-radio-group",5),e.NdJ("change",function(l){return t.selectedReportStatus=l.value})("ngModelChange",function(l){return t.selectedReportStatus=l}),e.YNc(35,ne,2,2,"mat-radio-button",6),e.qZA()()(),e.TgZ(36,"div",3)(37,"div",7)(38,"mat-form-field",8)(39,"mat-label"),e._uU(40,"New Template Name"),e.qZA(),e.TgZ(41,"input",9),e.NdJ("input",function(l){return t.inputTemplateName(l.target.value)}),e.qZA(),e.YNc(42,ie,2,0,"mat-error",10),e.YNc(43,oe,2,0,"mat-error",10),e.qZA()(),e.TgZ(44,"div",7)(45,"app-lms-select",11),e.NdJ("dropdownChangeEvent",function(l){return t.onChangeOfTestTemplates(l)}),e.qZA()(),e.TgZ(46,"mat-checkbox",12),e.NdJ("change",function(l){return t.createNewTemplate(l.checked)}),e._uU(47," Create New Template "),e.qZA()()(),e.TgZ(48,"div",13)(49,"div",1)(50,"div",14),e.YNc(51,re,5,0,"ng-container",10),e.YNc(52,ae,4,2,"ng-container",10),e.qZA(),e.TgZ(53,"div",14),e.YNc(54,se,5,0,"ng-container",10),e.YNc(55,le,4,2,"ng-container",10),e.qZA()()(),e.TgZ(56,"div",15),e._UZ(57,"app-editor",16),e.YNc(58,_e,2,0,"mat-error",10),e.qZA()()()),2&n&&(e.xp6(7),e.Oqu(e.xi3(8,28,t.selectedReport.appointmentDate,"E, MMM d y, h:mm a")),e.xp6(5),e.Oqu(e.xi3(13,31,t.selectedReport.sampleCollectedDate,"E, MMM d y, h:mm a")),e.xp6(5),e.Oqu(t.selectedReport.testName),e.xp6(5),e.Oqu(0==t.selectedReport.reportStatus?"New":2==t.selectedReport.reportStatus?"Read":null),e.xp6(4),e.Oqu(t.selectedReport.emergency),e.xp6(4),e.Oqu(t.selectedReport.referralDoctor),e.xp6(4),e.Q6J("ngModel",t.selectedReportStatus),e.xp6(1),e.Q6J("ngForOf",t.reportStatusList),e.xp6(2),e.Q6J("hidden",!t.isNewTemplate.value),e.xp6(4),e.Q6J("formControl",t.templateName),e.xp6(1),e.Q6J("ngIf",null==t.templateName||null==t.templateName.errors?null:t.templateName.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.templateName||null==t.templateName.errors?null:t.templateName.errors.mustBeUnique),e.xp6(1),e.Q6J("hidden",t.isNewTemplate.value),e.xp6(1),e.Q6J("dropdownFor","Test Template")("isRequired",!1)("records",t.testTemplateList$)("formControlsName",t.testTemplateID)("customClass","bill-form-test-select"),e.xp6(1),e.Q6J("labelPosition","after")("formControl",t.isNewTemplate),e.xp6(5),e.Q6J("ngIf",0==t.attachmentImageFirst.value.length),e.xp6(1),e.Q6J("ngIf",t.attachmentImageFirst.value.length>0),e.xp6(2),e.Q6J("ngIf",0==t.attachmentImageSecond.value.length),e.xp6(1),e.Q6J("ngIf",t.attachmentImageSecond.value.length>0),e.xp6(2),e.Q6J("editorControl",t.resultDescription)("requiredFlag",!0)("editorHeight",t.editorHeight),e.xp6(1),e.Q6J("ngIf",null==t.resultDescription||null==t.resultDescription.errors?null:t.resultDescription.errors.required))},dependencies:[u.sg,u.O5,C.Fj,C.JJ,C.On,C.oH,X.P,ee.P,T.RK,te.oG,U.Nt,M.KE,M.hX,M.TO,W.VQ,W.U0,u.uU],styles:[".basic-info-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.basic-info-label-title[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.report-status-radio[_ngcontent-%COMP%]{padding-left:16px;position:relative;top:3px}.report-image-title[_ngcontent-%COMP%]{text-align:center}.report-checkbox[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:-6px}.report-template-input[_ngcontent-%COMP%]{width:23vw!important}@media (max-width: 766px){.report-template-input[_ngcontent-%COMP%]{width:92vw!important}}input[type=file][_ngcontent-%COMP%]{display:none}.template-file-upload[_ngcontent-%COMP%]{border:1px solid #ccc;cursor:pointer;height:300px;width:100%;text-align:center;border-radius:5px;margin-top:10px;display:flex;flex-direction:column}.image-upload-image[_ngcontent-%COMP%]{border:1px solid #ccc;height:300px;width:100%;border-radius:5px;object-fit:contain}.image-upload-image[_ngcontent-%COMP%]:hover{filter:blur(3px)}.clear-attached-icon[_ngcontent-%COMP%]{position:absolute;left:50%;right:0;top:40%}.editor-container[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 766px){.editor-container[_ngcontent-%COMP%]{margin-bottom:40px}}"]}),m})();var ce=_(3680);const de=["dynamicComponentRef"];function me(s,m){}let q=(()=>{var s;class m{constructor(n,t,o,l,a){this.bottomSheet=n,this.data=t,this.resolver=o,this.zone=l,this.cdr=a,this.selectedReport={},this.totalReportList=[],this.selectedReportIndex=0}ngOnInit(){this.setTestReportList(this.data.item)}setTestReportList(n){this.selectedReport=n,this.totalReportList=this.data.totalItem.entityTestList.filter(t=>t.entityReportStatus!==this.data.removeItemIfReportStatusIs),0===this.totalReportList.length&&this.bottomSheet.dismiss({message:"Reporting for all test has been completed!"}),this.selectedReportIndex=this.totalReportList.findIndex(t=>t.entityTestID==this.selectedReport.entityTestID),-1===this.selectedReportIndex&&this.totalReportList.length>0&&this.zone.run(()=>{this.viewNextReport(),this.cdr.detectChanges()})}ngAfterViewInit(){this.changeComponent()}changeComponent(){let n;n=this.resolver.resolveComponentFactory("TEMPLATE"===this.selectedReport.classificationType?pe:H.M),this.dcRef.clear(),this.componentRef=this.dcRef.createComponent(n),this.dynamicComponent=this.componentRef.instance,this.dynamicComponent.selectedReport={id:this.data.totalItem.entityPatientID,name:this.data.totalItem.entityPatientName,testId:this.selectedReport.entityTestID,testName:this.selectedReport.entityTestName,dob:this.data.totalItem.entityPatientDOB,age:this.data.totalItem.entityPatientAge,gender:this.data.totalItem.entityPatientGender,referralDoctor:this.data.totalItem.entityReferralDoctor,appointmentID:this.data.totalItem.entityAppointmentID,appointmentDate:this.data.totalItem.entityAppointmentDate,sampleCollectedDate:this.selectedReport.sampleCollectedDate,reportStatus:this.selectedReport.entityReportStatus,emergency:this.selectedReport.entityEmergency,departmentId:this.selectedReport.entityDepartmentID,subdepartmentId:this.selectedReport.entitySubdepartmentID,entityID:this.selectedReport.entityID},this.dynamicComponent.formSubmitEvent$.subscribe(t=>{this.selectedReport.entityReportStatus=t.data.reportStatus,this.setTestReportList(this.selectedReport)})}ngOnDestroy(){this.dynamicComponent.isComponentLoaded&&(this.componentRef.destroy(),this.dynamicComponent.formSubmitEvent$.unsubscribe())}closeBottomSheet(){this.bottomSheet.dismiss({message:null})}viewPreviousReport(){0===this.selectedReportIndex&&(this.selectedReportIndex=this.totalReportList.length),this.selectedReportIndex=this.selectedReportIndex-1,this.selectedReport=this.totalReportList[this.selectedReportIndex],this.changeComponent()}viewNextReport(){this.selectedReportIndex=this.selectedReportIndex+1,this.selectedReportIndex=this.selectedReportIndex%this.totalReportList.length,this.selectedReport=this.totalReportList[this.selectedReportIndex],this.changeComponent()}createOrModifyReport(n){this.dynamicComponent.isComponentLoaded&&this.dynamicComponent.reportModificationEvent$.next(0==n?{eventType:"create"}:{eventType:"update"})}resetReport(){this.dynamicComponent.isComponentLoaded&&this.dynamicComponent.reportModificationEvent$.next({eventType:"reset"})}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(K.ch),e.Y36(K.OG),e.Y36(e._Vd),e.Y36(e.R0b),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-report"]],viewQuery:function(n,t){if(1&n&&e.Gf(de,7,e.s_b),2&n){let o;e.iGM(o=e.CRH())&&(t.dcRef=o.first)}},decls:42,vars:8,consts:[[1,"report-header"],[1,"report-header-title"],[1,"patient-info-block"],[1,"patient-info-label-title"],["mat-icon-button","","title","Close Report Section",1,"report-close-btn",3,"disableRipple","click"],["aria-label","close-report-section",1,"lms-close-report-section-icon"],[1,"report-content"],["dynamicComponentRef",""],[1,"report-footer"],[1,"container-fluid"],[1,"row",2,"justify-content","space-between"],["mat-ripple","","title","View Previous Report",1,"navigation-button",3,"ngClass","click"],["aria-label","lms-left-arrow",1,"lms-left-arrow-icon"],[1,"navigation-label"],[1,"action-button"],["mat-raised-button","","color","primary",1,"report-action-btn",3,"click"],["mat-raised-button","","color","warn",1,"report-action-btn",3,"click"],["mat-ripple","","title","View Next Report",1,"navigation-button",3,"ngClass","click"],["aria-label","lms-right-arrow",1,"lms-right-arrow-icon"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Create Report"),e.qZA(),e.TgZ(3,"div",2)(4,"span",3),e._uU(5,"Patient ID: "),e.TgZ(6,"b"),e._uU(7),e.qZA()(),e.TgZ(8,"span",3),e._uU(9,"Patient Name: "),e.TgZ(10,"b"),e._uU(11),e.qZA()(),e.TgZ(12,"span",3),e._uU(13,"Age: "),e.TgZ(14,"b"),e._uU(15),e.qZA()(),e.TgZ(16,"span",3),e._uU(17,"Gender: "),e.TgZ(18,"b"),e._uU(19),e.qZA()()(),e.TgZ(20,"div")(21,"button",4),e.NdJ("click",function(){return t.closeBottomSheet()}),e._UZ(22,"div",5),e.qZA()()(),e.TgZ(23,"div",6),e.YNc(24,me,0,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(26,"div",8)(27,"div",9)(28,"div",10)(29,"div",11),e.NdJ("click",function(){return t.viewPreviousReport()}),e._UZ(30,"div",12),e.TgZ(31,"div",13),e._uU(32,"Previous"),e.qZA()(),e.TgZ(33,"div",14)(34,"button",15),e.NdJ("click",function(){return t.createOrModifyReport(t.selectedReport.entityReportStatus)}),e._uU(35),e.qZA(),e.TgZ(36,"button",16),e.NdJ("click",function(){return t.resetReport()}),e._uU(37," Reset "),e.qZA()(),e.TgZ(38,"div",17),e.NdJ("click",function(){return t.viewNextReport()}),e.TgZ(39,"div",13),e._uU(40,"Next"),e.qZA(),e._UZ(41,"div",18),e.qZA()()()()),2&n&&(e.xp6(7),e.hij("",t.data.totalItem.entityPatientID,", "),e.xp6(4),e.hij("",t.data.totalItem.entityPatientName,", "),e.xp6(4),e.Oqu(t.data.totalItem.entityPatientAge>1?t.data.totalItem.entityPatientAge+" years, ":t.data.totalItem.entityPatientAge+" year, "),e.xp6(4),e.Oqu(t.data.totalItem.entityPatientGender),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(8),e.Q6J("ngClass",0==t.selectedReportIndex?"disable-action-btn":null),e.xp6(6),e.hij(" ",0===t.selectedReport.entityReportStatus?"Create":"Update"," "),e.xp6(3),e.Q6J("ngClass",t.selectedReportIndex==t.totalReportList.length-1?"disable-action-btn":null))},dependencies:[u.mk,T.lW,T.RK,ce.wG],styles:[".report-header[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;position:absolute;top:0;left:0;right:0;margin:0;display:flex;flex-direction:row;justify-content:space-between;overflow:hidden;height:48px;box-shadow:0 0 10px 3px #707070}.report-header-title[_ngcontent-%COMP%]{font-size:24px;padding:12px}@media (max-width: 766px){.report-header-title[_ngcontent-%COMP%]{font-size:20px}}.report-close-btn[_ngcontent-%COMP%]{margin-right:12px;margin-top:2px}@media (max-width: 766px){.report-close-btn[_ngcontent-%COMP%]{margin-top:4px}}.patient-info-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.patient-info-label-title[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 766px){.patient-info-label-title[_ngcontent-%COMP%]{display:none}}.report-content[_ngcontent-%COMP%]{position:absolute;top:54px;left:0;right:0;overflow:auto;height:calc(100% - 96px)}.report-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background-color:#f5f5f5;height:48px;overflow:hidden;box-shadow:20px 20px 30px 15px #707070}.navigation-button[_ngcontent-%COMP%]{background-color:#df36f4;display:flex;align-items:center;justify-content:space-around;height:40px;border-radius:20px;margin-top:4px;width:120px;cursor:pointer}@media (max-width: 766px){.navigation-button[_ngcontent-%COMP%]{width:50px}}.disable-action-btn[_ngcontent-%COMP%]{pointer-events:none;opacity:.4}.navigation-label[_ngcontent-%COMP%]{color:#fff}@media (max-width: 766px){.navigation-label[_ngcontent-%COMP%]{display:none}}.report-action-btn[_ngcontent-%COMP%]{margin-top:5px;width:100px;border-radius:20px;margin-right:10px}"]}),m})();var ue=_(3519),ge=_.n(ue),N=_(2154);function he(s,m){if(1&s&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&s){const r=m.$implicit;e.xp6(1),e.Udp("background",r.backgroundColor)("color",r.fontColor),e.xp6(1),e.hij(" ",r.name," ")}}function De(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit;return e.KtG(t.isExpanded=!t.isExpanded)}),e._UZ(1,"div",40),e.qZA()}if(2&s){const r=e.oxw().$implicit;e.Q6J("disableRipple",!0),e.xp6(1),e.Tol("Yes"===r.entityEmergency?"lms-expand-more-white-icon":"lms-expand-more-icon")}}function fe(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit;return e.KtG(t.isExpanded=!t.isExpanded)}),e._UZ(1,"div",42),e.qZA()}if(2&s){const r=e.oxw().$implicit;e.Q6J("disableRipple",!0),e.xp6(1),e.Tol("Yes"===r.entityEmergency?"lms-expand-less-white-icon":"lms-expand-less-icon")}}function Ce(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Department : ",r.entityDepartmentName," ")}}function ve(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Subdepartment : ",r.entitySubdepartmentName," ")}}function Ee(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Emergency : ",r.entityEmergency," ")}}function ye(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div")(1,"button",38),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.reportCreationEvent(o,t))}),e._uU(2," Update Report "),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.reportingAgain(o,t))}),e._uU(4," Reporting Again! "),e.qZA()()}}function Me(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"b"),e._uU(4),e.qZA(),e.YNc(5,De,2,3,"button",35),e.YNc(6,fe,2,3,"button",36),e.qZA(),e.TgZ(7,"div"),e._uU(8,"Report Status : Final"),e.qZA(),e.YNc(9,Ce,2,1,"div",37),e.YNc(10,ve,2,1,"div",37),e.YNc(11,Ee,2,1,"div",37),e.YNc(12,ye,5,0,"div",37),e.TgZ(13,"div")(14,"button",38),e.NdJ("click",function(){const o=e.CHM(r).$implicit,l=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.printReport(l,o,"withSign"))}),e._uU(15," Print With Digital Sign "),e.qZA(),e.TgZ(16,"button",38),e.NdJ("click",function(){const o=e.CHM(r).$implicit,l=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.printReport(l,o,"withoutSign"))}),e._uU(17," Print Without Digital Sign "),e.qZA()()()()}if(2&s){const r=m.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Udp("background-color",r.entityBackgroundColor)("color",r.entityFontColor),e.xp6(3),e.Oqu(r.entityTestName),e.xp6(1),e.Q6J("ngIf",!r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(3),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",n.canCreateReport)}}function be(s,m){if(1&s&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",3)(3,"div",28)(4,"div",29)(5,"span"),e._uU(6,"Appointment ID: "),e.TgZ(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"span"),e._uU(10," Appointment Date: "),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"div",29)(15,"span"),e._uU(16,"Patient ID: "),e.TgZ(17,"b"),e._uU(18),e.qZA()(),e.TgZ(19,"span"),e._uU(20,"Patient Name: "),e.TgZ(21,"b"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",29)(24,"span"),e._uU(25,"Age: "),e.TgZ(26,"b"),e._uU(27),e.qZA()(),e.TgZ(28,"span"),e._uU(29,"Gender: "),e.TgZ(30,"b"),e._uU(31),e.qZA()(),e.TgZ(32,"span"),e._uU(33,"Referral Doctor: "),e.TgZ(34,"b"),e._uU(35),e.qZA()()()(),e.TgZ(36,"div",30)(37,"div",3),e.YNc(38,Me,18,11,"div",31),e.qZA()()()()()),2&s){const r=m.$implicit,n=e.oxw(2);e.Q6J("hidden",0===n.completedReportList.length),e.xp6(8),e.Oqu(r.entityAppointmentID),e.xp6(4),e.Oqu(e.xi3(13,9,r.entityAppointmentDate,"E, MMM d y, h:mm a")),e.xp6(6),e.Oqu(r.entityPatientID),e.xp6(4),e.Oqu(r.entityPatientName),e.xp6(5),e.Oqu(r.entityPatientAge>1?r.entityPatientAge+" years":r.entityPatientAge+" year"),e.xp6(4),e.Oqu(r.entityPatientGender),e.xp6(4),e.Oqu(r.entityReferralDoctor),e.xp6(3),e.Q6J("ngForOf",r.entityTestList)}}function Te(s,m){1&s&&(e.TgZ(0,"div",43),e._UZ(1,"img",44),e.qZA())}function Pe(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._UZ(3,"app-breadcrumb",5),e.qZA(),e.TgZ(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Start Date"),e.qZA(),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedStartDate=t)})("click",function(){e.CHM(r);const t=e.MAs(12);return e.KtG(t.open())}),e.qZA(),e.TgZ(9,"mat-datepicker-toggle",9),e._UZ(10,"div",10),e.qZA(),e._UZ(11,"mat-datepicker",null,11),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),e._uU(16,"End Date"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedEndDate=t)})("click",function(){e.CHM(r);const t=e.MAs(21);return e.KtG(t.open())}),e.qZA(),e.TgZ(18,"mat-datepicker-toggle",9),e._UZ(19,"div",10),e.qZA(),e._UZ(20,"mat-datepicker",null,13),e.qZA()(),e.TgZ(22,"div",14)(23,"button",15),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.resetDateFilter())}),e._uU(24," Reset "),e.qZA(),e.TgZ(25,"button",16),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.searchCompletedReportForSelectedDate())}),e._uU(26," Search "),e.qZA()()(),e.TgZ(27,"div",17)(28,"div",18)(29,"mat-form-field",19)(30,"mat-label"),e._uU(31,"Search Patient"),e.qZA(),e.TgZ(32,"input",20),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filteredPatientString=t)})("input",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filterPatientName(t.target.value))}),e.qZA()()(),e.TgZ(33,"div",21),e.YNc(34,he,3,5,"div",22),e.qZA()(),e.TgZ(35,"div",3),e.YNc(36,be,39,12,"div",23),e.YNc(37,Te,2,0,"div",24),e.qZA()()}if(2&s){const r=e.MAs(12),n=e.MAs(21),t=e.oxw();e.xp6(8),e.Q6J("matDatepicker",r)("ngModel",t.selectedStartDate)("max",t.currentDate),e.xp6(1),e.Q6J("for",r),e.xp6(8),e.Q6J("matDatepicker",n)("ngModel",t.selectedEndDate)("max",t.currentDate)("min",t.selectedStartDate),e.xp6(1),e.Q6J("for",n),e.xp6(14),e.Q6J("ngModel",t.filteredPatientString)("disabled",0===t.cloneCompletedReportList.length),e.xp6(2),e.Q6J("ngForOf",t.filterStatus),e.xp6(2),e.Q6J("ngForOf",t.completedReportList),e.xp6(1),e.Q6J("ngIf",0===t.completedReportList.length)}}function Re(s,m){1&s&&(e.TgZ(0,"div",45),e._UZ(1,"app-access-denied",46),e.qZA())}function xe(s,m){if(1&s&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&s){const r=m.$implicit;e.xp6(1),e.Udp("background",r.backgroundColor)("color",r.fontColor),e.xp6(1),e.hij(" ",r.name," ")}}function Oe(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit;return e.KtG(t.isExpanded=!t.isExpanded)}),e._UZ(1,"div",39),e.qZA()}if(2&s){const r=e.oxw().$implicit;e.Q6J("disableRipple",!0),e.xp6(1),e.Tol("Yes"===r.entityEmergency?"lms-expand-more-white-icon":"lms-expand-more-icon")}}function Se(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit;return e.KtG(t.isExpanded=!t.isExpanded)}),e._UZ(1,"div",41),e.qZA()}if(2&s){const r=e.oxw().$implicit;e.Q6J("disableRipple",!0),e.xp6(1),e.Tol("Yes"===r.entityEmergency?"lms-expand-less-white-icon":"lms-expand-less-icon")}}function Ae(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Department : ",r.entityDepartmentName," ")}}function we(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Subdepartment : ",r.entitySubdepartmentName," ")}}function Le(s,m){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Emergency : ",r.entityEmergency," ")}}function Ue(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div")(1,"button",42),e.NdJ("click",function(){e.CHM(r);const t=e.oxw().$implicit,o=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.reportCreationEvent(o,t))}),e._uU(2),e.qZA()()}if(2&s){const r=e.oxw().$implicit;e.xp6(2),e.hij(" ",0==r.entityReportStatus?"Create Report":"Update Report"," ")}}function Ze(s,m){if(1&s&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"b"),e._uU(4),e.qZA(),e.YNc(5,Oe,2,3,"button",35),e.YNc(6,Se,2,3,"button",36),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.qZA(),e.YNc(9,Ae,2,1,"div",37),e.YNc(10,we,2,1,"div",37),e.YNc(11,Le,2,1,"div",37),e.YNc(12,Ue,3,1,"div",37),e.qZA()()),2&s){const r=m.$implicit,n=e.oxw().$implicit;e.xp6(1),e.Udp("background-color",r.entityBackgroundColor)("color",r.entityFontColor),e.xp6(3),e.Oqu(r.entityTestName),e.xp6(1),e.Q6J("ngIf",!r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(2),e.hij(" Report Status : ",0==r.entityReportStatus?"New":"Read"," "),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",r.isExpanded),e.xp6(1),e.Q6J("ngIf",n.canCreateReport)}}function Be(s,m){if(1&s&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",3)(3,"div",28)(4,"div",29)(5,"span"),e._uU(6,"Appointment ID: "),e.TgZ(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"span"),e._uU(10,"Appointment Date: "),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"div",29)(15,"span"),e._uU(16,"Patient ID: "),e.TgZ(17,"b"),e._uU(18),e.qZA()(),e.TgZ(19,"span"),e._uU(20,"Patient Name: "),e.TgZ(21,"b"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",29)(24,"span"),e._uU(25,"Age: "),e.TgZ(26,"b"),e._uU(27),e.qZA()(),e.TgZ(28,"span"),e._uU(29,"Gender: "),e.TgZ(30,"b"),e._uU(31),e.qZA()(),e.TgZ(32,"span"),e._uU(33,"Referral Doctor: "),e.TgZ(34,"b"),e._uU(35),e.qZA()()()(),e.TgZ(36,"div",30)(37,"div",3),e.YNc(38,Ze,13,12,"div",31),e.qZA()()()()()),2&s){const r=m.$implicit,n=e.oxw(2);e.Q6J("hidden",0===n.pendingReportList.length),e.xp6(8),e.Oqu(r.entityAppointmentID),e.xp6(4),e.hij(" ",e.xi3(13,9,r.entityAppointmentDate,"E, MMM d y, h:mm a")," "),e.xp6(6),e.Oqu(r.entityPatientID),e.xp6(4),e.Oqu(r.entityPatientName),e.xp6(5),e.Oqu(r.entityPatientAge>1?r.entityPatientAge+" years":r.entityPatientAge+" year"),e.xp6(4),e.Oqu(r.entityPatientGender),e.xp6(4),e.Oqu(r.entityReferralDoctor),e.xp6(3),e.Q6J("ngForOf",r.entityTestList)}}function ke(s,m){1&s&&(e.TgZ(0,"div",43),e._UZ(1,"img",44),e.qZA())}function Ke(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._UZ(3,"app-breadcrumb",5),e.qZA(),e.TgZ(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Start Date"),e.qZA(),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedStartDate=t)})("click",function(){e.CHM(r);const t=e.MAs(12);return e.KtG(t.open())}),e.qZA(),e.TgZ(9,"mat-datepicker-toggle",9),e._UZ(10,"div",10),e.qZA(),e._UZ(11,"mat-datepicker",null,11),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),e._uU(16,"End Date"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedEndDate=t)})("click",function(){e.CHM(r);const t=e.MAs(21);return e.KtG(t.open())}),e.qZA(),e.TgZ(18,"mat-datepicker-toggle",9),e._UZ(19,"div",10),e.qZA(),e._UZ(20,"mat-datepicker",null,13),e.qZA()(),e.TgZ(22,"div",14)(23,"button",15),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.resetDateFilter())}),e._uU(24," Reset "),e.qZA(),e.TgZ(25,"button",16),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.searchPendingReportForSelectedDate())}),e._uU(26," Search "),e.qZA()()(),e.TgZ(27,"div",17)(28,"div",18)(29,"mat-form-field",19)(30,"mat-label"),e._uU(31,"Search Patient"),e.qZA(),e.TgZ(32,"input",20),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filteredPatientString=t)})("input",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filterPatientName(t.target.value))}),e.qZA()()(),e.TgZ(33,"div",21),e.YNc(34,xe,3,5,"div",22),e.qZA()(),e.TgZ(35,"div",3),e.YNc(36,Be,39,12,"div",23),e.YNc(37,ke,2,0,"div",24),e.qZA()()}if(2&s){const r=e.MAs(12),n=e.MAs(21),t=e.oxw();e.xp6(8),e.Q6J("matDatepicker",r)("ngModel",t.selectedStartDate)("max",t.currentDate),e.xp6(1),e.Q6J("for",r),e.xp6(8),e.Q6J("matDatepicker",n)("ngModel",t.selectedEndDate)("max",t.currentDate)("min",t.selectedStartDate),e.xp6(1),e.Q6J("for",n),e.xp6(14),e.Q6J("ngModel",t.filteredPatientString)("disabled",0===t.clonePendingReportList.length),e.xp6(2),e.Q6J("ngForOf",t.filterStatus),e.xp6(2),e.Q6J("ngForOf",t.pendingReportList),e.xp6(1),e.Q6J("ngIf",0===t.pendingReportList.length)}}function We(s,m){1&s&&(e.TgZ(0,"div",45),e._UZ(1,"app-access-denied",46),e.qZA())}function qe(s,m){if(1&s&&(e.TgZ(0,"mat-radio-button",27)(1,"div",28),e._uU(2),e.qZA()()),2&s){const r=m.$implicit;e.Q6J("value",r.name),e.xp6(1),e.Udp("background",r.backgroundColor)("color",r.fontColor),e.xp6(1),e.hij(" ",r.name," ")}}function Fe(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.sampleCollectingEvent(t))}),e._uU(1," Collect Sample "),e.qZA()}}function Je(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(r);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.resetSampleCollection(t))}),e._uU(1," Cancel Sample Collection "),e.qZA()}}function $e(s,m){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,Fe,2,0,"button",36),e.YNc(2,Je,2,0,"button",37),e.qZA()),2&s){const r=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0===r.entityIsSampleCollected&&1!==r.reportStatus&&2!==r.reportStatus),e.xp6(1),e.Q6J("ngIf",1===r.entityIsSampleCollected&&1!==r.reportStatus&&2!==r.reportStatus)}}function Ge(s,m){if(1&s&&(e.TgZ(0,"div",40)(1,"div",41)(2,"b"),e._uU(3),e.qZA()()()),2&s){const r=m.$implicit;e.xp6(3),e.Oqu(r.entityTestName)}}function Qe(s,m){if(1&s&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",2)(3,"div",31)(4,"div",32)(5,"span"),e._uU(6,"Appointment ID: "),e.TgZ(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"span"),e._uU(10,"Appointment Date: "),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"div",32)(15,"span"),e._uU(16,"Patient ID: "),e.TgZ(17,"b"),e._uU(18),e.qZA()(),e.TgZ(19,"span"),e._uU(20,"Patient Name: "),e.TgZ(21,"b"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",32)(24,"span"),e._uU(25,"Age: "),e.TgZ(26,"b"),e._uU(27),e.qZA()(),e.TgZ(28,"span"),e._uU(29,"Gender: "),e.TgZ(30,"b"),e._uU(31),e.qZA()()(),e.TgZ(32,"div",32)(33,"span"),e._uU(34,"Report Status: "),e.TgZ(35,"b"),e._uU(36),e.qZA()(),e.TgZ(37,"span"),e._uU(38,"Emergency: "),e.TgZ(39,"b"),e._uU(40),e.qZA()(),e.TgZ(41,"span"),e._uU(42,"Referral Doctor: "),e.TgZ(43,"b"),e._uU(44),e.qZA()()(),e.YNc(45,$e,3,2,"div",33),e.qZA(),e.TgZ(46,"div",34)(47,"div",2),e.YNc(48,Ge,4,1,"div",35),e.qZA()()()()()),2&s){const r=m.$implicit,n=e.oxw(2);e.Q6J("hidden",0===n.sampleCollectionTestList.length),e.xp6(1),e.Udp("background-color",r.entityBackgroundColor)("color",r.entityFontColor),e.xp6(7),e.Oqu(r.entityAppointmentID),e.xp6(4),e.Oqu(e.xi3(13,16,r.entityAppointmentDate,"E, MMM d y, h:mm a")),e.xp6(6),e.Oqu(r.entityPatientID),e.xp6(4),e.Oqu(r.entityPatientName),e.xp6(5),e.Oqu(r.entityPatientAge>1?r.entityPatientAge+" years":r.entityPatientAge+" year"),e.xp6(4),e.Oqu(r.entityPatientGender),e.xp6(5),e.Oqu(r.entityReportStatus),e.xp6(4),e.Oqu(r.entityEmergency),e.xp6(4),e.Oqu(r.entityReferralDoctor),e.xp6(1),e.Q6J("ngIf",r.canCollectSample),e.xp6(3),e.Q6J("ngForOf",r.entityTestList)}}function Ye(s,m){1&s&&(e.TgZ(0,"div",42),e._UZ(1,"img",43),e.qZA())}function je(s,m){if(1&s){const r=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"app-breadcrumb",4),e.qZA(),e.TgZ(4,"div",5)(5,"mat-form-field",6)(6,"mat-label"),e._uU(7,"Start Date"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedStartDate=t)})("click",function(){e.CHM(r);const t=e.MAs(12);return e.KtG(t.open())}),e.qZA(),e.TgZ(9,"mat-datepicker-toggle",8),e._UZ(10,"div",9),e.qZA(),e._UZ(11,"mat-datepicker",null,10),e.qZA()(),e.TgZ(13,"div",5)(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"End Date"),e.qZA(),e.TgZ(17,"input",11),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedEndDate=t)})("click",function(){e.CHM(r);const t=e.MAs(21);return e.KtG(t.open())}),e.qZA(),e.TgZ(18,"mat-datepicker-toggle",8),e._UZ(19,"div",9),e.qZA(),e._UZ(20,"mat-datepicker",null,12),e.qZA()(),e.TgZ(22,"div",13)(23,"button",14),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.resetDateFilter())}),e._uU(24," Reset "),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.searchSampleCollectedTestDetailForSelectedDate())}),e._uU(26," Search "),e.qZA()()(),e.TgZ(27,"div",16)(28,"div",17)(29,"mat-form-field",18)(30,"mat-label"),e._uU(31,"Search Patient"),e.qZA(),e.TgZ(32,"input",19),e.NdJ("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filteredPatientString=t)})("input",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.filterPatientName(t.target.value))}),e.qZA()()(),e.TgZ(33,"div",20)(34,"mat-radio-group",21),e.NdJ("change",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.changeFilterStatus(t.value))})("ngModelChange",function(t){e.CHM(r);const o=e.oxw();return e.KtG(o.selectedStatus=t)}),e.TgZ(35,"mat-radio-button",22)(36,"div",23),e._uU(37,"All"),e.qZA()(),e.YNc(38,qe,3,6,"mat-radio-button",24),e.qZA()()(),e.TgZ(39,"div",2),e.YNc(40,Qe,49,19,"div",25),e.YNc(41,Ye,2,0,"div",26),e.qZA()()}if(2&s){const r=e.MAs(12),n=e.MAs(21),t=e.oxw();e.xp6(8),e.Q6J("matDatepicker",r)("ngModel",t.selectedStartDate)("max",t.currentDate),e.xp6(1),e.Q6J("for",r),e.xp6(8),e.Q6J("matDatepicker",n)("ngModel",t.selectedEndDate)("max",t.currentDate)("min",t.selectedStartDate),e.xp6(1),e.Q6J("for",n),e.xp6(14),e.Q6J("ngModel",t.filteredPatientString)("disabled",0===t.cloneSampleCollectionTestList.length),e.xp6(2),e.Q6J("ngModel",t.selectedStatus)("disabled",t.filteredPatientString.length>0),e.xp6(4),e.Q6J("ngForOf",t.filterStatus),e.xp6(2),e.Q6J("ngForOf",t.sampleCollectionTestList),e.xp6(1),e.Q6J("ngIf",0===t.sampleCollectionTestList.length)}}function Ve(s,m){1&s&&(e.TgZ(0,"div",1),e._UZ(1,"app-access-denied",44),e.qZA())}const He=[{path:"appointment2",component:V},{path:"reportingdone",component:(()=>{var s;class m{constructor(n,t,o,l,a,d){this.authService=n,this.toastrService=t,this.loader=o,this.masterService=l,this.commonService=a,this.bottomSheet=d,this.completedReportList$=new b.X([]),this.destroySubscription$=new P.t(1),this.currentDate=new Date,this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.filteredPatientString="",this.completedReportList=[],this.cloneCompletedReportList=[],this.createReportData={isDataLoaded:!1,record:{}},this.pathologyReportPrintable=!1,this.radiologyReportPrintable=!1,this.filterStatus=[{id:1,name:"Printed",backgroundColor:"#815ba4",fontColor:"#FFFFFF"}],this.canViewRecord=!0}ngOnInit(){this.getPageAccessDetail().then(n=>{this.pageAccessDetail=n,this.canViewRecord=1==this.pageAccessDetail?.data?.entityIsBillView,this.canViewRecord?(localStorage.setItem("verifyReport",String(n?.data?.entityIsVerified||0)),this.getFlagForVerifyReportPage().then(o=>{const l=o.find(d=>115==d.entityBusinessID).value,a=o.find(d=>116==d.entityBusinessID).value;this.pathologyReportPrintable=!!Number(l),this.radiologyReportPrintable=!!Number(a),this.setCompletedReportList()}).catch(o=>{this.toastrService.show({type:"error",text:o})})):this.loader.hideSpinner()}).catch(n=>{this.toastrService.show({type:"error",text:n})})}getPageAccessDetail(){return new Promise((n,t)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,roleID:this.authService.employeeID,entityBusinessID:5,mode:"W"}},"pageaccessservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(l=>{"200"===l.statusCode||"300"===l.statusCode?(l.responseList=null==l?.responseList?null:l?.responseList[0]?.pageList.find(a=>5===a.pageID)||null,n({data:l.responseList,currentDate:l?.date})):(this.loader.hideSpinner(),t(l.errorMessage))},l=>{this.loader.hideSpinner(),t("Either Internet is not working or facing internal server issue")})})}getFlagForVerifyReportPage(){return new Promise((n,t)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"configurationservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(l=>{"200"===l.statusCode||"300"===l.statusCode?(l.responseList=null==l.responseList?[]:l.responseList,n(l.responseList)):(this.loader.hideSpinner(),t(l.errorMessage))},l=>{this.loader.hideSpinner(),t("Either Internet is not working or some internal server issue")})})}getCompletedReportList(){var n=this;return new Promise((t,o)=>{this.loader.showSpinner("Completed report list on the way!");const l={genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",isReported:1,isSampleCollected:-1,dropDown:!1,fromDate:this.commonService.parseDate(this.selectedStartDate,"yyyy-MM-dd"),toDate:this.commonService.parseDate(this.selectedEndDate,"yyyy-MM-dd")}};this.masterService.requestApiForGeneralMaster(l,"appointmentdetailservice/getAppointmentDetailReferenceEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var a=(0,g.Z)(function*(d){n.loader.hideSpinner(),"200"===d.statusCode||"300"===d.statusCode?(d.responseList=null==d.responseList?[]:yield n.assignPermissionForPatientList(d.responseList[0]),t(d.responseList)):o(d.errorMessage)});return function(d){return a.apply(this,arguments)}}(),a=>{this.loader.hideSpinner(),o("Either Internet is not working or some internal server issue")})})}assignPermissionForPatientList(n){var t=this;return(0,g.Z)(function*(){n=yield t.convertTestListByAppointmentID(n);let o=t.pageAccessDetail?.currentDate||new Date,l=t.pageAccessDetail?.data?.entityDays||10,a=1==t.pageAccessDetail?.data?.entityIsUpdate,d=new Date(o).setDate(new Date(o).getDate()-l),f=new Date(d).toISOString().substring(0,10);return n=yield n.map(D=>{let v=new Date(D?.entityAppointmentDate);return{...D,createdAtInMilliseconds:v.valueOf(),canCreateReport:!!(a&&v.valueOf()>=Date.parse(f))}}).sort((D,v)=>D.createdAtInMilliseconds>v.createdAtInMilliseconds?-1:0)})()}convertTestListByAppointmentID(n){var t=this;return(0,g.Z)(function*(){const o={};yield n.forEach((a,d)=>{o[a.entityAppointmentID]||(o[a.entityAppointmentID]={entityAppointmentID:a.entityAppointmentID,entityBillID:a.entityBillID,entityPatientID:a.patitentID,entityPatientName:a.patitentName,entityPatientDOB:a.dob,entityPatientAge:t.commonService.findValuesOfYearMonthAndDays(a.dob,t.commonService.convertDate(a.effectiveDateFrom)).years,entityPatientGender:a.gender,entityAppointmentDate:t.commonService.convertDate(a.effectiveDateFrom),entityReferralDoctor:a.referralName,entityIsSampleCollected:a.entityIsSampleCollected,entityTestList:[]}),o[a.entityAppointmentID].entityTestList.push({serialNo:d+1,entityID:a.entityID,isProfile:a.isProfile,entityTestID:a.serviceID,entityTestName:a.testName,entityDepartmentID:a.departmentID,entityDepartmentName:a.entityParentBusinessName,entitySubdepartmentID:a.subDepartmentID,entitySubdepartmentName:a.entityBusinessName,entityReportStatus:a.reportStatus,entityEmergency:1===a.isEmergency?"Yes":"No",entityBackgroundColor:t.getCalculatedColorValueForReport("bgcolor",a),entityFontColor:t.getCalculatedColorValueForReport("fontColor",a),classificationType:a.classificationType,sampleCollectedDate:null===a.entitySampleCollectedDate?null:t.commonService.convertDate(a.entitySampleCollectedDate),isExpanded:!1})});const l=[];return Object.keys(o).forEach(function(a){l.push(o[a])}),l})()}getCalculatedColorValueForReport(n,t){let o="#ffffff",l="#000000";return 1===t.isPrinted?(o="#815ba4",l="#ffffff"):(o="#ffffff",l="#000000"),"bgcolor"===n?o:l}setCompletedReportList(){this.getCompletedReportList().then(n=>{this.completedReportList$.next(n),this.completedReportList=this.cloneCompletedReportList=n}).catch(n=>{this.completedReportList$.next([]),this.toastrService.show({type:"error",text:n})})}printReport(n,t,o){this.loader.showSpinner("Printing report "+("withSign"==o?"with digital sign!":"without digital sign!")),1===t.isProfile?(t.entityDepartmentID=null,t.entitySubdepartmentID=null):t.entityTestID=null,this.masterService.requestApiForGeneralMaster({reportSearchDTO:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,checkFlag:"withSign"===o?1:0,serviceID:t.entityTestID,appointmentID:n.entityAppointmentID,departmentID:t.entityDepartmentID,subDepartmentID:t.entitySubdepartmentID,mode:"W"}},"appointmentreportservice/printReport").pipe((0,E.R)(this.destroySubscription$)).subscribe(a=>{if(this.loader.hideSpinner(),"200"===a.statusCode){const d=a.responseList[0][0].impression;t.entityBackgroundColor="#815ba4",t.entityFontColor="#ffffff",window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64,"+encodeURI(d)+"'></iframe> ")}else this.toastrService.show({type:"error",text:a.errorMessage})},a=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}reportingAgain(n,t){ge().fire({title:"Do you want to reporting again?",showCancelButton:!0,confirmButtonText:"Yes, Report again!",cancelButtonText:"No, Close!",icon:"question",width:600}).then(o=>{o.isConfirmed&&(this.loader.showSpinner("Reporting again for test "+t.entityTestName+" !"),this.masterService.requestApiForGeneralMaster({appointmentDetailEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,auditAction:"U",entityAppointmentID:n.entityAppointmentID,departmentID:t.departmentID,serviceID:t.entityTestID,subDepartmentID:t.subDepartmentID,configurationValue:2,configurationKey:"DepartmentID",reportStatus:0,entityIsTransferred:0,entityID:t.entityID,entityIsSampleCollected:1}},"appointmentdetailservice/rereporting").pipe((0,E.R)(this.destroySubscription$)).subscribe(a=>{this.loader.hideSpinner(),"200"===a.statusCode?this.setCompletedReportList():this.toastrService.show({type:"error",text:a.errorMessage})},a=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})}))})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}searchCompletedReportForSelectedDate(){this.setCompletedReportList()}resetDateFilter(){this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.setCompletedReportList()}filterPatientName(n){void 0!==n&&(n=n.toLowerCase());var t=this.cloneCompletedReportList.filter(o=>{if(!n||-1!==o.entityPatientName.toLowerCase().indexOf(n))return o});this.completedReportList=t}reportCreationEvent(n,t){this.bottomSheet.open(q,{data:{item:t,totalItem:n,removeItemIfReportStatusIs:2},hasBackdrop:!1,panelClass:"lms-bottom-sheet-container"}).afterDismissed().subscribe(l=>{null!==l.message&&this.setCompletedReportList()})}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(x.$),e.Y36(O.k),e.Y36(S.D),e.Y36(A.c),e.Y36(Z.v),e.Y36(K.ch))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-report-done"]],decls:3,vars:2,consts:[["class","container-fluid report-completed-container",4,"ngIf"],["class","container-fluid",4,"ngIf"],[1,"container-fluid","report-completed-container"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12"],["childLink","Services","subchildLink","Report Done"],[1,"col-lg-2","col-md-2","col-sm-12","bill-search-parameter"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Start Date","id","start-date-block","readonly","",3,"matDatepicker","ngModel","max","ngModelChange","click"],["matSuffix","",3,"for"],["aria-label","calendar-icon","matDatepickerToggleIcon","",1,"lms-calendar-icon"],["startDatePicker",""],["matInput","","placeholder","End Date","id","end-date-block","readonly","",3,"matDatepicker","ngModel","max","min","ngModelChange","click"],["endDatePicker",""],[1,"col-lg-3","col-md-3","col-sm-12","bill-search-parameter"],["mat-raised-button","","color","warn",1,"warn-action-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-action-btn",3,"click"],[1,"row","rp-filter-container"],[1,"col-sm-12","col-md-3","col-lg-3"],["appearance","outline",1,"rp-search-patient-input"],["matInput","","placeholder","Search Patient","id","rc-tab-11",3,"ngModel","disabled","ngModelChange","input"],[1,"col-sm-12","col-md-9","col-lg-9","rp-type-legend"],[4,"ngFor","ngForOf"],["class","col-12","style","margin-bottom: 16px",3,"hidden",4,"ngFor","ngForOf"],["style","background-color: white",4,"ngIf"],[1,"rp-type-label"],[1,"col-12",2,"margin-bottom","16px",3,"hidden"],[1,"panel-block"],[1,"col-lg-3","col-md-3","col-12"],[1,"patient-detail-block"],[1,"col-lg-9","col-md-9","col-12"],["class","col-lg-4 col-md-6 col-12","style","margin-bottom: 10px",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","col-12",2,"margin-bottom","10px"],[1,"rp-test-item-block"],[2,"display","flex"],["mat-icon-button","","title","More","class","expand-collapse-icon-btn",3,"disableRipple","click",4,"ngIf"],["mat-icon-button","","title","Less","class","expand-collapse-icon-btn",3,"disableRipple","click",4,"ngIf"],[4,"ngIf"],[1,"create-report-btn",3,"click"],["mat-icon-button","","title","More",1,"expand-collapse-icon-btn",3,"disableRipple","click"],["aria-label","expand-more"],["mat-icon-button","","title","Less",1,"expand-collapse-icon-btn",3,"disableRipple","click"],["aria-label","expand-less"],[2,"background-color","white"],["src","assets/images/noitemfound.png",1,"no-item-found"],[1,"container-fluid"],["childLinkLabel","Services","subchildLinkLabel","Report Done"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.YNc(1,Pe,38,14,"div",0),e.YNc(2,Re,2,0,"div",1)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.canViewRecord),e.xp6(1),e.Q6J("ngIf",!t.canViewRecord))},dependencies:[u.sg,u.O5,B.G,C.Fj,C.JJ,C.On,T.lW,T.RK,y.Mq,y.hl,y.nW,y.Q0,U.Nt,M.KE,M.hX,M.R9,k.L,N.A,u.uU],styles:[".report-completed-container[_ngcontent-%COMP%]{height:100%;overflow:auto}.bill-search-parameter[_ngcontent-%COMP%]{margin-top:11px}.warn-action-btn[_ngcontent-%COMP%]{float:right;margin-top:5px}.primary-action-btn[_ngcontent-%COMP%]{float:right;margin-right:10px;margin-top:5px}.rp-filter-container[_ngcontent-%COMP%]{background:white;margin-top:5px}.rp-type-legend[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.rp-type-label[_ngcontent-%COMP%]{height:22px;width:auto;max-width:200px;padding:0 16px;border:1px #9d9d9d solid;text-align:center;border-radius:10px;margin:18px 12px;font-size:12px}.no-item-found[_ngcontent-%COMP%]{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);height:40%}@media (max-width: 766px){.no-item-found[_ngcontent-%COMP%]{top:75%;width:60%;height:25%}}.rp-search-patient-input[_ngcontent-%COMP%]{width:100%}.rc-disable-div-block[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.panel-block[_ngcontent-%COMP%]{height:100%;border-radius:30px;box-shadow:0 2px 20px #0000000f;border:solid 1px #909090;padding:20px}.panel-block[_ngcontent-%COMP%]:hover{box-shadow:0 2px 20px #0003;transform:scale(.99);transition:.2s}.block-header[_ngcontent-%COMP%]{text-align:center}.patient-detail-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.rp-test-item-block[_ngcontent-%COMP%]{height:100%;max-height:360px;border:1px black solid;margin:4px;align-items:center;border-radius:20px;text-align:center;padding:10px 10px 0;box-shadow:0 2px 20px #0003;display:flex;flex-direction:column;justify-content:space-around;overflow:hidden}.create-report-btn[_ngcontent-%COMP%]{background-color:#3f51b5;border-radius:30px;color:#fff;height:30px;border:0;width:100%;margin-right:5vw;margin-bottom:6px}@media (max-width: 766px){.create-report-btn[_ngcontent-%COMP%]{margin-right:10vw}}.expand-collapse-icon-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:8px}"]}),m})()},{path:"reportingpending",component:(()=>{var s;class m{constructor(n,t,o,l,a,d){this.authService=n,this.toastrService=t,this.loader=o,this.masterService=l,this.commonService=a,this.bottomSheet=d,this.pendingReportList$=new b.X([]),this.destroySubscription$=new P.t(1),this.currentDate=new Date,this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.filteredPatientString="",this.pendingReportList=[],this.clonePendingReportList=[],this.createReportData={isDataLoaded:!1,record:{}},this.filterStatus=[{id:1,name:"New",backgroundColor:"#ffffff",fontColor:"#000000"},{id:2,name:"Read",backgroundColor:"#add8e6",fontColor:"#371d1d"},{id:3,name:"Emergency",backgroundColor:"#f44336",fontColor:"#ffffff"}],this.canViewRecord=!0}ngOnInit(){this.getPageAccessDetail().then(n=>{this.pageAccessDetail=n,this.canViewRecord=1==this.pageAccessDetail?.data?.entityIsBillView,this.canViewRecord?(localStorage.setItem("verifyReport",String(n?.data?.entityIsVerified||0)),this.setPendingReportList()):this.loader.hideSpinner()}).catch(n=>{this.toastrService.show({type:"error",text:n})})}getPageAccessDetail(){return new Promise((n,t)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,roleID:this.authService.employeeID,entityBusinessID:6,mode:"W"}},"pageaccessservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(l=>{"200"===l.statusCode||"300"===l.statusCode?(l.responseList=null==l?.responseList?null:l?.responseList[0]?.pageList.find(a=>6===a.pageID)||null,n({data:l.responseList,currentDate:l?.date})):(this.loader.hideSpinner(),t(l.errorMessage))},l=>{this.loader.hideSpinner(),t("Either Internet is not working or facing internal server issue")})})}getPendingReportList(){var n=this;return new Promise((t,o)=>{this.loader.showSpinner("Pending report list on the way!");const l={genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",isReported:0,isSampleCollected:1,dropDown:!1,fromDate:this.commonService.parseDate(this.selectedStartDate,"yyyy-MM-dd"),toDate:this.commonService.parseDate(this.selectedEndDate,"yyyy-MM-dd")}};this.masterService.requestApiForGeneralMaster(l,"appointmentdetailservice/getAppointmentDetailReferenceEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var a=(0,g.Z)(function*(d){n.loader.hideSpinner(),"200"===d.statusCode||"300"===d.statusCode?(d.responseList=null==d.responseList?[]:yield n.assignPermissionForPatientList(d.responseList[0]),t(d.responseList)):o(d.errorMessage)});return function(d){return a.apply(this,arguments)}}(),a=>{this.loader.hideSpinner(),o("Either Internet is not working or some internal server issue")})})}assignPermissionForPatientList(n){var t=this;return(0,g.Z)(function*(){n=yield t.convertTestListByAppointmentID(n);let o=t.pageAccessDetail?.currentDate||new Date,l=t.pageAccessDetail?.data?.entityDays||10,a=1==t.pageAccessDetail?.data?.entityIsUpdate,d=new Date(o).setDate(new Date(o).getDate()-l),f=new Date(d).toISOString().substring(0,10);return n=yield n.map(D=>{let v=new Date(D?.entityAppointmentDate);return{...D,createdAtInMilliseconds:v.valueOf(),canCreateReport:!!(a&&v.valueOf()>=Date.parse(f))}}).sort((D,v)=>D.createdAtInMilliseconds>v.createdAtInMilliseconds?-1:0).sort((D,v)=>D.isEmergency>v.isEmergency?-1:0)})()}convertTestListByAppointmentID(n){var t=this;return(0,g.Z)(function*(){const o={};yield n.forEach((a,d)=>{o[a.entityAppointmentID]||(o[a.entityAppointmentID]={entityAppointmentID:a.entityAppointmentID,entityBillID:a.entityBillID,entityPatientID:a.patitentID,entityPatientName:a.patitentName,entityPatientDOB:a.dob,entityPatientAge:t.commonService.findValuesOfYearMonthAndDays(a.dob,t.commonService.convertDate(a.effectiveDateFrom)).years,entityPatientGender:a.gender,entityAppointmentDate:t.commonService.convertDate(a.effectiveDateFrom),entityReferralDoctor:a.referralName,entityIsSampleCollected:a.entityIsSampleCollected,isEmergency:a.isEmergency,entityTestList:[]}),o[a.entityAppointmentID].entityTestList.push({serialNo:d+1,entityID:a.entityID,entityTestID:a.serviceID,entityTestName:a.testName,entityDepartmentID:a.departmentID,entityDepartmentName:a.entityParentBusinessName,entitySubdepartmentID:a.subDepartmentID,entitySubdepartmentName:a.entityBusinessName,entityReportStatus:a.reportStatus,entityEmergency:1===a.isEmergency?"Yes":"No",entityBackgroundColor:t.getCalculatedColorValueForReport("bgcolor",a),entityFontColor:t.getCalculatedColorValueForReport("fontColor",a),classificationType:a.classificationType,sampleCollectedDate:t.commonService.convertDate(a.entitySampleCollectedDate),isExpanded:!1})});const l=[];return Object.keys(o).forEach(function(a){l.push(o[a])}),l})()}getCalculatedColorValueForReport(n,t){let o="#ffffff",l="#000000";return 1===t.isEmergency?(o="#f44336",l="#ffffff"):2===t.reportStatus?(o="#add8e6",l="#371d1d"):(o="#ffffff",l="#000000"),"bgcolor"===n?o:l}setPendingReportList(){this.getPendingReportList().then(n=>{this.pendingReportList$.next(n),this.pendingReportList=this.clonePendingReportList=n}).catch(n=>{this.pendingReportList$.next([]),this.toastrService.show({type:"error",text:n})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}searchPendingReportForSelectedDate(){this.setPendingReportList()}resetDateFilter(){this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.setPendingReportList()}filterPatientName(n){void 0!==n&&(n=n.toLowerCase());var t=this.clonePendingReportList.filter(o=>{if(!n||-1!==o.entityPatientName.toLowerCase().indexOf(n))return o});this.pendingReportList=t}reportCreationEvent(n,t){this.bottomSheet.open(q,{data:{item:t,totalItem:n,removeItemIfReportStatusIs:1},hasBackdrop:!1,panelClass:"lms-bottom-sheet-container"}).afterDismissed().subscribe(l=>{null!==l.message&&this.setPendingReportList()})}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(x.$),e.Y36(O.k),e.Y36(S.D),e.Y36(A.c),e.Y36(Z.v),e.Y36(K.ch))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-report-pending"]],decls:3,vars:2,consts:[["class","container-fluid report-pending-container",4,"ngIf"],["class","container-fluid",4,"ngIf"],[1,"container-fluid","report-pending-container"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12"],["childLink","Services","subchildLink","Report Pending"],[1,"col-lg-2","col-md-2","col-sm-12","bill-search-parameter"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Start Date","id","start-date-block","readonly","",3,"matDatepicker","ngModel","max","ngModelChange","click"],["matSuffix","",3,"for"],["aria-label","calendar-icon","matDatepickerToggleIcon","",1,"lms-calendar-icon"],["startDatePicker",""],["matInput","","placeholder","End Date","id","end-date-block","readonly","",3,"matDatepicker","ngModel","max","min","ngModelChange","click"],["endDatePicker",""],[1,"col-lg-3","col-md-3","col-sm-12","bill-search-parameter"],["mat-raised-button","","color","warn",1,"warn-action-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-action-btn",3,"click"],[1,"row","rp-filter-container"],[1,"col-sm-12","col-md-3","col-lg-3"],["appearance","outline",1,"rp-search-patient-input"],["matInput","","placeholder","Search Patient","id","rc-tab-11",3,"ngModel","disabled","ngModelChange","input"],[1,"col-sm-12","col-md-9","col-lg-9","rp-type-legend"],[4,"ngFor","ngForOf"],["class","col-12","style","margin-bottom: 16px",3,"hidden",4,"ngFor","ngForOf"],["style","background-color: white",4,"ngIf"],[1,"rp-type-label"],[1,"col-12",2,"margin-bottom","16px",3,"hidden"],[1,"panel-block"],[1,"col-lg-3","col-md-3","col-12"],[1,"patient-detail-block"],[1,"col-lg-9","col-md-9","col-12"],["class","col-lg-4 col-md-6 col-12","style","margin-bottom: 10px",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","col-12",2,"margin-bottom","10px"],[1,"rp-test-item-block"],[2,"display","flex"],["mat-icon-button","","title","More","class","expand-collapse-icon-btn",3,"disableRipple","click",4,"ngIf"],["mat-icon-button","","title","Less","class","expand-collapse-icon-btn",3,"disableRipple","click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","title","More",1,"expand-collapse-icon-btn",3,"disableRipple","click"],["aria-label","expand-more"],["mat-icon-button","","title","Less",1,"expand-collapse-icon-btn",3,"disableRipple","click"],["aria-label","expand-less"],[1,"create-report-btn",3,"click"],[2,"background-color","white"],["src","assets/images/noitemfound.png",1,"no-item-found"],[1,"container-fluid"],["childLinkLabel","Services","subchildLinkLabel","Report Pending"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.YNc(1,Ke,38,14,"div",0),e.YNc(2,We,2,0,"div",1)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.canViewRecord),e.xp6(1),e.Q6J("ngIf",!t.canViewRecord))},dependencies:[u.sg,u.O5,B.G,C.Fj,C.JJ,C.On,T.lW,T.RK,y.Mq,y.hl,y.nW,y.Q0,U.Nt,M.KE,M.hX,M.R9,k.L,N.A,u.uU],styles:[".report-pending-container[_ngcontent-%COMP%]{height:100%;overflow:auto}.bill-search-parameter[_ngcontent-%COMP%]{margin-top:11px}.warn-action-btn[_ngcontent-%COMP%]{float:right;margin-top:5px}.primary-action-btn[_ngcontent-%COMP%]{float:right;margin-right:10px;margin-top:5px}.rp-filter-container[_ngcontent-%COMP%]{background:white;margin-top:5px}.rp-type-legend[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.rp-type-label[_ngcontent-%COMP%]{height:22px;width:auto;max-width:200px;padding:0 16px;border:1px #9d9d9d solid;text-align:center;border-radius:10px;margin:18px 12px;font-size:12px}.no-item-found[_ngcontent-%COMP%]{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);height:40%}@media (max-width: 766px){.no-item-found[_ngcontent-%COMP%]{top:75%;width:60%;height:25%}}.rp-search-patient-input[_ngcontent-%COMP%]{width:100%}.rc-disable-div-block[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.panel-block[_ngcontent-%COMP%]{height:100%;border-radius:30px;box-shadow:0 2px 20px #0000000f;border:solid 1px #909090;padding:20px}.panel-block[_ngcontent-%COMP%]:hover{box-shadow:0 2px 20px #0003;transform:scale(.99);transition:.2s}.block-header[_ngcontent-%COMP%]{text-align:center}.patient-detail-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.rp-test-item-block[_ngcontent-%COMP%]{height:100%;max-height:360px;border:1px black solid;margin:4px;align-items:center;border-radius:20px;text-align:center;padding:10px 10px 0;box-shadow:0 2px 20px #0003;display:flex;flex-direction:column;justify-content:space-around;overflow:hidden}.create-report-btn[_ngcontent-%COMP%]{background-color:#3f51b5;border-radius:30px;color:#fff;height:30px;border:0;width:100%;margin-right:5vw;margin-bottom:6px}@media (max-width: 766px){.create-report-btn[_ngcontent-%COMP%]{margin-right:10vw}}.expand-collapse-icon-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:8px}"]}),m})()},{path:"appointment",component:(()=>{var s;class m{constructor(n,t,o,l,a){this.authService=n,this.toastrService=t,this.loader=o,this.masterService=l,this.commonService=a,this.testServiceForCollectionList$=new b.X([]),this.destroySubscription$=new P.t(1),this.currentDate=new Date,this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.filteredPatientString="",this.sampleCollectionTestList=[],this.cloneSampleCollectionTestList=[],this.selectedStatus="All",this.filterStatus=[{id:1,name:"New",backgroundColor:"#ffffff",fontColor:"#000000"},{id:2,name:"Sample Collected",backgroundColor:"#ffc0c0",fontColor:"#371d1d"},{id:3,name:"Read",backgroundColor:"#add8e6",fontColor:"#371d1d"},{id:4,name:"Reported",backgroundColor:"#90ee90",fontColor:"#2d0505"},{id:5,name:"Emergency",backgroundColor:"#f44336",fontColor:"#ffffff"}],this.canViewRecord=!0}ngOnInit(){this.getPageAccessDetail().then(n=>{this.pageAccessDetail=n,this.canViewRecord=1==this.pageAccessDetail?.data?.entityIsBillView,this.canViewRecord?this.setSampleCollectedTestDetailsList():this.loader.hideSpinner()}).catch(n=>{this.toastrService.show({type:"error",text:n})})}getPageAccessDetail(){return new Promise((n,t)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,roleID:this.authService.employeeID,entityBusinessID:4,mode:"W"}},"pageaccessservice/getAllEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(l=>{"200"===l.statusCode||"300"===l.statusCode?(l.responseList=null==l?.responseList?null:l?.responseList[0]?.pageList.find(a=>4===a.pageID)||null,n({data:l.responseList,currentDate:l?.date})):(this.loader.hideSpinner(),t(l.errorMessage))},l=>{this.loader.hideSpinner(),t("Either Internet is not working or facing internal server issue")})})}getSampleCollectedTestDetailsList(){var n=this;return new Promise((t,o)=>{this.loader.showSpinner("Appointed patient's test list on the way!");const l={genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",isReported:0,isSampleCollected:0,dropDown:!1,fromDate:this.commonService.parseDate(this.selectedStartDate,"yyyy-MM-dd"),toDate:this.commonService.parseDate(this.selectedEndDate,"yyyy-MM-dd")}};this.masterService.requestApiForGeneralMaster(l,"appointmentdetailservice/getAppointmentDetailReferenceEntity").pipe((0,E.R)(this.destroySubscription$)).subscribe(function(){var a=(0,g.Z)(function*(d){n.loader.hideSpinner(),"200"===d.statusCode||"300"===d.statusCode?(d.responseList=null==d.responseList?[]:yield n.assignPermissionForPatientList(d.responseList[0]),t(d.responseList)):o(d.errorMessage)});return function(d){return a.apply(this,arguments)}}(),a=>{this.loader.hideSpinner(),o("Either Internet is not working or some internal server issue")})})}assignPermissionForPatientList(n){var t=this;return(0,g.Z)(function*(){n=yield t.convertTestListByAppointmentID(n);let o=t.pageAccessDetail?.currentDate||new Date,l=t.pageAccessDetail?.data?.entityDays||10,a=1==t.pageAccessDetail?.data?.entityIsUpdate,d=new Date(o).setDate(new Date(o).getDate()-l),f=new Date(d).toISOString().substring(0,10);return n=yield n.map(D=>{let v=new Date(D?.entityAppointmentDate);return{...D,createdAtInMilliseconds:v.valueOf(),canCollectSample:!!(a&&v.valueOf()>=Date.parse(f)),emergencyFlag:"Yes"===D.entityEmergency?1:0}}).sort((D,v)=>D.createdAtInMilliseconds>v.createdAtInMilliseconds?-1:0).sort((D,v)=>D.emergencyFlag>v.emergencyFlag?-1:0)})()}convertTestListByAppointmentID(n){var t=this;return(0,g.Z)(function*(){const o={};yield n.forEach(a=>{o[a.entityAppointmentID]||(o[a.entityAppointmentID]={entityAppointmentID:a.entityAppointmentID,entityBillID:a.entityBillID,entityPatientID:a.patitentID,entityPatientName:a.patitentName,entityPatientAge:t.commonService.findValuesOfYearMonthAndDays(a.dob,t.commonService.convertDate(a.effectiveDateFrom)).years,entityPatientGender:a.gender,entityAppointmentDate:t.commonService.convertDate(a.effectiveDateFrom),entityReferralDoctor:a.referralName,reportStatus:a.reportStatus,entityReportStatus:t.getCalculatedStatusValueForReport(a),entityEmergency:1===a.isEmergency?"Yes":"No",entityBackgroundColor:t.getCalculatedColorValueForReport("bgcolor",a),entityFontColor:t.getCalculatedColorValueForReport("fontColor",a),entityIsSampleCollected:a.entityIsSampleCollected,entityTestList:[]}),o[a.entityAppointmentID].entityTestList.push({entityTestID:a.serviceID,entityTestName:a.testName,entityDepartmentID:a.departmentID,entityDepartmentName:a.entityParentBusinessName,entitySubdepartmentID:a.subDepartmentID,entitySubdepartmentName:a.entityBusinessName})});const l=[];return Object.keys(o).forEach(function(a){l.push(o[a])}),l})()}getCalculatedStatusValueForReport(n){let t="New";return t=0===n.entityIsSampleCollected&&0===n.reportStatus?"New":1===n.entityIsSampleCollected&&0===n.reportStatus?"Sample Collected":1===n.reportStatus?"Reported":2===n.reportStatus?"Read":"New",t}getCalculatedColorValueForReport(n,t){let o="#ffffff",l="#000000";return 1===t.entityIsSampleCollected&&0===t.reportStatus?(o="#ffc0c0",l="#371d1d"):1===t.reportStatus?(o="#90ee90",l="#2d0505"):2===t.reportStatus?(o="#add8e6",l="#371d1d"):1===t.isEmergency?(o="#f44336",l="#ffffff"):(o="#ffffff",l="#000000"),"bgcolor"===n?o:l}setSampleCollectedTestDetailsList(){this.getSampleCollectedTestDetailsList().then(n=>{this.testServiceForCollectionList$.next(n),this.changeFilterStatus(this.selectedStatus)}).catch(n=>{this.testServiceForCollectionList$.next([]),this.toastrService.show({type:"error",text:n})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}searchSampleCollectedTestDetailForSelectedDate(){this.setSampleCollectedTestDetailsList()}resetDateFilter(){this.selectedStartDate=new Date,this.selectedEndDate=new Date,this.selectedStatus="All",this.setSampleCollectedTestDetailsList()}filterPatientName(n){void 0!==n&&(n=n.toLowerCase());var t=this.cloneSampleCollectionTestList.filter(o=>{if(!n||-1!==o.entityPatientName.toLowerCase().indexOf(n))return o});this.sampleCollectionTestList=t}changeFilterStatus(n){const t=this.testServiceForCollectionList$.getValue();switch(n){case"All":default:this.sampleCollectionTestList=t;break;case"New":case"Sample Collected":case"Read":case"Reported":this.sampleCollectionTestList=t.filter(o=>o.entityReportStatus===n);break;case"Emergency":this.sampleCollectionTestList=t.filter(o=>"Yes"===o.entityEmergency)}this.cloneSampleCollectionTestList=this.sampleCollectionTestList}sampleCollectingEvent(n){this.loader.showSpinner("Collecting test sample..."),this.masterService.requestApiForGeneralMaster({appointmentDetailEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,configurationKey:"DepartmentID",configurationValue:2,entityAppointmentID:n.entityAppointmentID,entityIsSampleCollected:1,entityIsTransferred:0,entityReportStatus:0,mode:"W",classificationType:1}},"appointmentdetailservice/collectSample").pipe((0,E.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode?this.setSampleCollectedTestDetailsList():this.toastrService.show({type:"error",text:o.errorMessage})},o=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}resetSampleCollection(n){this.loader.showSpinner("Cancelling sample collection..."),this.masterService.requestApiForGeneralMaster({appointmentDetailEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,configurationKey:"DepartmentID",configurationValue:2,entityAppointmentID:n.entityAppointmentID,entityIsSampleCollected:0,entityIsTransferred:0,entityReportStatus:0,mode:"W",classificationType:1}},"appointmentdetailservice/resetcollectSample").pipe((0,E.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode?this.setSampleCollectedTestDetailsList():this.toastrService.show({type:"error",text:o.errorMessage})},o=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}}return(s=m).\u0275fac=function(n){return new(n||s)(e.Y36(x.$),e.Y36(O.k),e.Y36(S.D),e.Y36(A.c),e.Y36(Z.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-sample-collection"]],decls:3,vars:2,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12"],["childLink","Services","subchildLink","Sample Collection"],[1,"col-lg-2","col-md-2","col-sm-12","bill-search-parameter"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Start Date","id","start-date-block","readonly","",3,"matDatepicker","ngModel","max","ngModelChange","click"],["matSuffix","",3,"for"],["aria-label","calendar-icon","matDatepickerToggleIcon","",1,"lms-calendar-icon"],["startDatePicker",""],["matInput","","placeholder","End Date","id","end-date-block","readonly","",3,"matDatepicker","ngModel","max","min","ngModelChange","click"],["endDatePicker",""],[1,"col-lg-3","col-md-3","col-sm-12","bill-search-parameter"],["mat-raised-button","","color","warn",1,"warn-action-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-action-btn",3,"click"],[1,"row","sc-filter-container"],[1,"col-sm-12","col-md-3","col-lg-3"],["appearance","outline",1,"sc-search-patient-input"],["matInput","","placeholder","Search Patient","id","rc-tab-11",3,"ngModel","disabled","ngModelChange","input"],[1,"col-sm-12","col-md-9","col-lg-9"],["aria-label","Select an option",1,"sc-radio-group",3,"ngModel","disabled","change","ngModelChange"],["color","primary","value","All",1,"sc-radio-button"],[1,"sc-radio-label","sc-radio-all-label"],["color","primary","class","sc-radio-button",3,"value",4,"ngFor","ngForOf"],["class","col-12","style","margin-bottom: 16px",3,"hidden",4,"ngFor","ngForOf"],["style","background-color: white",4,"ngIf"],["color","primary",1,"sc-radio-button",3,"value"],[1,"sc-radio-label"],[1,"col-12",2,"margin-bottom","16px",3,"hidden"],[1,"panel-block"],[1,"col-lg-3","col-md-3","col-12"],[1,"patient-detail-block"],[4,"ngIf"],[1,"col-lg-9","col-md-9","col-12"],["class","col-lg-3 col-md-4 col-6","style","margin-bottom: 10px",4,"ngFor","ngForOf"],["class","collect-sample-btn",3,"click",4,"ngIf"],["class","cancel-collect-sample-btn",3,"click",4,"ngIf"],[1,"collect-sample-btn",3,"click"],[1,"cancel-collect-sample-btn",3,"click"],[1,"col-lg-3","col-md-4","col-6",2,"margin-bottom","10px"],[1,"test-item-block"],[2,"background-color","white"],["src","assets/images/noitemfound.png",1,"no-item-found"],["childLinkLabel","Services","subchildLinkLabel","Sample Collection"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.YNc(1,je,42,16,"div",0),e.YNc(2,Ve,2,0,"div",0)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.canViewRecord),e.xp6(1),e.Q6J("ngIf",!t.canViewRecord))},dependencies:[u.sg,u.O5,B.G,C.Fj,C.JJ,C.On,T.lW,y.Mq,y.hl,y.nW,y.Q0,U.Nt,M.KE,M.hX,M.R9,W.VQ,W.U0,k.L,N.A,u.uU],styles:[".search-patient-container[_ngcontent-%COMP%]{display:flow-root;margin-top:-10px;margin-left:10px;margin-right:30px}.bill-search-parameter[_ngcontent-%COMP%]{margin-top:11px}.warn-action-btn[_ngcontent-%COMP%]{float:right;margin-top:5px}.primary-action-btn[_ngcontent-%COMP%]{float:right;margin-right:10px;margin-top:5px}.sc-filter-container[_ngcontent-%COMP%]{background:white;margin-top:5px}.sc-radio-group[_ngcontent-%COMP%]{float:right}.sc-radio-button[_ngcontent-%COMP%]{margin:18px 10px 0}@media (max-width: 766px){.sc-radio-button[_ngcontent-%COMP%]{margin:6px 4px}}.sc-radio-label[_ngcontent-%COMP%]{height:22px;width:auto;max-width:200px;padding:0 12px;border:1px #9d9d9d solid;text-align:center;border-radius:10px}.sc-radio-all-label[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgb(255,192,192) 0%,rgb(173,216,230) 30%,rgb(144,238,144) 60%,rgb(244,67,54) 100%);color:#3d3d3d}.no-item-found[_ngcontent-%COMP%]{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);height:40%}@media (max-width: 766px){.no-item-found[_ngcontent-%COMP%]{top:75%;width:60%;height:25%}}.sc-search-patient-input[_ngcontent-%COMP%]{width:100%}.rc-disable-div-block[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.panel-block[_ngcontent-%COMP%]{height:100%;border-radius:30px;box-shadow:0 2px 20px #0000000f;border:solid 1px #909090;padding:20px}.panel-block[_ngcontent-%COMP%]:hover{box-shadow:0 2px 20px #0003;transform:scale(.99);transition:.2s}.block-header[_ngcontent-%COMP%]{text-align:center}.patient-detail-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.test-item-block[_ngcontent-%COMP%]{justify-content:center;height:100%;max-height:360px;border:1px black solid;margin:4px;align-items:center;border-radius:20px;text-align:center;padding:10px 10px 0;box-shadow:0 2px 20px #0003}.collect-sample-btn[_ngcontent-%COMP%]{width:calc(100% - 20px);margin:5px 10px;background-color:#3f51b5;border-radius:30px;color:#fff;height:30px;border:0}.cancel-collect-sample-btn[_ngcontent-%COMP%]{width:calc(100% - 20px);margin:5px 10px;background-color:#f44336;border-radius:30px;color:#fff;height:30px;border:0}"]}),m})()},{path:"",pathMatch:"full",redirectTo:"appointment2"}];let ze=(()=>{var s;class m{}return(s=m).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.Bz.forChild(He),h.Bz]}),m})();var Xe=_(6611),F=_(9820);let et=(()=>{var s;class m{}return(s=m).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.ez,F.m,Xe.q,F.m,C.u5,C.UX,ze]}),m})()}}]);