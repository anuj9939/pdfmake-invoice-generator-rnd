"use strict";(self.webpackChunklms_web_app=self.webpackChunklms_web_app||[]).push([[572],{1572:(We,q,p)=>{p.r(q),p.d(q,{AdministrationModule:()=>Ve});var m=p(6814),O=p(1896),R=p(8),h=p(5619),S=p(7328),I=p(8645),d=p(9773),e=p(5879),f=p(9250),y=p(8586),b=p(3493),D=p(7270),_=p(8394),v=p(2242),w=p(2296),g=p(5195),E=p(2599),C=p(3424);let z=(()=>{var r;class l{constructor(t,i,n,o,s){this.loader=t,this.authService=i,this.masterService=n,this.exportService=o,this.toastrService=s,this.configurationMasterList$=new h.X([]),this.destroySubscription$=new S.t(1),this.inlineEditFlag=!0,this.showLogCheckedFlag=!1,this.gridOptions=new R.s8,this.changeDetection=new I.x,this.disableToggleFlag=!1}ngOnInit(){this.getConfigurationMasterList(!1).then(t=>{this.configurationMasterList$.next(t)}).catch(t=>{this.configurationMasterList$.next([]),this.toastrService.show({type:"error",text:t})}),this.gridOptions={searchPlaceholder:"Search By Name",pageSize:this.authService.pageSize,dateFormat:"yyyy-MM-dd",keyCodeForNextCell:13,showInlineEdit:this.inlineEditFlag,titleForMobileView:"entityBusinessName",pageSizeArray:[5,10,20],showDeleteButton:!1,showAddButton:!1,showEditButton:!0,showActivateDeactivateButton:!1,showSearchInput:!0,activateDeactivateCondition:{conditionalProperty:"activeFlag",valueForActivation:"1",valueForDeactivation:"0"},columns:[{name:"entityBusinessName",label:"Configuration Name",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!1,isRequired:!0,shouldBeUnique:!0,min:1,max:100,pattern:"[A-Za-z ]*",columnPlaceholder:"Name",requiredLabel:"Please enter name",patternLabel:"Please match the requested format."},{name:"value",label:"Value",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:20,pattern:"[^]*",columnPlaceholder:"Value",requiredLabel:"Please enter Value",patternLabel:"Please match the requested format."},{name:"sms",label:"SMS",enable:!0,searchable:!1,sortable:!1,type:"boolean",editable:!0,isRequired:!1},{name:"mail",label:"Mail",enable:!0,searchable:!1,sortable:!1,type:"boolean",editable:!0,isRequired:!1},{name:"notificationFlag",label:"Notification Flag",enable:!0,searchable:!1,sortable:!1,type:"boolean",editable:!0,isRequired:!1},{name:"createdByUser",label:"Last Updated By",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"effectiveDateFrom",label:"Last Modified on",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"activeFlag",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityBusinessID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1}]}}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getConfigurationMasterList(t){return new Promise((i,n)=>{this.loader.showSpinner("Configuration Master list on the way."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:t,dropDown:!1}},"configurationservice/getAllEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList.reverse(),i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or some internal server issue")})})}exportData(t){const i=[{property:"entityBusinessName",label:"Configuration Name"},{property:"value",label:"Value"},{property:"sms",label:"SMS"},{property:"mail",label:"Mail"},{property:"notificationFlag",label:"Notification Flag"},{property:"createdByUser",label:"Last Updated By"},{property:"effectiveDateFrom",label:"Last Modified on"}];this.showLogCheckedFlag&&i.push({property:"auditAction",label:"Audit Action"}),this.exportService.generateFile(this.configurationMasterList$.getValue(),"Configuration Master List."+t,i)}showLog(t){this.configurationMasterList$.next([]),t?this.getConfigurationMasterList(!0).then(i=>{this.showLogCheckedFlag=!0,this.configurationMasterList$.next(i),this.gridOptions.showAddButton=!1,this.gridOptions.showEditButton=!1,this.gridOptions.showActivateDeactivateButton=!1,this.gridOptions.columns.push({name:"auditAction",label:"Audit Action",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1})}).catch(i=>{this.configurationMasterList$.next([]),this.toastrService.show({type:"error",text:i})}):(this.showLogCheckedFlag=!1,this.ngOnInit())}actionButtonClickEvent(t,i){switch(i){case"update":this.disableToggleFlag=!0;break;case"cancel":this.disableToggleFlag=!1}}updateConfigurationMaster(t){const i={configurationEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,value:t.value,entityBusinessName:t.entityBusinessName,entityBusinessShortCode:t.entityBusinessShortCode,sms:Number(t.sms),notificationFlag:Number(t.notificationFlag),mail:Number(t.mail),auditAction:"U",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}};this.masterService.requestActionRestAPI(t,i,"configurationservice/updateEntity","Updating ").then(n=>{this.changeDetection.next({originalObject:t,modifiedObject:n}),this.toastrService.show({type:"success",text:t.entityBusinessName+" Updated!"}),this.disableToggleFlag=!1}).catch(n=>{this.changeDetection.next({originalObject:t,modifiedObject:void 0}),this.toastrService.show({type:"error",text:n})})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(D.u),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-configuration-master"]],decls:14,vars:4,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Configuration Master"],[1,"mat-elevation-z12","lms-master-card"],[1,"lms-matcardtitlegroup"],["mat-icon-button","",3,"disableRipple","click"],["aria-label","excel",1,"lms-excel-icon"],["aria-label","csv",1,"lms-csv-icon"],[1,"remaining-space"],["color","primary",1,"lms-matslidetoggle",3,"checked","disabled","change"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",1)(5,"mat-card",3)(6,"mat-card-title-group",4)(7,"button",5),e.NdJ("click",function(){return i.exportData("xlsx")}),e._UZ(8,"div",6),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.exportData("csv")}),e._UZ(10,"div",7),e.qZA(),e._UZ(11,"span",8),e.TgZ(12,"mat-slide-toggle",9),e.NdJ("change",function(o){return i.showLog(o.checked)}),e._uU(13," Show Logs "),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("checked",i.showLogCheckedFlag)("disabled",i.disableToggleFlag))},dependencies:[v.G,w.RK,g.a8,g.C1,E.Rr,C.L]}),l})(),K=(()=>{var r;class l{constructor(t,i,n,o,s){this.loader=t,this.authService=i,this.masterService=n,this.exportService=o,this.toastrService=s,this.emailSetupList$=new h.X([]),this.destroySubscription$=new S.t(1),this.inlineEditFlag=!0,this.showLogCheckedFlag=!1,this.gridOptions=new R.s8,this.changeDetection=new I.x,this.disableToggleFlag=!1}ngOnInit(){this.getEmailSetupList(!1).then(t=>{this.emailSetupList$.next(t)}).catch(t=>{this.emailSetupList$.next([]),this.toastrService.show({type:"error",text:t})}),this.gridOptions={searchPlaceholder:"Search Login name or Display Name",pageSize:this.authService.pageSize,dateFormat:"yyyy-MM-dd",keyCodeForNextCell:13,showInlineEdit:this.inlineEditFlag,titleForMobileView:"entityBusinessName",pageSizeArray:[5,10,20],showDeleteButton:!1,showAddButton:!1,showEditButton:!0,showActivateDeactivateButton:!0,showSearchInput:!1,activateDeactivateCondition:{conditionalProperty:"activeFlag",valueForActivation:"1",valueForDeactivation:"0"},columns:[{name:"entityBusinessName",label:"Login Name",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!0,min:1,max:100,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",columnPlaceholder:"Login Name",requiredLabel:"Please enter login name",patternLabel:"Please enter valid email"},{name:"entityPassword",label:"Password",enable:!0,searchable:!1,sortable:!1,type:"password",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:30,pattern:"[^]*",columnPlaceholder:"Password",requiredLabel:"Please enter password",patternLabel:"Please match the requested format."},{name:"entityOutgoingServer",label:"Outgoing Server",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[^]*",columnPlaceholder:"Outgoing Server",requiredLabel:"Please enter outgoing server",patternLabel:"Please match the requested format."},{name:"entityPort",label:"SMTP Port",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:5,pattern:"[^]*",columnPlaceholder:"SMTP Port",requiredLabel:"Please enter SMTP Port",patternLabel:"Please match the requested format."},{name:"entityDisplayName",label:"Display Name",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[^]*",columnPlaceholder:"Display Name",requiredLabel:"Please enter Display Name",patternLabel:"Please match the requested format."},{name:"entityMailFrom",label:"Mail From",enable:!0,searchable:!1,sortable:!0,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",columnPlaceholder:"Mail From",requiredLabel:"Please enter source mail",patternLabel:"Please enter valid email"},{name:"createdByUser",label:"Last Updated By",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"effectiveDateFrom",label:"Last Modified on",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"activeFlag",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityBusinessID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1}]}}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getEmailSetupList(t){return new Promise((i,n)=>{this.loader.showSpinner("Email Setup list on the way."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:t,dropDown:!1}},"emailsetupservice/getAllEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or some internal server issue")})})}openUpdateEmailSetupForm(t){this.actionButtonClickEvent(null,"update");let i=this.gridOptions.columns.find(n=>"entityPassword"===n.name);i.editable=!1,i.isRequired=!1}showLog(t){this.emailSetupList$.next([]),t?this.getEmailSetupList(!0).then(i=>{this.showLogCheckedFlag=!0,this.emailSetupList$.next(i),this.gridOptions.showAddButton=!1,this.gridOptions.showEditButton=!1,this.gridOptions.showActivateDeactivateButton=!1,this.gridOptions.columns.push({name:"auditAction",label:"Audit Action",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1})}).catch(i=>{this.emailSetupList$.next([]),this.toastrService.show({type:"error",text:i})}):(this.showLogCheckedFlag=!1,this.ngOnInit())}updateEmailSetup(t){this.masterService.requestActionRestAPI(t,{emailEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,entityBusinessName:t.entityBusinessName,entityPassword:t.entityPassword,entityOutgoingServer:t.entityOutgoingServer,entityPort:t.entityPort,entityDisplayName:t.entityDisplayName,entityMailFrom:t.entityMailFrom,auditAction:"U",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"emailsetupservice/updateEntity","Updating ").then(n=>{this.changeDetection.next({originalObject:t,modifiedObject:n}),this.toastrService.show({type:"success",text:t.entityBusinessName+" Updated!"}),this.disableToggleFlag=!1,this.gridOptions.showActivateDeactivateButton=!0}).catch(n=>{this.changeDetection.next({originalObject:t,modifiedObject:void 0}),this.disableToggleFlag=!0,this.gridOptions.showActivateDeactivateButton=!1,this.toastrService.show({type:"error",text:n})})}actionButtonClickEvent(t,i){switch(i){case"update":this.disableToggleFlag=!0,this.gridOptions.showActivateDeactivateButton=!1;break;case"cancel":this.disableToggleFlag=!1,this.gridOptions.showActivateDeactivateButton=!0}}activateEmailSetup(t){this.masterService.requestActionRestAPI(t,{emailEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,auditAction:"A",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"emailsetupservice/activateEntity","Activating ").then(n=>{this.changeDetection.next({originalObject:t,modifiedObject:n}),this.toastrService.show({type:"success",text:t.entityBusinessName+" Activated!"})}).catch(n=>{this.toastrService.show({type:"error",text:n})})}deactivateEmailSetup(t){this.masterService.requestActionRestAPI(t,{emailEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,auditAction:"D",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"emailsetupservice/deactivateEntity","Deactivating ").then(n=>{this.changeDetection.next({originalObject:t,modifiedObject:n}),this.toastrService.show({type:"success",text:t.entityBusinessName+" Deactivated!"})}).catch(n=>{this.toastrService.show({type:"error",text:n})})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(D.u),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-email-setup"]],decls:6,vars:0,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Email Setup"],[1,"mat-elevation-z12","lms-master-card"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"mat-card",3),e.qZA()())},dependencies:[v.G,g.a8,C.L]}),l})();var U=p(6082),c=p(6223),B=p(6028),M=p(1775),$=p(3680),L=p(5986),F=p(2557),V=p(617),Z=p(2032),x=p(5683),J=p(7466),G=p(8525);const W=["chipList"];function j(r,l){if(1&r&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.Q6J("value",a.eventID),e.xp6(1),e.hij(" ",a.eventName," ")}}function X(r,l){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Event is required field. "),e.qZA())}function ee(r,l){if(1&r&&(e.TgZ(0,"mat-radio-button",29),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.Q6J("value",a.entityBusinessID),e.xp6(1),e.hij(" ",a.entityBusinessName," ")}}function te(r,l){1&r&&(e.TgZ(0,"mat-icon",32),e._uU(1,"cancel"),e.qZA())}function ie(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"mat-chip-row",30),e.NdJ("removed",function(){const n=e.CHM(a).$implicit,o=e.oxw();return e.KtG(o.remove(n))}),e._uU(1),e.YNc(2,te,2,0,"mat-icon",31),e.qZA()}if(2&r){const a=l.$implicit,t=e.oxw();e.Q6J("removable",t.removable),e.xp6(1),e.hij(" ",a," "),e.xp6(1),e.Q6J("ngIf",t.removable)}}function ne(r,l){if(1&r&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.xp6(1),e.AsE(" ",a.label," - ",a.value," ")}}function oe(r,l){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Message is required field. "),e.qZA())}let H=(()=>{var r;class l{constructor(t,i,n,o,s){this.fb=t,this.loader=i,this.authService=n,this.masterService=o,this.toastrService=s,this.selectedMasterData={},this.masterList=[],this.submitButtonLabel="Submit",this.eventList$=new h.X([]),this.usernameList$=new h.X([]),this.roleList$=new h.X([]),this.fetchDataOnCloseDialog$=new h.X([]),this.isUsernameRequired=!0,this.isRoleRequired=!1,this.recipientType=[{entityBusinessID:0,entityBusinessName:"Individual"},{entityBusinessID:1,entityBusinessName:"Group"},{entityBusinessID:2,entityBusinessName:"Patient"}],this.notificationReplacementSetting=[{label:"For Patient",value:"$patientName"},{label:"For Employee",value:"$loginUser"},{label:"For Discount",value:"$discountAmount"},{label:"For Bill Amount",value:"$billAmount"},{label:"For Bill Date",value:"$billDated"},{label:"For Bill Number",value:"$billNo"},{label:"For Bill Dues",value:"$billDues"},{label:"For Refund Amount",value:"$refundedAmount"},{label:"For AppointmentID",value:"$appointmentID"},{label:"For Current Date",value:"$date"}],this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[B.K5,B.SR],this.recipientList=[],this.destroySubscription$=new S.t(1)}ngOnInit(){this.getEventList().then(t=>{this.eventList$.next(t),this.getUserList().then(i=>{this.usernameList$.next(i),this.getRoleList().then(n=>{this.roleList$.next(n)}).catch(n=>{this.toastrService.show({type:"error",text:n})})}).catch(i=>{this.toastrService.show({type:"error",text:i})})}).catch(t=>{this.toastrService.show({type:"error",text:t})}),this.notificationSetupFormGroup=this.fb.group({eventID:new c.NI(null,[c.kI.required]),eventName:new c.NI(null),recipientID:new c.NI(null),selectedRecipientType:new c.NI(0),selectedUserID:new c.NI(null),selectedRoleID:new c.NI(null),cc:new c.NI(""),email:new c.NI(!1),sms:new c.NI(!1),dashboard:new c.NI(!1),entityBusinessName:new c.NI(null,[c.kI.required])}),null!==this.selectedMasterData&&(this.notificationSetupFormGroup.patchValue({eventID:this.selectedMasterData.eventID,eventName:this.selectedMasterData.entityParentBusinessName,selectedRecipientType:this.selectedMasterData.isGroup,selectedUserID:0===this.selectedMasterData.isGroup?this.selectedMasterData.recipientID:null,selectedRoleID:1===this.selectedMasterData.isGroup?this.selectedMasterData.recipientID:null,cc:this.selectedMasterData.cc,email:this.selectedMasterData.email,sms:this.selectedMasterData.sms,dashboard:this.selectedMasterData.dashboard,entityBusinessName:this.selectedMasterData.entityBusinessName}),this.recipientList=0===this.selectedMasterData.cc.length?[]:this.selectedMasterData.cc.split(";"))}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getEventList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForNotificationManagement({genericRequestEntity:{companyID:this.authService.companyID,detailFlag:null!==this.selectedMasterData}},"masterservice/getAllEventMaster").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):(this.loader.hideSpinner(),i(o.errorMessage))},o=>{this.loader.hideSpinner(),i("Either Internet is not working or some internal server issue")})})}getUserList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:null!==this.selectedMasterData,dropDown:!0}},"employeeservice/getAllEmployee").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):(this.loader.hideSpinner(),i(o.errorMessage))},o=>{this.loader.hideSpinner(),i("Either Internet is not working or some internal server issue")})})}getRoleList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",dropDown:!0,detailFlag:!1}},"roleservice/getAllRole/").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or some internal server issue")})})}onChangeOfDropdown(t){"Event"===t.type&&this.notificationSetupFormGroup.controls.eventName.setValue(t.viewValue)}onChangeOfRecipientType(t){switch(t){case 0:this.isUsernameRequired=!0,this.isRoleRequired=!1,this.notificationSetupFormGroup.controls.selectedRoleID.setValue(null);break;case 1:this.isUsernameRequired=!1,this.isRoleRequired=!0,this.notificationSetupFormGroup.controls.selectedUserID.setValue(null);break;case 2:this.isUsernameRequired=!1,this.isRoleRequired=!1,this.notificationSetupFormGroup.controls.selectedRoleID.setValue(null),this.notificationSetupFormGroup.controls.selectedUserID.setValue(null)}}add(t){const i=t.input,n=t.value;this.validateEmail(n)?(n||"").trim()&&(this.recipientList.push(n.trim()),this.chipList.errorState=!1):this.chipList.errorState=!0,""===n&&(this.chipList.errorState=!1),i&&(i.value="")}remove(t){const i=this.recipientList.indexOf(t);i>=0&&this.recipientList.splice(i,1)}validateEmail(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}setRecipient(){var t="";return this.recipientList.forEach(n=>{t+=n+";"}),t.slice(0,-1)}submitNotificationSetupForm(t){let i=-1;i=0===t.selectedRecipientType?t.selectedUserID:1===t.selectedRecipientType?t.selectedRoleID:-1;const n=Number(t.email),o=Number(t.sms),s=Number(t.dashboard);if(0==n&&0==o&&0==s)return this.toastrService.show({type:"error",text:"You have to check at least one notification preference"}),this.notificationSetupFormGroup.markAllAsTouched(),void this.notificationSetupFormGroup.updateValueAndValidity();if(this.notificationSetupFormGroup.valid){let u={},k="",P="";null===this.selectedMasterData?(u={notificationConfigEntity:{recipientID:i,eventID:t.eventID,email:n,sms:o,dashboard:s,isGroup:t.selectedRecipientType,companyID:this.authService.companyID,createdBy:this.authService.employeeID,auditAction:"C",cc:this.setRecipient(),entityBusinessName:t.entityBusinessName,entityParentBusinessName:t.eventName}},k="notificationconfig/createNotificationConfig",P="Creating new notification setting!"):(u={notificationConfigEntity:{recipientID:i,eventID:t.eventID,email:n,sms:o,dashboard:s,isGroup:t.selectedRecipientType,companyID:this.authService.companyID,createdBy:this.authService.employeeID,auditAction:"U",cc:this.setRecipient(),id:this.selectedMasterData.id,entityBusinessName:t.entityBusinessName,entityParentBusinessName:t.eventName}},k="notificationconfig/updateNotificationConfig",P="Updating selected notification setting!"),this.loader.showSpinner(P),this.masterService.requestApiForNotificationManagement(u,k).pipe((0,d.R)(this.destroySubscription$)).subscribe(T=>{this.loader.hideSpinner(),"200"===T.statusCode?this.fetchDataOnCloseDialog$.next([{modifiedObject:T.responseList}]):this.toastrService.show({type:"error",text:T.errorMessage})},T=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}else this.notificationSetupFormGroup.markAllAsTouched(),this.notificationSetupFormGroup.updateValueAndValidity()}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(c.qu),e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-notification-setup-form"]],viewQuery:function(t,i){if(1&t&&e.Gf(W,5),2&t){let n;e.iGM(n=e.CRH())&&(i.chipList=n.first)}},inputs:{selectedMasterData:"selectedMasterData",masterList:"masterList",submitButtonLabel:"submitButtonLabel"},decls:58,vars:25,consts:[["autocomplete","off",3,"formGroup"],[1,"container-fluid","notification-setup-form"],[1,"row"],[1,"col-lg-5","col-md-5","col-sm-12"],[1,"col-12"],["appearance","outline",1,"event-mat-form-field"],["formControlName","eventID","id","ntf-form-1","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12",2,"margin-bottom","12px"],["id","radio-group-label"],["aria-labelledby","radio-group-label","id","ntf-form-2","aria-label","Select an option","color","primary","formControlName","selectedRecipientType",1,"recipient-type-radio-group",3,"change"],[1,"col-12",3,"hidden"],["customClass","event-mat-form-field",3,"dropdownFor","isRequired","records","formControlsName","idForSelect","dropdownChangeEvent"],["id","cc-recipient-email-label"],["aria-label","Recipient selection","id","ntf-form-5","aria-labelledby","cc-recipient-email-label"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Add CC Recipient",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-labelledby","cc-recipient-email-label",1,"notification-preference-group"],["color","primary","id","ntf-form-6","formControlName","email"],["color","primary","id","ntf-form-7","formControlName","sms"],["color","primary","id","ntf-form-8","formControlName","dashboard"],[1,"col-lg-7","col-md-7","col-sm-12"],[1,"message-replacement-card"],[1,"replacement-card-title"],["class","col-lg-6 col-md-6 col-sm-12 format-label",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message To Be Sent","formControlName","entityBusinessName","minLength","1","maxLength","300","id","ntf-form-9","rows","12"],[1,"btn","btn-primary","lms-submit-button",3,"click","keydown.enter"],[3,"value"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"col-lg-6","col-md-6","col-sm-12","format-label"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"Choose Event"),e.qZA(),e.TgZ(9,"mat-select",6),e.NdJ("selectionChange",function(o){return i.onChangeOfDropdown({type:"Event",value:o.value,viewValue:o.source.selected._element.nativeElement.innerText.trim()})}),e.YNc(10,j,2,2,"mat-option",7),e.ALo(11,"async"),e.qZA(),e.YNc(12,X,2,0,"mat-error",8),e.qZA()(),e.TgZ(13,"div",9)(14,"label",10),e._uU(15,"Pick Recipient Type"),e.qZA(),e.TgZ(16,"mat-radio-group",11),e.NdJ("change",function(o){return i.onChangeOfRecipientType(o.value)}),e.YNc(17,ee,2,2,"mat-radio-button",7),e.qZA()(),e.TgZ(18,"div",12)(19,"app-lms-select",13),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfDropdown(o)}),e.qZA()(),e.TgZ(20,"div",12)(21,"app-lms-select",13),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfDropdown(o)}),e.qZA()(),e.TgZ(22,"div",4)(23,"label",14),e._uU(24,"Add CC Recipient"),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-chip-grid",15,16),e.YNc(28,ie,3,3,"mat-chip-row",17),e.TgZ(29,"input",18),e.NdJ("matChipInputTokenEnd",function(o){return i.add(o)}),e.qZA()(),e.TgZ(30,"mat-error"),e._uU(31,"Please Input Valid Email!"),e.qZA()()(),e.TgZ(32,"div",4)(33,"label",14),e._uU(34,"Notification Preference"),e.qZA(),e.TgZ(35,"div",19)(36,"mat-checkbox",20),e._uU(37,"Email"),e.qZA(),e.TgZ(38,"mat-checkbox",21),e._uU(39,"SMS"),e.qZA(),e.TgZ(40,"mat-checkbox",22),e._uU(41,"Dashboard "),e.qZA()()()()(),e.TgZ(42,"div",23)(43,"div",2)(44,"div",4)(45,"div",24)(46,"div",25),e._uU(47," Message Replacement Format "),e.qZA(),e.TgZ(48,"div",2),e.YNc(49,ne,2,2,"div",26),e.qZA()()(),e.TgZ(50,"div",4)(51,"mat-form-field",5)(52,"mat-label"),e._uU(53,"Enter Message To Be Sent"),e.qZA(),e._UZ(54,"textarea",27),e.YNc(55,oe,2,0,"mat-error",8),e.qZA()()()()()(),e.TgZ(56,"button",28),e.NdJ("click",function(){return i.submitNotificationSetupForm(i.notificationSetupFormGroup.value)})("keydown.enter",function(o){return o.preventDefault()}),e._uU(57),e.qZA()()),2&t){const n=e.MAs(27);e.Q6J("formGroup",i.notificationSetupFormGroup),e.xp6(10),e.Q6J("ngForOf",e.lcZ(11,23,i.eventList$)),e.xp6(2),e.Q6J("ngIf",null==i.notificationSetupFormGroup.controls.eventID||null==i.notificationSetupFormGroup.controls.eventID.errors?null:i.notificationSetupFormGroup.controls.eventID.errors.required),e.xp6(5),e.Q6J("ngForOf",i.recipientType),e.xp6(1),e.Q6J("hidden",!i.isUsernameRequired),e.xp6(1),e.Q6J("dropdownFor","Username")("isRequired",i.isUsernameRequired)("records",i.usernameList$)("formControlsName",i.notificationSetupFormGroup.controls.selectedUserID)("idForSelect","ntf-form-3"),e.xp6(1),e.Q6J("hidden",!i.isRoleRequired),e.xp6(1),e.Q6J("dropdownFor","Role")("isRequired",i.isRoleRequired)("records",i.roleList$)("formControlsName",i.notificationSetupFormGroup.controls.selectedRoleID)("idForSelect","ntf-form-4"),e.xp6(7),e.Q6J("ngForOf",i.recipientList),e.xp6(1),e.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),e.xp6(20),e.Q6J("ngForOf",i.notificationReplacementSetting),e.xp6(6),e.Q6J("ngIf",null==i.notificationSetupFormGroup.controls.entityBusinessName||null==i.notificationSetupFormGroup.controls.entityBusinessName.errors?null:i.notificationSetupFormGroup.controls.entityBusinessName.errors.required),e.xp6(2),e.hij(" ",i.submitButtonLabel," ")}},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,M.P,$.ey,L.oG,F.RA,F.oH,F.qH,F.z3,V.Hw,Z.Nt,x.KE,x.hX,x.TO,J.VQ,J.U0,G.gD,m.Ov],styles:[".notification-setup-form[_ngcontent-%COMP%]{margin-top:12px}.recipient-type-radio-group[_ngcontent-%COMP%], .notification-preference-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.message-replacement-card[_ngcontent-%COMP%]{height:auto;width:100%;border:2px solid black;border-radius:2px;margin-bottom:10px}.replacement-card-title[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#8a2be2}.format-label[_ngcontent-%COMP%]{text-align:center}"]}),l})();var ae=p(3519),re=p.n(ae),se=p(4834);let le=(()=>{var r;class l{constructor(t,i,n,o,s,u){this.loader=t,this.authService=i,this.masterService=n,this.exportService=o,this.toastrService=s,this.dialog=u,this.notificationConfigurationList$=new h.X([]),this.destroySubscription$=new S.t(1),this.inlineEditFlag=!1,this.showLogCheckedFlag=!1,this.gridOptions=new R.s8,this.changeDetection=new I.x}ngOnInit(){this.setNotificationConfigurationList(),this.gridOptions={searchPlaceholder:"Search Notification configuration",pageSize:this.authService.pageSize,dateFormat:"yyyy-MM-dd",keyCodeForNextCell:13,showInlineEdit:this.inlineEditFlag,titleForMobileView:"entityParentBusinessName",pageSizeArray:[5,10,20],showDeleteButton:!1,showAddButton:!0,showEditButton:!0,showActivateDeactivateButton:!0,showSearchInput:!0,activateDeactivateCondition:{conditionalProperty:"activeFlag",valueForActivation:"1",valueForDeactivation:"0"},columns:[{name:"entityParentBusinessName",label:"Event Name",enable:!0,searchable:!0,sortable:!0,type:"text"},{name:"createdByUser",label:"Recipient Name",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!1},{name:"isGroupNewValue",label:"Is Group",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1},{name:"emailNewValue",label:"Send to mail",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1},{name:"smsNewValue",label:"Send SMS",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1},{name:"dashboardNewValue",label:"Send to dashboard",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"cc",label:"CC",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1}]}}setNotificationConfigurationList(){this.getNotificationConfigurationList(!1).then(t=>{this.notificationConfigurationList$.next(t)}).catch(t=>{this.notificationConfigurationList$.next([]),this.toastrService.show({type:"error",text:t})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getNotificationConfigurationList(t){return new Promise((i,n)=>{this.loader.showSpinner("Notification Configuration list on the way."),this.masterService.requestApiForNotificationManagement({genericRequestEntity:{companyID:this.authService.companyID}},"notificationconfig/getNotificationConfig").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,s.responseList=s.responseList.map(u=>({...u,isGroupNewValue:0===u.isGroup?"No":1===u.isGroup?"Yes":2===u.isGroup?"For patient only":null,emailNewValue:1===u.email?"Yes":"No",smsNewValue:1===u.sms?"Yes":"No",dashboardNewValue:1===u.dashboard?"Yes":"No"})),i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or some internal server issue")})})}exportData(t){this.exportService.generateFile(this.notificationConfigurationList$.getValue(),"Notification Configuration List."+t,[{property:"entityParentBusinessName",label:"Event Name"},{property:"createdByUser",label:"Recipient Name"},{property:"isGroupNewValue",label:"Is Group"},{property:"emailNewValue",label:"Send to mail"},{property:"smsNewValue",label:"Send SMS"},{property:"dashboardNewValue",label:"Send to dashboard"},{property:"cc",label:"CC"}])}openCreateNotificationConfigurationForm(t){this.dialog.open(U.s,{disableClose:!0,data:{header:"Notification Setup Form",buttonLabel:"Submit",records:{selectedItem:t},component:H},animation:{to:"right"},position:{top:"50vh",left:"50vw"},panelClass:"lms-dialog-box-center"}).afterClosed().subscribe(n=>{null!==n&&this.setNotificationConfigurationList()})}openUpdateNotificationConfigurationForm(t){this.dialog.open(U.s,{disableClose:!0,data:{header:"Corporate Form",buttonLabel:"Update",records:{selectedItem:t},component:H},animation:{to:"right"},position:{top:"50vh",left:"50vw"},panelClass:"lms-dialog-box-center"}).afterClosed().subscribe(n=>{null!==n&&this.setNotificationConfigurationList()})}deactivateNotificationConfiguration(t){re().fire({title:"Do you want to remove selected notification setting?",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Close",icon:"warning"}).then(i=>{i.isConfirmed&&(this.loader.showSpinner("Deactivating notification setting..."),this.masterService.requestApiForNotificationManagement({notificationConfigEntity:{recipientID:t.recipientID,eventID:t.eventID,email:t.email,sms:t.sms,dashboard:t.dashboard,isGroup:t.isGroup,companyID:this.authService.companyID,createdBy:this.authService.employeeID,auditAction:"D",cc:t.cc,id:t.id,entityBusinessName:t.entityBusinessName,entityParentBusinessName:t.entityParentBusinessName}},"notificationconfig/updateNotificationConfig").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode?this.setNotificationConfigurationList():this.toastrService.show({type:"error",text:o.errorMessage})},o=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})}))})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(D.u),e.Y36(_.k),e.Y36(se.Y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-notification-configuration"]],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Notification Configuration"],[1,"mat-elevation-z12","lms-master-card"],[1,"lms-matcardtitlegroup"],["mat-icon-button","",3,"disableRipple","click"],["aria-label","excel",1,"lms-excel-icon"],["aria-label","csv",1,"lms-csv-icon"],[1,"remaining-space"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",1)(5,"mat-card",3)(6,"mat-card-title-group",4)(7,"button",5),e.NdJ("click",function(){return i.exportData("xlsx")}),e._UZ(8,"div",6),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.exportData("csv")}),e._UZ(10,"div",7),e.qZA(),e._UZ(11,"span",8),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("disableRipple",!0))},dependencies:[v.G,w.RK,g.a8,g.C1,C.L]}),l})();var ce=p(9098);let pe=(()=>{var r;class l{constructor(){}ngOnInit(){}}return(r=l).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-notification-message-setup"]],decls:1,vars:0,consts:[["childLinkLabel","Administration","subchildLinkLabel","Notification Message Setup"]],template:function(t,i){1&t&&e._UZ(0,"app-under-maintenance",0)},dependencies:[ce.g]}),l})();var Q=p(2333);function de(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"div",11)(1,"mat-card",12)(2,"mat-card-header")(3,"div",13),e._uU(4),e.ALo(5,"firstLetter"),e.qZA(),e.TgZ(6,"mat-card-title"),e._uU(7),e.qZA(),e.TgZ(8,"mat-card-subtitle"),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card-content")(11,"div",1)(12,"div",14)(13,"div"),e._uU(14,"View : "),e.qZA(),e.TgZ(15,"div")(16,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityIsBillView=i)}),e.qZA()()(),e.TgZ(17,"div",14)(18,"div"),e._uU(19,"Insert : "),e.qZA(),e.TgZ(20,"div")(21,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityIsInsert=i)}),e.qZA()()(),e.TgZ(22,"div",14)(23,"div"),e._uU(24,"Update : "),e.qZA(),e.TgZ(25,"div")(26,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityIsUpdate=i)}),e.qZA()()(),e.TgZ(27,"div",14)(28,"div"),e._uU(29,"Delete : "),e.qZA(),e.TgZ(30,"div")(31,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityIsDelete=i)}),e.qZA()()(),e.TgZ(32,"div",14)(33,"div"),e._uU(34,"Can Verify : "),e.qZA(),e.TgZ(35,"div")(36,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityIsVerified=i)}),e.qZA()()(),e.TgZ(37,"div",14)(38,"div"),e._uU(39,"No. of days : "),e.qZA(),e.TgZ(40,"mat-form-field",16)(41,"mat-label"),e._uU(42,"Days"),e.qZA(),e.TgZ(43,"input",17),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.entityDays=i)}),e.qZA()()()()()()()}if(2&r){const a=l.$implicit,t=e.oxw();e.Q6J("hidden",0===t.pageAccessDetails.length),e.xp6(4),e.hij(" ",e.lcZ(5,10,(null==a?null:a.pageName)||"")," "),e.xp6(3),e.Oqu((null==a?null:a.pageName)||""),e.xp6(2),e.Oqu((null==a?null:a.pageCode)||""),e.xp6(7),e.Q6J("ngModel",a.entityIsBillView),e.xp6(5),e.Q6J("ngModel",a.entityIsInsert),e.xp6(5),e.Q6J("ngModel",a.entityIsUpdate),e.xp6(5),e.Q6J("ngModel",a.entityIsDelete),e.xp6(5),e.Q6J("ngModel",a.entityIsVerified),e.xp6(7),e.Q6J("ngModel",a.entityDays)}}function ue(r,l){1&r&&(e.TgZ(0,"div",18),e._UZ(1,"img",19),e.qZA())}let ge=(()=>{var r;class l{constructor(t,i,n,o){this.loader=t,this.authService=i,this.masterService=n,this.toastrService=o,this.roleList$=new h.X([]),this.destroySubscription$=new S.t(1),this.pageAccessDetails=[]}ngOnInit(){this.entityRole=new c.NI(null,[c.kI.required]),this.getRoleList().then(t=>{this.roleList$.next(t)}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getRoleList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,entityBusinessID:null,mode:"W",detailFlag:!1,dropDown:!0}},"roleservice/getAllRole/").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or facing internal server issue")})})}getPageAccessDetails(t){return new Promise((i,n)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,roleID:t,mode:"W"}},"pageaccessservice/getAllEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s?.responseList?[]:s?.responseList[0]?.pageList||[],i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}onChangeOfRole(t){this.getPageAccessDetails(t.value).then(i=>{this.pageAccessDetails=i}).catch(i=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}clearFormControl(){this.entityRole.reset(),this.pageAccessDetails=[]}updatePageAccessMaster(){this.pageAccessDetails=this.pageAccessDetails.map(i=>({...i,entityDays:Number(i.entityDays),entityIsBillView:Number(i.entityIsBillView),entityIsDelete:Number(i.entityIsDelete),entityIsInsert:Number(i.entityIsInsert),entityIsUpdate:Number(i.entityIsUpdate),entityIsVerified:Number(i.entityIsVerified)}));const t={pageAccessEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",entityRoleID:this.entityRole.value,pageList:this.pageAccessDetails,auditAction:"U"}};this.loader.showSpinner("Page access master updating..."),this.masterService.requestApiForGeneralMaster(t,"pageaccessservice/updateEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(i=>{this.loader.hideSpinner(),this.toastrService.show("200"===i.statusCode?{type:"success",text:"Page access master updated successfully!"}:{type:"error",text:i.errorMessage})},i=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-page-access"]],decls:15,vars:9,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Page Access Master"],[1,"row","page-access-container"],[1,"col-sm-12","col-md-6","col-lg-3"],[3,"dropdownFor","isRequired","records","formControlsName","idForSelect","customClass","dropdownChangeEvent"],["mat-raised-button","","color","warn",1,"warn-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-btn",3,"disabled","click"],[1,"row","mapping-main-block"],["class","col-lg-3 col-md-4 col-12",3,"hidden",4,"ngFor","ngForOf"],["style"," background-color: white;",4,"ngIf"],[1,"col-lg-3","col-md-4","col-12",3,"hidden"],[1,"page-access-card"],["mat-card-avatar","",1,"pa-card-avatar"],[1,"col-lg-12","page-access-label"],["color","primary",3,"ngModel","ngModelChange"],["appearance","outline",1,"pa-days-input"],["matInput","","placeholder","Days","minLength","1","maxLength","3",3,"ngModel","ngModelChange"],[2,"background-color","white"],["src","assets/images/noitemfound.png",1,"no-item-found"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-lms-select",5),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfRole(o)}),e.qZA()(),e.TgZ(7,"div",4)(8,"button",6),e.NdJ("click",function(){return i.clearFormControl()}),e._uU(9,"Clear"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return i.updatePageAccessMaster()}),e._uU(11,"Update"),e.qZA()()(),e.TgZ(12,"div",8),e.YNc(13,de,44,12,"div",9),e.YNc(14,ue,2,0,"div",10),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("dropdownFor","Role")("isRequired",!0)("records",i.roleList$)("formControlsName",i.entityRole)("idForSelect","page-access-field-1")("customClass","page-access-select"),e.xp6(4),e.Q6J("disabled",i.entityRole.invalid),e.xp6(3),e.Q6J("ngForOf",i.pageAccessDetails),e.xp6(1),e.Q6J("ngIf",0===i.pageAccessDetails.length))},dependencies:[m.sg,m.O5,v.G,c.Fj,c.JJ,c.On,M.P,w.lW,g.a8,g.kc,g.dn,g.dk,g.$j,g.n5,L.oG,Z.Nt,x.KE,x.hX,C.L,Q.q],styles:[".page-access-container[_ngcontent-%COMP%]{margin-top:10px}.pa-card-avatar[_ngcontent-%COMP%]{background-size:cover;background-color:#f5f5f5;text-align:center;line-height:40px}.mapping-main-block[_ngcontent-%COMP%]{background-color:#f5f5f5}.warn-btn[_ngcontent-%COMP%]{float:right;margin-top:10px}.primary-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:10px}.page-access-label[_ngcontent-%COMP%]{margin-top:10px!important}.col-12[_ngcontent-%COMP%]{margin-top:30px!important}.page-access-card[_ngcontent-%COMP%]{max-width:500px;height:auto}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:15px!important}.page-access-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.pa-days-input[_ngcontent-%COMP%]{width:100px!important;font-size:10px}.no-item-found[_ngcontent-%COMP%]{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);height:40%}@media (max-width: 766px){.no-item-found[_ngcontent-%COMP%]{top:75%;width:60%;height:25%}}"]}),l})();var he=p(6593),N=p(8257);function me(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"div",34)(1,"mat-card",35)(2,"mat-card-header")(3,"div",36),e._uU(4),e.ALo(5,"firstLetter"),e.qZA(),e.TgZ(6,"mat-card-title"),e._uU(7),e.qZA()(),e.TgZ(8,"mat-card-content")(9,"div",1)(10,"div",37)(11,"div",38),e._uU(12,"Font Name :"),e.qZA(),e.TgZ(13,"div")(14,"mat-form-field",39)(15,"mat-label"),e._uU(16,"Font Name"),e.qZA(),e.TgZ(17,"mat-select",40),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.fontName=i)}),e.TgZ(18,"mat-option",41),e._uU(19,"Times-Roman"),e.qZA(),e.TgZ(20,"mat-option",42),e._uU(21,"Courier"),e.qZA(),e.TgZ(22,"mat-option",43),e._uU(23,"Helvetica"),e.qZA(),e.TgZ(24,"mat-option",44),e._uU(25,"Verdana"),e.qZA()()()()(),e.TgZ(26,"div",37)(27,"div",38),e._uU(28,"Color :"),e.qZA(),e.TgZ(29,"div")(30,"mat-form-field",39)(31,"mat-label"),e._uU(32,"Color"),e.qZA(),e.TgZ(33,"input",45),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.color=i)}),e.qZA()()()(),e.TgZ(34,"div",37)(35,"div",38),e._uU(36,"Font Size :"),e.qZA(),e.TgZ(37,"div")(38,"mat-form-field",39)(39,"mat-label"),e._uU(40,"Font Size"),e.qZA(),e.TgZ(41,"input",46),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.fontSize=i)}),e.qZA()()()(),e.TgZ(42,"div",37)(43,"div",38),e._uU(44,"Alignment :"),e.qZA(),e.TgZ(45,"div")(46,"mat-form-field",39)(47,"mat-label"),e._uU(48,"Alignment"),e.qZA(),e.TgZ(49,"mat-select",40),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.alignment=i)}),e.TgZ(50,"mat-option",47),e._uU(51,"left"),e.qZA(),e.TgZ(52,"mat-option",48),e._uU(53,"right"),e.qZA(),e.TgZ(54,"mat-option",49),e._uU(55,"center"),e.qZA(),e.TgZ(56,"mat-option",50),e._uU(57,"justified"),e.qZA()()()()(),e.TgZ(58,"div",37)(59,"div"),e._uU(60,"Is Bold :"),e.qZA(),e.TgZ(61,"div")(62,"mat-checkbox",51),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.isBold=i)}),e.qZA()()(),e.TgZ(63,"div",37)(64,"div"),e._uU(65,"Is Italic :"),e.qZA(),e.TgZ(66,"div")(67,"mat-checkbox",51),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.isItalic=i)}),e.qZA()()(),e.TgZ(68,"div",37)(69,"div",38),e._uU(70,"Font Weight :"),e.qZA(),e.TgZ(71,"div")(72,"mat-form-field",39)(73,"mat-label"),e._uU(74,"Font Weight"),e.qZA(),e.TgZ(75,"input",52),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.fontWeight=i)}),e.qZA()()()(),e.TgZ(76,"div",37)(77,"div",38),e._uU(78,"Capital Type :"),e.qZA(),e.TgZ(79,"mat-form-field",39)(80,"mat-label"),e._uU(81,"Capital Type"),e.qZA(),e.TgZ(82,"mat-select",40),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.capitalType=i)}),e.TgZ(83,"mat-option",53),e._uU(84,"UpperCase"),e.qZA(),e.TgZ(85,"mat-option",53),e._uU(86,"LowerCase"),e.qZA(),e.TgZ(87,"mat-option",53),e._uU(88,"InitCap"),e.qZA()()()()()()()()}if(2&r){const a=l.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,13,(null==a?null:a.configType)||"")," "),e.xp6(3),e.Oqu((null==a?null:a.configType)||""),e.xp6(10),e.Q6J("ngModel",a.fontName),e.xp6(16),e.Q6J("ngModel",a.color),e.xp6(8),e.Q6J("ngModel",a.fontSize),e.xp6(8),e.Q6J("ngModel",a.alignment),e.xp6(13),e.Q6J("ngModel",a.isBold),e.xp6(5),e.Q6J("ngModel",a.isItalic),e.xp6(8),e.Q6J("ngModel",a.fontWeight),e.xp6(7),e.Q6J("ngModel",a.capitalType),e.xp6(1),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(2),e.Q6J("value",3)}}function fe(r,l){1&r&&e._uU(0,"Attachments")}function ye(r,l){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"label",54),e._UZ(2,"div",55),e._uU(3," Upload Pathology Header "),e.qZA(),e.TgZ(4,"input",56),e.NdJ("change",function(i){e.CHM(a);const n=e.oxw(2);return e.KtG(n.uploadPathologyHeaderImage(i))}),e.qZA(),e.BQk()}}function be(r,l){if(1&r){const a=e.EpF();e.ynx(0),e._UZ(1,"img",57),e.TgZ(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return i.base64StringForPathologyHeader="",e.KtG(i.safePathologyHeaderImageURL="")}),e._UZ(4,"div",60),e.qZA()(),e.BQk()}if(2&r){const a=e.oxw(2);e.xp6(1),e.Q6J("src",a.safePathologyHeaderImageURL,e.LSH),e.xp6(2),e.Q6J("disableRipple",!0)}}function _e(r,l){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"label",61),e._UZ(2,"div",55),e._uU(3," Upload Pathology Footer "),e.qZA(),e.TgZ(4,"input",62),e.NdJ("change",function(i){e.CHM(a);const n=e.oxw(2);return e.KtG(n.uploadPathologyFooterImage(i))}),e.qZA(),e.BQk()}}function ve(r,l){if(1&r){const a=e.EpF();e.ynx(0),e._UZ(1,"img",63),e.TgZ(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return i.base64StringForPathologyFooter="",e.KtG(i.safePathologyFooterImageURL="")}),e._UZ(4,"div",60),e.qZA()(),e.BQk()}if(2&r){const a=e.oxw(2);e.xp6(1),e.Q6J("src",a.safePathologyFooterImageURL,e.LSH),e.xp6(2),e.Q6J("disableRipple",!0)}}function Ce(r,l){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"label",64),e._UZ(2,"div",55),e._uU(3," Upload Radiology Header "),e.qZA(),e.TgZ(4,"input",65),e.NdJ("change",function(i){e.CHM(a);const n=e.oxw(2);return e.KtG(n.uploadRadiologyHeaderImage(i))}),e.qZA(),e.BQk()}}function Se(r,l){if(1&r){const a=e.EpF();e.ynx(0),e._UZ(1,"img",66),e.TgZ(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return i.base64StringForRadiologyHeader="",e.KtG(i.safeRadiologyHeaderImageURL="")}),e._UZ(4,"div",60),e.qZA()(),e.BQk()}if(2&r){const a=e.oxw(2);e.xp6(1),e.Q6J("src",a.safeRadiologyHeaderImageURL,e.LSH),e.xp6(2),e.Q6J("disableRipple",!0)}}function xe(r,l){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"label",67),e._UZ(2,"div",55),e._uU(3," Upload Radiology Footer "),e.qZA(),e.TgZ(4,"input",68),e.NdJ("change",function(i){e.CHM(a);const n=e.oxw(2);return e.KtG(n.uploadRadiologyFooterImage(i))}),e.qZA(),e.BQk()}}function we(r,l){if(1&r){const a=e.EpF();e.ynx(0),e._UZ(1,"img",69),e.TgZ(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(a);const i=e.oxw(2);return i.base64StringForRadiologyFooter="",e.KtG(i.safeRadiologyFooterImageURL="")}),e._UZ(4,"div",60),e.qZA()(),e.BQk()}if(2&r){const a=e.oxw(2);e.xp6(1),e.Q6J("src",a.safeRadiologyFooterImageURL,e.LSH),e.xp6(2),e.Q6J("disableRipple",!0)}}function Me(r,l){1&r&&e._uU(0,"Report Page Configuration")}function Re(r,l){if(1&r&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.Q6J("value",a.entityBusinessID),e.xp6(1),e.hij(" ",a.entityBusinessName," ")}}function Ie(r,l){if(1&r&&(e.TgZ(0,"mat-option",53),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.Q6J("value",a.entityBusinessID),e.xp6(1),e.hij(" ",a.entityBusinessName," ")}}function De(r,l){if(1&r){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",10)(2,"div",1),e.YNc(3,me,89,15,"div",11),e.qZA()(),e.TgZ(4,"form",12)(5,"mat-vertical-stepper",null,13)(7,"mat-step"),e.YNc(8,fe,1,0,"ng-template",14),e.TgZ(9,"div",10)(10,"div",1)(11,"div",15),e.YNc(12,ye,5,0,"ng-container",8),e.YNc(13,be,5,2,"ng-container",8),e.qZA(),e.TgZ(14,"div",15),e.YNc(15,_e,5,0,"ng-container",8),e.YNc(16,ve,5,2,"ng-container",8),e.qZA(),e.TgZ(17,"div",15),e.YNc(18,Ce,5,0,"ng-container",8),e.YNc(19,Se,5,2,"ng-container",8),e.qZA(),e.TgZ(20,"div",15),e.YNc(21,xe,5,0,"ng-container",8),e.YNc(22,we,5,2,"ng-container",8),e.qZA()()()(),e.TgZ(23,"mat-step"),e.YNc(24,Me,1,0,"ng-template",14),e.TgZ(25,"div",10)(26,"div",1)(27,"div",16)(28,"mat-form-field",17)(29,"mat-label"),e._uU(30,"Radiology Header Offset"),e.qZA(),e.TgZ(31,"input",18),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"radiologyHeaderOffset",!1))}),e.qZA()()(),e.TgZ(32,"div",16)(33,"mat-form-field",17)(34,"mat-label"),e._uU(35,"Radiology Footer Offset"),e.qZA(),e.TgZ(36,"input",19),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"radiologyFooterOffset",!1))}),e.qZA()()(),e.TgZ(37,"div",16)(38,"mat-form-field",17)(39,"mat-label"),e._uU(40,"Pathology Header Offset"),e.qZA(),e.TgZ(41,"input",20),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"pathologyHeaderOffset",!1))}),e.qZA()()(),e.TgZ(42,"div",16)(43,"mat-form-field",17)(44,"mat-label"),e._uU(45,"Pathology Footer Offset"),e.qZA(),e.TgZ(46,"input",21),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"pathologyFooterOffset",!1))}),e.qZA()()(),e.TgZ(47,"div",16)(48,"mat-form-field",17)(49,"mat-label"),e._uU(50,"Left Margin"),e.qZA(),e.TgZ(51,"input",22),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"leftMargin",!1))}),e.qZA()()(),e.TgZ(52,"div",16)(53,"mat-form-field",17)(54,"mat-label"),e._uU(55,"Right Margin"),e.qZA(),e.TgZ(56,"input",23),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"rightMargin",!1))}),e.qZA()()(),e.TgZ(57,"div",16)(58,"mat-form-field",17)(59,"mat-label"),e._uU(60,"Choose Doctor Sign Position"),e.qZA(),e.TgZ(61,"mat-select",24),e.YNc(62,Re,2,2,"mat-option",25),e.ALo(63,"async"),e.qZA()()(),e.TgZ(64,"div",16)(65,"mat-form-field",17)(66,"mat-label"),e._uU(67,"Page Split"),e.qZA(),e.TgZ(68,"input",26),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"pageSplit",!1))}),e.qZA()()(),e.TgZ(69,"div",16)(70,"mat-form-field",17)(71,"mat-label"),e._uU(72,"Line Height"),e.qZA(),e.TgZ(73,"input",27),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"lineSpacing",!1))}),e.qZA()()(),e.TgZ(74,"div",16)(75,"mat-form-field",17)(76,"mat-label"),e._uU(77,"Background Color"),e.qZA(),e.TgZ(78,"input",28),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"backgroundColor",!1))}),e.qZA(),e.TgZ(79,"input",29),e.NdJ("change",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.reportConfigurationFormgroup.controls.backgroundColor.setValue(i.target.value))}),e.qZA()()(),e.TgZ(80,"div",16)(81,"mat-form-field",17)(82,"mat-label"),e._uU(83,"Symbol"),e.qZA(),e.TgZ(84,"input",30),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"symbol",!1))}),e.qZA()()(),e.TgZ(85,"div",16)(86,"mat-form-field",17)(87,"mat-label"),e._uU(88,"Choose Symbol Position"),e.qZA(),e.TgZ(89,"mat-select",31),e.YNc(90,Ie,2,2,"mat-option",25),e.ALo(91,"async"),e.qZA()()(),e.TgZ(92,"div",16)(93,"mat-form-field",17)(94,"mat-label"),e._uU(95,"Column Seperation"),e.qZA(),e.TgZ(96,"input",32),e.NdJ("keyup",function(i){e.CHM(a);const n=e.oxw();return e.KtG(n.keytab(i,"columnSeperation",!1))}),e.qZA()()(),e.TgZ(97,"div",16)(98,"mat-checkbox",33),e._uU(99," is Bracket? "),e.qZA()()()()()()(),e.BQk()}if(2&r){const a=e.oxw();e.xp6(3),e.Q6J("ngForOf",a.reportStyleList),e.xp6(1),e.Q6J("formGroup",a.reportConfigurationFormgroup),e.xp6(8),e.Q6J("ngIf",0===a.base64StringForPathologyHeader.length),e.xp6(1),e.Q6J("ngIf",a.base64StringForPathologyHeader.length>0),e.xp6(2),e.Q6J("ngIf",0===a.base64StringForPathologyFooter.length),e.xp6(1),e.Q6J("ngIf",a.base64StringForPathologyFooter.length>0),e.xp6(2),e.Q6J("ngIf",0===a.base64StringForRadiologyHeader.length),e.xp6(1),e.Q6J("ngIf",a.base64StringForRadiologyHeader.length>0),e.xp6(2),e.Q6J("ngIf",0===a.base64StringForRadiologyFooter.length),e.xp6(1),e.Q6J("ngIf",a.base64StringForRadiologyFooter.length>0),e.xp6(40),e.Q6J("ngForOf",e.lcZ(63,14,a.doctorSignPositionList$)),e.xp6(17),e.Q6J("value",a.reportConfigurationFormgroup.controls.backgroundColor.value),e.xp6(11),e.Q6J("ngForOf",e.lcZ(91,16,a.symbolPositionList$)),e.xp6(8),e.Q6J("labelPosition","after")}}function Fe(r,l){1&r&&(e.TgZ(0,"div",70),e._UZ(1,"img",71),e.qZA())}let Ae=(()=>{var r;class l{constructor(t,i,n,o,s,u){this.loader=t,this.authService=i,this.masterService=n,this.toastrService=o,this.fb=s,this._sanitizer=u,this.companyList$=new h.X([]),this.doctorSignPositionList$=new h.X([]),this.symbolPositionList$=new h.X([]),this.reportStyleList=[],this.destroySubscription$=new S.t(1),this.reportConfigurationDetailForSelectedCompany=[],this.reportEntryConfigEntity={},this.reportPageConfigEntity={},this.base64StringForPathologyHeader="",this.base64StringForPathologyFooter="",this.base64StringForRadiologyHeader="",this.base64StringForRadiologyFooter=""}ngOnInit(){this.entityCompany=new c.NI(null,[c.kI.required]),this.doctorSignPositionList$.next([{entityBusinessID:"left",entityBusinessName:"Left"},{entityBusinessID:"right",entityBusinessName:"Right"},{entityBusinessID:"center",entityBusinessName:"Center"}]),this.symbolPositionList$.next([{entityBusinessID:"left",entityBusinessName:"Left"},{entityBusinessID:"right",entityBusinessName:"Right"},{entityBusinessID:"Up",entityBusinessName:"Up"},{entityBusinessID:"Down",entityBusinessName:"Down"}]),this.reportConfigurationFormgroup=this.fb.group({radiologyHeaderOffset:new c.NI(null),radiologyFooterOffset:new c.NI(null),pathologyHeaderOffset:new c.NI(null),pathologyFooterOffset:new c.NI(null),leftMargin:new c.NI(null),rightMargin:new c.NI(null),doctorSignPosition:new c.NI(null),pageSplit:new c.NI(null),lineSpacing:new c.NI(null),backgroundColor:new c.NI("#ffffff"),symbol:new c.NI(null),symbolPosition:new c.NI(null),columnSeperation:new c.NI(null),isBracket:new c.NI(null)}),this.getCompanyList().then(t=>{this.companyList$.next(t)}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getCompanyList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,entityBusinessID:null,mode:"W",detailFlag:!1,dropDown:!0}},"companyservice/getAllEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or facing internal server issue")})})}getReportConfigurationForSpecificCompany(t){return new Promise((i,n)=>{this.loader.showSpinner("Fetching report configuration..."),this.masterService.requestApiForGeneralMaster({reportConfigEntity:{companyID:t,mode:"W"}},"reportconfig/getReportConfig").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}onChangeOfCompany(t){this.getReportConfigurationForSpecificCompany(t.value).then(i=>{this.reportConfigurationDetailForSelectedCompany=i,this.reportStyleList=0==i[0].reportStyleList?.length?Te:i[0].reportStyleList,this.reportEntryConfigEntity=i[0].reportEntryConfigEntity,this.reportPageConfigEntity=i[0].reportPageConfigEntity,this.reportConfigurationFormgroup.patchValue({radiologyHeaderOffset:this.reportPageConfigEntity?.radiologyHeaderOffset||null,radiologyFooterOffset:this.reportPageConfigEntity?.radiologyFooterOffset||null,pathologyHeaderOffset:this.reportPageConfigEntity?.pathologyHeaderOffset||null,pathologyFooterOffset:this.reportPageConfigEntity?.pathologyFooterOffset||null,leftMargin:this.reportPageConfigEntity?.leftMargin||null,rightMargin:this.reportPageConfigEntity?.rightMargin||null,doctorSignPosition:this.reportPageConfigEntity?.doctorSignPosition||null,pageSplit:this.reportEntryConfigEntity?.pageSplit||null,lineSpacing:this.reportEntryConfigEntity?.lineSpacing||null,backgroundColor:this.reportEntryConfigEntity?.backgroundColor||"#ffffff",symbol:this.reportEntryConfigEntity?.symbol||null,symbolPosition:this.reportEntryConfigEntity?.symbolPosition||null,columnSeperation:this.reportEntryConfigEntity?.columnSeperation||null,isBracket:this.reportEntryConfigEntity?.isBracket||null}),null!==this.reportPageConfigEntity.pathologyHeader&&(this.base64StringForPathologyHeader=this.reportPageConfigEntity.pathologyHeader,this.safePathologyHeaderImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForPathologyHeader)),null!==this.reportPageConfigEntity.pathologyFooter&&(this.base64StringForPathologyFooter=this.reportPageConfigEntity.pathologyFooter,this.safePathologyFooterImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForPathologyFooter)),null!==this.reportPageConfigEntity.radiologyHeader&&(this.base64StringForRadiologyHeader=this.reportPageConfigEntity.radiologyHeader,this.safeRadiologyHeaderImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForRadiologyHeader)),null!==this.reportPageConfigEntity.radiologyFooter&&(this.base64StringForRadiologyFooter=this.reportPageConfigEntity.radiologyFooter,this.safeRadiologyFooterImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForRadiologyFooter))}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}calculateFileSize(t,i){if(0==t)return"0 Bytes";var o=i||2,u=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,u)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][u]}uploadPathologyHeaderImage(t){let i=t.target.files||t.srcElement.files;var n=i[0];if(parseFloat(this.calculateFileSize(n.size,2))>100)this.toastrService.show({type:"error",text:"File size should not greater than 100 kb"}),this.base64StringForPathologyHeader="";else if(i&&n){var o=new FileReader;o.onload=this.loadPathologyHeaderImage.bind(this),o.readAsBinaryString(n)}}loadPathologyHeaderImage(t){this.base64StringForPathologyHeader=btoa(t.target.result),this.safePathologyHeaderImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForPathologyHeader)}uploadPathologyFooterImage(t){let i=t.target.files||t.srcElement.files;var n=i[0];if(parseFloat(this.calculateFileSize(n.size,2))>100)this.toastrService.show({type:"error",text:"File size should not greater than 100 kb"}),this.base64StringForPathologyHeader="";else if(i&&n){var o=new FileReader;o.onload=this.loadPathologyFooterImage.bind(this),o.readAsBinaryString(n)}}loadPathologyFooterImage(t){this.base64StringForPathologyFooter=btoa(t.target.result),this.safePathologyFooterImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForPathologyFooter)}uploadRadiologyHeaderImage(t){let i=t.target.files||t.srcElement.files;var n=i[0];if(parseFloat(this.calculateFileSize(n.size,2))>100)this.toastrService.show({type:"error",text:"File size should not greater than 100 kb"}),this.base64StringForPathologyHeader="";else if(i&&n){var o=new FileReader;o.onload=this.loadRadiologyHeaderImage.bind(this),o.readAsBinaryString(n)}}loadRadiologyHeaderImage(t){this.base64StringForRadiologyHeader=btoa(t.target.result),this.safeRadiologyHeaderImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForRadiologyHeader)}uploadRadiologyFooterImage(t){let i=t.target.files||t.srcElement.files;var n=i[0];if(parseFloat(this.calculateFileSize(n.size,2))>100)this.toastrService.show({type:"error",text:"File size should not greater than 100 kb"}),this.base64StringForPathologyHeader="";else if(i&&n){var o=new FileReader;o.onload=this.loadRadiologyFooterImage.bind(this),o.readAsBinaryString(n)}}loadRadiologyFooterImage(t){this.base64StringForRadiologyFooter=btoa(t.target.result),this.safeRadiologyFooterImageURL=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.base64StringForRadiologyFooter)}keytab(t,i,n){if(13===t.keyCode){var o=t.srcElement.id.split("-").reduce((s,u)=>(Number(u)&&(u=Number(u)+1),s+"-"+u));document.getElementById(o).focus()}else this._uniqueColumnValidator(t.target.value,i,n)}_uniqueColumnValidator(t,i,n){}clearFormControl(){this.entityCompany.reset(),this.reportConfigurationDetailForSelectedCompany=[],this.reportStyleList=[]}updateReportConfiguration(){let t=this.reportConfigurationFormgroup.value;const i={reportConfigEntity:{companyID:this.entityCompany.value,reportPageConfigEntity:{doctorSignPosition:t.doctorSignPosition,id:this.reportPageConfigEntity.id,leftMargin:t.leftMargin,pathologyFooter:this.base64StringForPathologyFooter,pathologyFooterOffset:t.pathologyFooterOffset,pathologyHeader:this.base64StringForPathologyHeader,pathologyHeaderOffset:t.pathologyHeaderOffset,radiologyFooter:this.base64StringForRadiologyFooter,radiologyFooterOffset:t.radiologyFooterOffset,radiologyHeader:this.base64StringForRadiologyHeader,radiologyHeaderOffset:t.radiologyHeaderOffset,rightMargin:t.rightMargin},reportEntryConfigEntity:{backgroundColor:t.backgroundColor,columnSeperation:t.columnSeperation,id:this.reportEntryConfigEntity.id,isBracket:Number(t.isBracket),lineSpacing:t.lineSpacing,pageSplit:t.pageSplit,symbol:t.symbol,symbolPosition:t.symbolPosition},reportStyleList:this.reportStyleList.map(n=>({...n,isBold:Number(n.isBold),isItalic:Number(n.isItalic)})),createdBy:this.authService.employeeID,mode:"W"}};null==this.reportPageConfigEntity.id?(this.loader.showSpinner("Report configuration creating..."),this.masterService.requestApiForGeneralMaster(i,"reportconfig/createReportConfig").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),this.toastrService.show("200"===n.statusCode?{type:"success",text:"Report configuration created successfully!"}:{type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})):(this.loader.showSpinner("Report configuration updating..."),this.masterService.requestApiForGeneralMaster(i,"reportconfig/updateReportConfig").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),this.toastrService.show("200"===n.statusCode?{type:"success",text:"Report configuration updated successfully!"}:{type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})}))}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(_.k),e.Y36(c.qu),e.Y36(he.H7))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-report-configuration"]],decls:14,vars:9,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Report Configuration"],[1,"row","report-configuration-container"],[1,"col-sm-12","col-md-6","col-lg-3"],[3,"dropdownFor","isRequired","records","formControlsName","idForSelect","customClass","dropdownChangeEvent"],["mat-raised-button","","color","warn",1,"warn-btn",3,"click"],["mat-raised-button","","color","primary",1,"primary-btn",3,"disabled","click"],[4,"ngIf"],["style","background-color: white",4,"ngIf"],[1,"container-fluid","report-configuration-container"],["class","col-lg-3 col-md-4 col-12",4,"ngFor","ngForOf"],["autocomplete","off",3,"formGroup"],["stepper",""],["matStepLabel",""],[1,"col-sm-12","col-md-12","col-lg-6"],[1,"col-12","col-md-4","col-lg-3"],["appearance","outline",1,"lms-mat-form-field"],["matInput","","placeholder","Radiology Header Offset","formControlName","radiologyHeaderOffset","minLength","1","maxLength","50","id","report-conf-5",3,"keyup"],["matInput","","placeholder","Radiology Footer Offset","formControlName","radiologyFooterOffset","minLength","1","maxLength","50","id","report-conf-6",3,"keyup"],["matInput","","placeholder","Pathology Header Offset","formControlName","pathologyHeaderOffset","minLength","1","maxLength","50","id","report-conf-7",3,"keyup"],["matInput","","placeholder","Pathology Footer Offset","formControlName","pathologyFooterOffset","minLength","1","maxLength","50","id","report-conf-8",3,"keyup"],["matInput","","placeholder","Left Margin","formControlName","leftMargin","minLength","1","maxLength","50","id","report-conf-9",3,"keyup"],["matInput","","placeholder","Right Margin","formControlName","rightMargin","minLength","1","maxLength","50","id","report-conf-10",3,"keyup"],["formControlName","doctorSignPosition","id","report-conf-11"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Page Split","formControlName","pageSplit","minLength","1","maxLength","50","id","report-conf-12",3,"keyup"],["matInput","","placeholder","Line Height","formControlName","lineSpacing","minLength","1","maxLength","50","id","report-conf-13",3,"keyup"],["matInput","","placeholder","Background Color","formControlName","backgroundColor","minLength","1","maxLength","50","id","report-conf-14",3,"keyup"],["matSuffix","","type","color",3,"value","change"],["matInput","","placeholder","Symbol","formControlName","symbol","minLength","1","maxLength","50","id","report-conf-15",3,"keyup"],["formControlName","symbolPosition","id","report-conf-16"],["matInput","","placeholder","Column Seperation","formControlName","columnSeperation","minLength","1","maxLength","50","id","report-conf-17",3,"keyup"],["formControlName","isBracket","id","report-conf-18","color","primary",1,"bracket-checkbox",3,"labelPosition"],[1,"col-lg-3","col-md-4","col-12"],[1,"page-access-card","mat-elevation-z10"],["mat-card-avatar","",1,"config-type-avatar"],[1,"col-lg-12","report-config-label"],[2,"margin-top","10px"],["appearance","outline",1,"report-config-input"],[3,"ngModel","ngModelChange"],["value","Times-Roman"],["value","Courier"],["value","Helvetica"],["value","Verdana"],["matInput","","placeholder","Color","minLength","1","maxLength","50",3,"ngModel","ngModelChange"],["matInput","","placeholder","Font Size","minLength","1","maxLength","50",3,"ngModel","ngModelChange"],["value","left"],["value","right"],["value","center"],["value","justified"],["color","primary",3,"ngModel","ngModelChange"],["matInput","","placeholder","Font Weight","minLength","1","maxLength","50",3,"ngModel","ngModelChange"],[3,"value"],["for","report-conf-1",1,"banner-file-upload"],["aria-label","upload",1,"lms-upload-icon"],["id","report-conf-1","type","file","accept","image/*",3,"change"],["alt","Pathology Header Image",1,"banner-upload-image",3,"src"],[1,"centered-icon-button"],["mat-icon-button","",1,"banner-clear-image-icon",3,"disableRipple","click"],["aria-label","clear-image",1,"lms-clear-image-icon"],["for","report-conf-2",1,"banner-file-upload"],["id","report-conf-2","type","file","accept","image/*",3,"change"],["alt","Pathology Footer Image",1,"banner-upload-image",3,"src"],["for","report-conf-3",1,"banner-file-upload"],["id","report-conf-3","type","file","accept","image/*",3,"change"],["alt","Radiology Header Image",1,"banner-upload-image",3,"src"],["for","report-conf-4",1,"banner-file-upload"],["id","report-conf-4","type","file","accept","image/*",3,"change"],["alt","Radiology Footer Image",1,"banner-upload-image",3,"src"],[2,"background-color","white"],["src","assets/images/noitemfound.png",1,"no-item-found"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-lms-select",5),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfCompany(o)}),e.qZA()(),e.TgZ(7,"div",4)(8,"button",6),e.NdJ("click",function(){return i.clearFormControl()}),e._uU(9," Clear "),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return i.updateReportConfiguration()}),e._uU(11," Update "),e.qZA()()()(),e.YNc(12,De,100,18,"ng-container",8),e.YNc(13,Fe,2,0,"div",9)),2&t&&(e.xp6(6),e.Q6J("dropdownFor","Company")("isRequired",!0)("records",i.companyList$)("formControlsName",i.entityCompany)("idForSelect","report-configuration-1")("customClass","page-access-select"),e.xp6(4),e.Q6J("disabled",i.entityCompany.invalid),e.xp6(2),e.Q6J("ngIf",i.reportConfigurationDetailForSelectedCompany.length>0),e.xp6(1),e.Q6J("ngIf",0===i.reportConfigurationDetailForSelectedCompany.length))},dependencies:[m.sg,m.O5,v.G,c._Y,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,M.P,$.ey,w.lW,w.RK,g.a8,g.kc,g.dn,g.dk,g.n5,L.oG,N.C0,N.VY,N.Vq,Z.Nt,x.KE,x.hX,x.R9,G.gD,C.L,m.Ov,Q.q],styles:[".config-type-avatar[_ngcontent-%COMP%]{background-size:cover;background-color:#f5f5f5;text-align:center;line-height:40px}.mapping-main-block[_ngcontent-%COMP%]{background-color:#f5f5f5}.warn-btn[_ngcontent-%COMP%]{float:right;margin-top:10px}.primary-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:10px}.report-config-label[_ngcontent-%COMP%]{margin-top:5px!important;display:flex;flex-direction:row;justify-content:space-between}.col-sm-12[_ngcontent-%COMP%]{margin-top:10px!important}.page-access-card[_ngcontent-%COMP%]{max-width:500px;height:auto;margin-bottom:10px}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:15px!important}.report-config-input[_ngcontent-%COMP%]{width:100px!important;font-size:10px}.no-item-found[_ngcontent-%COMP%]{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);height:40%}@media (max-width: 766px){.no-item-found[_ngcontent-%COMP%]{top:75%;width:60%;height:25%}}.report-configuration-container[_ngcontent-%COMP%]{display:flex;margin-top:10px}input[type=file][_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.banner-file-upload[_ngcontent-%COMP%]{border:1px solid #ccc;display:inline-block;padding:6px 12px;cursor:pointer;height:200px;width:auto;min-width:45vw;text-align:center;border-radius:5px}@media (max-width: 766px){.banner-file-upload[_ngcontent-%COMP%]{width:78vw}}.banner-upload-image[_ngcontent-%COMP%]{border:1px solid #ccc;height:200px;width:45vw;border-radius:5px;object-fit:contain}@media (max-width: 766px){.banner-upload-image[_ngcontent-%COMP%]{width:78vw}}.banner-upload-image[_ngcontent-%COMP%]:hover{filter:blur(3px)}.centered-icon-button[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.banner-clear-image-icon[_ngcontent-%COMP%]{position:absolute;top:100%;width:160px;left:50%;transform:translate(-50%);text-align:center}input[type=color][_ngcontent-%COMP%]{border:none;width:25px;height:25px}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch{border:none}.bracket-checkbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:10px}@media (max-width: 766px){.bracket-checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}}"]}),l})();const Te=[{id:1,configType:"Doc Qualification",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:2,configType:"Doc configType",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:3,configType:"Pat Runtime",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:4,configType:"PatientDetailRuntime",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:5,configType:"Report Heading",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:6,configType:"Test configType Heading",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:7,configType:"Test Component Heading",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:8,configType:"Value Entry",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null},{id:9,configType:"Ref Range",fontName:null,color:null,fontSize:null,alignment:null,isBold:0,isItalic:0,fontWeight:null,capitalType:null}];function Le(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"li",12)(1,"input",13),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.selected=i)})("ngModelChange",function(i){const o=e.CHM(a).$implicit,s=e.oxw();return e.KtG(s.selectionChangeEvent(i,o))}),e.qZA(),e._uU(2),e.qZA()}if(2&r){const a=l.$implicit;e.xp6(1),e.s9C("value",a.id),e.Q6J("ngModel",a.selected),e.xp6(1),e.hij(" ",a.name," ")}}let Ze=(()=>{var r;class l{constructor(t,i,n,o){this.loader=t,this.masterService=i,this.authService=n,this.toastrService=o,this.roleList$=new h.X([]),this.roleToDashboardList$=new h.X([]),this.destroySubscription$=new S.t(1)}ngOnInit(){this.entityRoleID=new c.NI(null),this.getRoleList().then(t=>{this.roleList$.next(t)}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getRoleList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,entityBusinessID:null,mode:"W",detailFlag:!1,dropDown:!0}},"roleservice/getAllRole/").pipe((0,d.R)(this.destroySubscription$)).subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or facing internal server issue")})})}getRoleToDashboardList(t){return new Promise((i,n)=>{this.loader.showSpinner("Role to dashboard detail on the way..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,roleID:t,mode:"W"}},"dashboardmenumasterservice/fetchCheckUncheckDashboardMenuListByRole").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}onChangeOfRole(t){this.getRoleToDashboardList(t.value).then(i=>{this.roleToDashboardList$.next(i)}).catch(i=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}selectionChangeEvent(t,i){return i.selected=t?1:0,i}updateRoleToDashboardDetail(){let t=this.roleToDashboardList$.getValue();const i={roleDashBoardMaster:{roleID:this.entityRoleID.value,companyID:this.authService.companyID,createdBy:this.authService.employeeID,dashboardMenuIDList:t.reduce((n,o)=>(1==o.selected&&n.push({id:o.id}),n),[]),auditAction:"C",mode:"W"}};this.loader.showSpinner("Role to dashboard updating..."),this.masterService.requestApiForGeneralMaster(i,"roledashboardmasterservice/createRoleDashboardMaster").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),this.toastrService.show("200"===n.statusCode?{type:"success",text:"Role to dashboard updated successfully!"}:{type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}clearFormControl(){this.entityRoleID.reset(),this.roleToDashboardList$.next([])}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(b.c),e.Y36(y.$),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-to-dashboard"]],decls:19,vars:10,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Role To Dashboard"],[1,"row","role-dashboard-container"],[1,"col-12","col-lg-4","col-md-4"],[3,"dropdownFor","isRequired","records","formControlsName","idForSelect","customClass","dropdownChangeEvent"],[1,"role-dashboard-selection-block"],[1,"list-group","level-two"],["class","list-group-item level-two",4,"ngFor","ngForOf"],[1,"row","role-dashboard-container",3,"hidden"],["mat-raised-button","","color","primary",1,"primary-btn",2,"margin-right","10px",3,"click"],["mat-raised-button","","color","warn",1,"warn-btn",3,"click"],[1,"list-group-item","level-two"],["type","checkbox","name","list_name_child",3,"ngModel","value","ngModelChange"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-lms-select",5),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfRole(o)}),e.qZA()()(),e.TgZ(7,"div",3)(8,"div",4)(9,"div",6)(10,"ul",7),e.YNc(11,Le,3,3,"li",8),e.ALo(12,"async"),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div",4)(15,"button",10),e.NdJ("click",function(){return i.updateRoleToDashboardDetail()}),e._uU(16,"Update"),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return i.clearFormControl()}),e._uU(18,"Clear"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("dropdownFor","Role")("isRequired",!0)("records",i.roleList$)("formControlsName",i.entityRoleID)("idForSelect","role-dashboard-1")("customClass","page-access-select"),e.xp6(5),e.Q6J("ngForOf",e.lcZ(12,8,i.roleToDashboardList$)),e.xp6(2),e.Q6J("hidden",0===i.roleToDashboardList$.getValue().length))},dependencies:[m.sg,v.G,c.Wl,c.JJ,c.On,M.P,w.lW,C.L,m.Ov],styles:[".role-dashboard-container[_ngcontent-%COMP%]{margin-top:10px}.list-group-item[_ngcontent-%COMP%]{list-style:none;background-color:#e4e4e4;width:23vw}.list-group-item[_ngcontent-%COMP%]   span.parent-label-name[_ngcontent-%COMP%]{font-size:19px;font-weight:600;margin-left:7px;position:relative;top:3px}.list-group-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle;cursor:pointer}.list-group-item[_ngcontent-%COMP%]   div.child-list[_ngcontent-%COMP%]{margin-top:10px}.list-group-item[_ngcontent-%COMP%]   div.child-list[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:#fff;padding-left:46px;font-size:18px;font-weight:500}@media (max-width: 766px){.list-group-item[_ngcontent-%COMP%]{width:92vw}}"]}),l})();function Ne(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1,"Unselect All "),e.qZA())}function ke(r,l){1&r&&e._uU(0,"Select All ")}function Pe(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1,"Expand All "),e.qZA())}function qe(r,l){1&r&&e._uU(0,"Collapse All ")}function Oe(r,l){1&r&&e._UZ(0,"div",25)}function Ee(r,l){1&r&&e._UZ(0,"div",26)}function Ue(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"li",27)(1,"input",28),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.selected=i)})("ngModelChange",function(){e.CHM(a);const i=e.oxw().$implicit,n=e.oxw();return e.KtG(n.childCheck(i,i.subMenu))}),e.qZA(),e._uU(2),e.qZA()}if(2&r){const a=l.$implicit;e.xp6(1),e.s9C("value",a.menuID),e.Q6J("ngModel",a.selected),e.xp6(1),e.hij(" ",a.menuName," ")}}function Be(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"li",6)(1,"span",18),e.NdJ("click",function(){const n=e.CHM(a).$implicit,o=e.oxw();return e.KtG(o.expandCollapse(n))}),e.YNc(2,Oe,1,0,"div",19),e.YNc(3,Ee,1,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(5,"input",20),e.NdJ("ngModelChange",function(i){const o=e.CHM(a).$implicit;return e.KtG(o.selected=i)})("ngModelChange",function(){const n=e.CHM(a).$implicit,o=e.oxw();return e.KtG(o.parentCheck(n))}),e.qZA(),e.TgZ(6,"span",21),e._uU(7),e.qZA(),e.TgZ(8,"div",22)(9,"ul",23),e.YNc(10,Ue,3,3,"li",24),e.qZA()()()}if(2&r){const a=l.$implicit,t=e.MAs(4);e.xp6(2),e.Q6J("ngIf",a.isClosed)("ngIfElse",t),e.xp6(3),e.s9C("value",a.menuID),e.Q6J("ngModel",a.selected),e.xp6(2),e.Oqu(a.menuName),e.xp6(1),e.Q6J("hidden",a.isClosed),e.xp6(2),e.Q6J("ngForOf",a.subMenu)}}let $e=(()=>{var r;class l{constructor(t,i,n,o){this.loader=t,this.masterService=i,this.authService=n,this.toastrService=o,this.roleToMenuObject={},this.roleList$=new h.X([]),this.roleToMenuList$=new h.X([])}ngOnInit(){this.entityRoleID=new c.NI(null),this.getRoleList().then(t=>{this.roleList$.next(t);const i=this.roleList$.getValue();i.length>0&&this.getRoleToMenuList(i[0].entityBusinessID).then(n=>{this.entityRoleID.setValue(i[0].entityBusinessID),this.roleToMenuList$.next(n),this.initializedValueForMenuList()}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}initializedValueForMenuList(){this.roleToMenuObject.isAllSelected=!1,this.roleToMenuObject.isAllCollapsed=!1,this.roleToMenuObject.ParentChildchecklist=this.roleToMenuList$.getValue().map(t=>({...t,isClosed:0}))}onChangeOfDropdown(t){this.getRoleToMenuList(t.value).then(i=>{this.roleToMenuList$.next(i),this.initializedValueForMenuList()}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}getRoleList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,entityBusinessID:null,mode:"W",detailFlag:!1,dropDown:!0}},"roleservice/getAllRole/").subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or facing internal server issue")})})}getRoleToMenuList(t){return new Promise((i,n)=>{this.loader.showSpinner("Role To Menu List on the way..."),this.masterService.requestApiForGeneralMaster({searchDTO:{companyID:this.authService.companyID,userID:this.authService.employeeID,searchValue:t,mode:"W",dropDown:!1}},"adminservice/getRoleMenuList").subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}parentCheck(t){for(var i=0;i<t.subMenu.length;i++)t.subMenu[i].selected=t.selected}childCheck(t,i){t.selected=i.every(function(n){return 1==n.selected})}selectUnselectAll(t){t.isAllSelected=!t.isAllSelected;for(var i=0;i<t.ParentChildchecklist.length;i++){t.ParentChildchecklist[i].selected=t.isAllSelected;for(var n=0;n<t.ParentChildchecklist[i].subMenu.length;n++)t.ParentChildchecklist[i].subMenu[n].selected=t.isAllSelected}}expandCollapse(t){t.isClosed=!t.isClosed}expandCollapseAll(t){for(var i=0;i<t.ParentChildchecklist.length;i++)t.ParentChildchecklist[i].isClosed=!t.isAllCollapsed;t.isAllCollapsed=!t.isAllCollapsed}setDefaultMenuList(){this.getRoleToMenuList(this.entityRoleID.value).then(t=>{this.roleToMenuList$.next(t),this.initializedValueForMenuList()}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}submitRoleToMenuList(){this.loader.showSpinner("Assigning Checked Menu to Selected Role");let t=[];this.roleToMenuObject.ParentChildchecklist.map(n=>{n.selected&&t.push(n.menuID),n.subMenu.map(o=>{o.selected&&t.push(o.menuID)})}),this.masterService.requestApiForGeneralMaster({roleModuleRequestEntity:{entityRoleID:this.entityRoleID.value,auditAction:"U",entityMenuList:t,companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",active:1}},"adminservice/assignModule").subscribe(n=>{this.loader.hideSpinner(),"200"===n.statusCode||this.toastrService.show({type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(b.c),e.Y36(y.$),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-to-menu"]],decls:31,vars:13,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","Role To Menu"],[1,"mat-elevation-z12","lms-master-card"],[1,"col-12"],[1,"list-group","sticky-header"],[1,"list-group-item"],[1,"col-12","col-lg-4","col-md-4"],[3,"dropdownFor","isRequired","records","formControlsName","idForSelect","dropdownChangeEvent"],[1,"col-6","col-lg-2","col-md-2"],[1,"btn-dimension",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["noneSelected",""],["isCollapsed",""],[1,"btn","btn-warning","btn-dimension",3,"click"],[1,"btn","btn-success","btn-dimension",3,"disabled","click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[3,"click"],["aria-label","expand","class","lms-expand-icon",4,"ngIf","ngIfElse"],["type","checkbox","name","list_name",3,"ngModel","value","ngModelChange"],[1,"parent-label-name"],[1,"child-list",3,"hidden"],[1,"list-group","level-two"],["class","list-group-item level-two",4,"ngFor","ngForOf"],["aria-label","expand",1,"lms-expand-icon"],["aria-label","collapse",1,"lms-collapse-icon"],[1,"list-group-item","level-two"],["type","checkbox","name","list_name_child",3,"ngModel","value","ngModelChange"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",1)(5,"mat-card",3)(6,"div",1)(7,"div",4)(8,"ul",5)(9,"li",6)(10,"div",1)(11,"div",7)(12,"app-lms-select",8),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfDropdown(o)}),e.qZA()(),e.TgZ(13,"div",9)(14,"button",10),e.NdJ("click",function(){return i.selectUnselectAll(i.roleToMenuObject)}),e.YNc(15,Ne,2,0,"span",11),e.YNc(16,ke,1,0,"ng-template",null,12,e.W1O),e.qZA()(),e.TgZ(18,"div",9)(19,"button",10),e.NdJ("click",function(){return i.expandCollapseAll(i.roleToMenuObject)}),e.YNc(20,Pe,2,0,"span",11),e.YNc(21,qe,1,0,"ng-template",null,13,e.W1O),e.qZA()(),e.TgZ(23,"div",9)(24,"button",14),e.NdJ("click",function(){return i.setDefaultMenuList()}),e._uU(25,"Set to Default"),e.qZA()(),e.TgZ(26,"div",9)(27,"button",15),e.NdJ("click",function(){return i.submitRoleToMenuList()}),e._uU(28,"Submit"),e.qZA()()()()(),e.TgZ(29,"ul",16),e.YNc(30,Be,11,7,"li",17),e.qZA()()()()()()),2&t){const n=e.MAs(17),o=e.MAs(22);e.xp6(12),e.Q6J("dropdownFor","Role")("isRequired",!0)("records",i.roleList$)("formControlsName",i.entityRoleID)("idForSelect","role-tab-1"),e.xp6(2),e.Q6J("ngClass",i.roleToMenuObject.isAllSelected?"btn btn-danger":"btn btn-info"),e.xp6(1),e.Q6J("ngIf",i.roleToMenuObject.isAllSelected)("ngIfElse",n),e.xp6(4),e.Q6J("ngClass",i.roleToMenuObject.isAllCollapsed?"btn btn-danger":"btn btn-primary"),e.xp6(1),e.Q6J("ngIf",i.roleToMenuObject.isAllCollapsed)("ngIfElse",o),e.xp6(7),e.Q6J("disabled",i.entityRoleID.invalid),e.xp6(3),e.Q6J("ngForOf",i.roleToMenuObject.ParentChildchecklist)}},dependencies:[m.mk,m.sg,m.O5,v.G,c.Wl,c.JJ,c.On,M.P,g.a8,C.L],styles:[".list-group-item[_ngcontent-%COMP%]{list-style:none;background-color:#e4e4e4}.list-group-item[_ngcontent-%COMP%]   span.parent-label-name[_ngcontent-%COMP%]{font-size:19px;font-weight:600;margin-left:7px;position:relative;top:3px}.list-group-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle;cursor:pointer}.list-group-item[_ngcontent-%COMP%]   div.child-list[_ngcontent-%COMP%]{margin-top:10px}.list-group-item[_ngcontent-%COMP%]   div.child-list[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:#fff;padding-left:46px;font-size:18px;font-weight:500}.sticky-header[_ngcontent-%COMP%]{position:sticky;top:-16px;z-index:99}.btn-dimension[_ngcontent-%COMP%]{width:100%;margin:3px}"]}),l})(),Je=(()=>{var r;class l{constructor(t,i,n,o,s){this.loader=t,this.authService=i,this.masterService=n,this.exportService=o,this.toastrService=s,this.SMSSetupList$=new h.X([]),this.destroySubscription$=new S.t(1),this.inlineEditFlag=!0,this.showLogCheckedFlag=!1,this.gridOptions=new R.s8,this.changeDetection=new I.x,this.disableToggleFlag=!1}ngOnInit(){this.getSMSSetupList(!1).then(t=>{this.SMSSetupList$.next(t)}).catch(t=>{this.SMSSetupList$.next([]),this.toastrService.show({type:"error",text:t})}),this.gridOptions={searchPlaceholder:"Search Sender ID",pageSize:this.authService.pageSize,dateFormat:"yyyy-MM-dd",keyCodeForNextCell:13,showInlineEdit:this.inlineEditFlag,titleForMobileView:"entitySenderID",pageSizeArray:[5,10,20],showDeleteButton:!1,showAddButton:!0,showEditButton:!0,showActivateDeactivateButton:!0,activateDeactivateCondition:{conditionalProperty:"activeFlag",valueForActivation:"1",valueForDeactivation:"0"},columns:[{name:"entityAuthKey",label:"Auth Key",enable:!0,searchable:!1,sortable:!1,type:"password",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[^]*",columnPlaceholder:"Auth Key",requiredLabel:"Please enter Auth Key",patternLabel:"Please match the requested format."},{name:"entitySenderID",label:"SenderID",enable:!0,searchable:!0,sortable:!0,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[^]*",columnPlaceholder:"SenderID",requiredLabel:"Please enter SenderID",patternLabel:"Please match the requested format."},{name:"entityRoute",label:"Route",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!0,isRequired:!0,shouldBeUnique:!1,min:1,max:100,pattern:"[^]*",columnPlaceholder:"Route",requiredLabel:"Please enter Route",patternLabel:"Please match the requested format."},{name:"createdByUser",label:"Last Updated By",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"effectiveDateFrom",label:"Last Modified on",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"activeFlag",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1},{name:"entityBusinessID",label:"",enable:!1,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1}]}}ngOnDestroy(){this.destroySubscription$.next(null),this.destroySubscription$.complete()}getSMSSetupList(t){return new Promise((i,n)=>{this.loader.showSpinner("SMS Setup list on the way."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:t,dropDown:!1}},"smssetupservice/getAllEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList?[]:s.responseList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or some internal server issue")})})}exportData(t){const i=[{property:"entityAuthKey",label:"Auth Key"},{property:"entitySenderID",label:"SenderID"},{property:"entityRoute",label:"Route"},{property:"createdByUser",label:"Last Updated By"},{property:"effectiveDateFrom",label:"Last Modified on"}];this.showLogCheckedFlag&&i.push({property:"auditAction",label:"Audit Action"}),this.exportService.generateFile(this.SMSSetupList$.getValue(),"SMS Setup List."+t,i)}showLog(t){this.SMSSetupList$.next([]),t?this.getSMSSetupList(!0).then(i=>{this.showLogCheckedFlag=!0,this.SMSSetupList$.next(i),this.gridOptions.showAddButton=!1,this.gridOptions.showEditButton=!1,this.gridOptions.showActivateDeactivateButton=!1,this.gridOptions.columns.push({name:"auditAction",label:"Audit Action",enable:!0,searchable:!1,sortable:!1,type:"text",editable:!1,isRequired:!1})}).catch(i=>{this.SMSSetupList$.next([]),this.toastrService.show({type:"error",text:i})}):(this.showLogCheckedFlag=!1,this.ngOnInit())}openCreateSMSSetupForm(t){this.actionButtonClickEvent(null,"add");let i=this.gridOptions.columns.find(n=>"entityAuthKey"===n.name);i.editable=!0,i.isRequired=!0}openUpdateSMSSetupForm(t){this.actionButtonClickEvent(null,"update");let i=this.gridOptions.columns.find(n=>"entityAuthKey"===n.name);i.editable=!1,i.isRequired=!1}actionButtonClickEvent(t,i){switch(i){case"add":case"update":this.disableToggleFlag=!0,this.gridOptions.showActivateDeactivateButton=!1;break;case"cancel":this.disableToggleFlag=!1,this.gridOptions.showActivateDeactivateButton=!0}}addNewSMSSetup(t){this.loader.showSpinner("Adding "+t.entitySenderID),this.masterService.requestApiForGeneralMaster({smsSetupRequestEntity:{entityAuthKey:t.entityAuthKey,entityRoute:t.entityRoute,entitySenderID:t.entitySenderID,companyID:this.authService.companyID,createdBy:this.authService.employeeID,auditAction:"C",mode:"W"}},"smssetupservice/createEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),"200"===n.statusCode?(this.changeDetection.next({originalObject:t,modifiedObject:n.responseList[0]}),this.toastrService.show({type:"success",text:t.entitySenderID+" Added!"}),this.disableToggleFlag=!1,this.gridOptions.showActivateDeactivateButton=!0):this.toastrService.show({type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}updateSMSSetup(t){this.loader.showSpinner("Updating "+t.entitySenderID),this.masterService.requestApiForGeneralMaster({smsSetupRequestEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,entityAuthKey:t.entityAuthKey,entityRoute:t.entityRoute,entitySenderID:t.entitySenderID,auditAction:"U",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"smssetupservice/updateEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),"200"===n.statusCode?(this.changeDetection.next({originalObject:t,modifiedObject:n.responseList[0]}),this.toastrService.show({type:"success",text:t.entitySenderID+" Updated!"}),this.disableToggleFlag=!1,this.gridOptions.showActivateDeactivateButton=!0):this.toastrService.show({type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.changeDetection.next({originalObject:t,modifiedObject:void 0}),this.disableToggleFlag=!0,this.gridOptions.showActivateDeactivateButton=!1,this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}activateSMSSetup(t){this.loader.showSpinner("Activating "+t.entitySenderID),this.masterService.requestApiForGeneralMaster({smsSetupRequestEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,auditAction:"A",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"smssetupservice/activateEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),"200"===n.statusCode?(this.changeDetection.next({originalObject:t,modifiedObject:n.responseList[0]}),this.toastrService.show({type:"success",text:t.entitySenderID+" Activated!"})):this.toastrService.show({type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.changeDetection.next({originalObject:t,modifiedObject:void 0}),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}deactivateSMSSetup(t){this.loader.showSpinner("Deactivating "+t.entitySenderID),this.masterService.requestApiForGeneralMaster({smsSetupRequestEntity:{entityID:t.entityID,entityBusinessID:t.entityBusinessID,auditAction:"D",companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"smssetupservice/deactivateEntity").pipe((0,d.R)(this.destroySubscription$)).subscribe(n=>{this.loader.hideSpinner(),"200"===n.statusCode?(this.changeDetection.next({originalObject:t,modifiedObject:n.responseList[0]}),this.toastrService.show({type:"success",text:t.entitySenderID+" Deactivated!"})):this.toastrService.show({type:"error",text:n.errorMessage})},n=>{this.loader.hideSpinner(),this.changeDetection.next({originalObject:t,modifiedObject:void 0}),this.toastrService.show({type:"error",text:"Either Internet is not working or some internal server issue"})})}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(y.$),e.Y36(b.c),e.Y36(D.u),e.Y36(_.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sms-setup"]],decls:14,vars:4,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","SMS Setup"],[1,"mat-elevation-z12","lms-master-card"],[1,"lms-matcardtitlegroup"],["mat-icon-button","",3,"disableRipple","click"],["aria-label","excel",1,"lms-excel-icon"],["aria-label","csv",1,"lms-csv-icon"],[1,"remaining-space"],["color","primary",1,"lms-matslidetoggle",3,"checked","disabled","change"]],template:function(t,i){1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e.TgZ(4,"div",1)(5,"mat-card",3)(6,"mat-card-title-group",4)(7,"button",5),e.NdJ("click",function(){return i.exportData("xlsx")}),e._UZ(8,"div",6),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.exportData("csv")}),e._UZ(10,"div",7),e.qZA(),e._UZ(11,"span",8),e.TgZ(12,"mat-slide-toggle",9),e.NdJ("change",function(o){return i.showLog(o.checked)}),e._uU(13," Show Logs "),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(3),e.Q6J("checked",i.showLogCheckedFlag)("disabled",i.disableToggleFlag))},dependencies:[v.G,w.RK,g.a8,g.C1,E.Rr,C.L]}),l})();var A=p(4423);function Ge(r,l){if(1&r&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.xp6(1),e.hij(" ",a.entityBusinessName,"")}}function He(r,l){if(1&r&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.xp6(1),e.hij(" ",a.entityBusinessName,"")}}const Y=function(r){return[r]},Qe=[{path:"email-setup",component:K},{path:"sms-setup",component:Je},{path:"configurationmaster",component:z},{path:"roletomenu",component:$e},{path:"userreferralmapping",component:(()=>{var r;class l{constructor(t,i,n,o){this.loader=t,this.toastrService=i,this.masterService=n,this.authService=o,this.employeeList$=new h.X([]),this.availableReferralList$=new h.X([]),this.assignedReferralList$=new h.X([])}ngOnInit(){this.entityEmployeeID=new c.NI(null),this.getEmployeeList().then(t=>{this.employeeList$.next(t)}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}drop(t){t.previousContainer===t.container?(0,A.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,A.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)}getEmployeeList(){return new Promise((t,i)=>{this.loader.showSpinner("Loading..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W",detailFlag:!1,dropDown:!0}},"employeeservice/getAllEmployee/").subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode||"300"===o.statusCode?(o.responseList=null==o.responseList?[]:o.responseList,t(o.responseList)):i(o.errorMessage)},o=>{this.loader.hideSpinner(),i("Either Internet is not working or facing internal server issue")})})}getAvailableReferralList(t){return new Promise((i,n)=>{this.loader.showSpinner("Available Referral List on the way..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,searchValue:t,mode:"W"}},"adminservice/getAvailableReferral").subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList[0].referralEntityList?[]:s.responseList[0].referralEntityList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}getAssignedReferralList(t){return new Promise((i,n)=>{this.loader.showSpinner("Assigned Referral List on the way..."),this.masterService.requestApiForGeneralMaster({genericRequestEntity:{companyID:this.authService.companyID,createdBy:this.authService.employeeID,searchValue:t,mode:"W"}},"adminservice/getAssignedReferral").subscribe(s=>{this.loader.hideSpinner(),"200"===s.statusCode||"300"===s.statusCode?(s.responseList=null==s.responseList[0].referralEntityList?[]:s.responseList[0].referralEntityList,i(s.responseList)):n(s.errorMessage)},s=>{this.loader.hideSpinner(),n("Either Internet is not working or facing internal server issue")})})}onChangeOfDropdown(t){this.fetchReferralList(t.value)}fetchReferralList(t){null!==t&&this.getAvailableReferralList(t).then(i=>{this.availableReferralList$.next(i),this.getAssignedReferralList(t).then(n=>{this.assignedReferralList$.next(n)}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}).catch(()=>{this.toastrService.show({type:"error",text:this.authService.randomErrorForAPIFallback})})}assignAvailableReferral(){const t=this.assignedReferralList$.getValue();this.loader.showSpinner("Assigning Referral Doctor to Selected Employee");let i=[];t.map(o=>{i.push(o.entityBusinessID)}),this.masterService.requestApiForGeneralMaster({userReferralMappingEntity:{entityUserID:this.entityEmployeeID.value,auditAction:"U",referralList:i,companyID:this.authService.companyID,createdBy:this.authService.employeeID,mode:"W"}},"adminservice/assignUserReferral").subscribe(o=>{this.loader.hideSpinner(),"200"===o.statusCode?(this.toastrService.show({type:"success",text:"Assigned Referral Doctor to Selected Employee!"}),this.fetchReferralList(this.entityEmployeeID.value)):this.toastrService.show({type:"error",text:o.errorMessage})},o=>{this.loader.hideSpinner(),this.toastrService.show({type:"error",text:"Either Internet is not working or facing internal server issue"})})}resetAllParameter(){this.entityEmployeeID.setValue(null),this.assignedReferralList$.next([]),this.availableReferralList$.next([])}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(f.D),e.Y36(_.k),e.Y36(b.c),e.Y36(y.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-referral-mapping"]],decls:30,vars:21,consts:[[1,"container-fluid"],[1,"row"],["childLink","Administration","subchildLink","User Referral Mapping"],[1,"mat-elevation-z12","lms-mapping-master-card"],[1,"row","user-referral-sticky-header"],[1,"col-12","col-lg-3","col-md-3"],[3,"dropdownFor","isRequired","records","formControlsName","idForSelect","dropdownChangeEvent"],[1,"col-6","col-lg-2","col-md-2"],[1,"btn","btn-primary","btn-dimension",3,"disabled","click"],[1,"btn","btn-danger","btn-dimension",3,"disabled","click"],[1,"col-6","lms-dragdrop-container"],[2,"text-align","center"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["availableReferralList","cdkDropList"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],["assignedReferralList","cdkDropList"],["cdkDrag","",1,"example-box"]],template:function(t,i){if(1&t&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0)(2,"div",1),e._UZ(3,"app-breadcrumb",2),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"mat-card",3)(6,"div",4)(7,"div",5)(8,"app-lms-select",6),e.NdJ("dropdownChangeEvent",function(o){return i.onChangeOfDropdown(o)}),e.qZA()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.assignAvailableReferral()}),e._uU(11," Submit "),e.qZA()(),e.TgZ(12,"div",7)(13,"button",9),e.NdJ("click",function(){return i.resetAllParameter()}),e._uU(14," Reset All "),e.qZA()()(),e.TgZ(15,"div",1)(16,"div",10)(17,"h2",11),e._uU(18,"Available Referral"),e.qZA(),e.TgZ(19,"div",12,13),e.NdJ("cdkDropListDropped",function(o){return i.drop(o)}),e.YNc(21,Ge,2,1,"div",14),e.ALo(22,"async"),e.qZA()(),e.TgZ(23,"div",10)(24,"h2",11),e._uU(25,"Assigned Referral"),e.qZA(),e.TgZ(26,"div",12,15),e.NdJ("cdkDropListDropped",function(o){return i.drop(o)}),e.YNc(28,He,2,1,"div",14),e.ALo(29,"async"),e.qZA()()()()()),2&t){const n=e.MAs(20),o=e.MAs(27);e.xp6(8),e.Q6J("dropdownFor","Employee")("isRequired",!0)("records",i.employeeList$)("formControlsName",i.entityEmployeeID)("idForSelect","role-tab-1"),e.xp6(2),e.Q6J("disabled",0===i.assignedReferralList$.getValue().length),e.xp6(3),e.Q6J("disabled",i.entityEmployeeID.invalid),e.xp6(6),e.Q6J("cdkDropListData",i.availableReferralList$.getValue())("cdkDropListConnectedTo",e.VKq(17,Y,o)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(22,13,i.availableReferralList$)),e.xp6(5),e.Q6J("cdkDropListData",i.assignedReferralList$.getValue())("cdkDropListConnectedTo",e.VKq(19,Y,n)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(29,15,i.assignedReferralList$))}},dependencies:[m.sg,v.G,M.P,A.Wj,A.Zt,g.a8,C.L,m.Ov],styles:[".lms-mapping-master-card[_ngcontent-%COMP%]{width:96vw;display:inline-block;left:1%;top:10px;height:auto;max-height:80vh;overflow:hidden}@media (max-width: 766px){.lms-mapping-master-card[_ngcontent-%COMP%]{width:90vw}}.lms-dragdrop-container[_ngcontent-%COMP%]{overflow-y:auto;height:auto;max-height:62vh}@media (max-width: 766px){.lms-dragdrop-container[_ngcontent-%COMP%]{max-height:42vh}}.example-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:white;border-radius:4px;overflow:hidden;display:block}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.user-referral-sticky-header[_ngcontent-%COMP%]{position:sticky;top:-16px;z-index:99;background:white}.btn-dimension[_ngcontent-%COMP%]{width:100%;margin:3px}"]}),l})()},{path:"notificationconfig",component:le},{path:"pageaccess",component:ge},{path:"reportconfiguration",component:Ae},{path:"roletodashboard",component:Ze},{path:"messagesetup",component:pe},{path:"",pathMatch:"full",redirectTo:"email-setup"}];let Ye=(()=>{var r;class l{}return(r=l).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[O.Bz.forChild(Qe),O.Bz]}),l})();var ze=p(6611),Ke=p(9820);let Ve=(()=>{var r;class l{}return(r=l).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,Ye,Ke.m,ze.q,c.u5,c.UX]}),l})()}}]);